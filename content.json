{"meta":{"title":"a.d","subtitle":"æ°¸è¿œçƒ­çˆ±","description":"çˆ±ä½ æ‰€çˆ±ï¼Œè¡Œä½ æ‰€è¡Œ","author":"a.d","url":"http://blog.aiheadn.cn","root":"/"},"pages":[{"title":"åˆ†ç±»","date":"2023-01-02T09:52:42.000Z","updated":"2023-01-02T09:54:35.997Z","comments":true,"path":"categories/index.html","permalink":"http://blog.aiheadn.cn/categories/index.html","excerpt":"","text":""},{"title":"a.d çš„å¥½æœ‹å‹ä»¬","date":"2023-01-02T09:55:46.000Z","updated":"2023-01-02T09:57:00.408Z","comments":true,"path":"link/index.html","permalink":"http://blog.aiheadn.cn/link/index.html","excerpt":"","text":""},{"title":"å…³äºæˆ‘","date":"2023-01-03T04:24:25.000Z","updated":"2023-03-08T08:15:23.678Z","comments":true,"path":"about/index.html","permalink":"http://blog.aiheadn.cn/about/index.html","excerpt":"","text":"ä»‹ç»ï¼šä½ å¥½å‘€ æˆ‘æ˜¯a.d Hi This is a.d 01å¹´çš„ç‹®å­åº§ï¼Œè®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯ğŸ’» å­¦ç”Ÿ æœ¬ç§‘åœ¨è¯» çˆ±ä½ æ‰€çˆ±ï¼Œè¡Œä½ æ‰€è¡Œ æ¬¢è¿æ¥åˆ°è¿™ä¸ªé¡µé¢ çˆ±å¥½ï¼š å°è¯´ æ‘„å½± IT è®¡ç®—æœº ç¼–ç¨‹ å¹³é¢è®¾è®¡ PS ç¼–ç¨‹è¯­è¨€ï¼š è¯­è¨€ e Java html5+css3 javascript æŠ€æœ¯æ ˆï¼š æŠ€æœ¯æ ˆ Spring Vue2 è”ç³»æˆ‘ï¼š QQ ï¼š 2585570153 å“”å“©å“”å“©ï¼š UID638159906"},{"title":"æ ‡ç­¾","date":"2023-01-02T09:48:37.000Z","updated":"2023-01-02T09:54:47.706Z","comments":true,"path":"tags/index.html","permalink":"http://blog.aiheadn.cn/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"åŸºäºåç«¯springå­¦ä¹ æ€»ç»“","slug":"åŸºäºåç«¯springå­¦ä¹ æ€»ç»“","date":"2023-03-08T02:45:59.000Z","updated":"2023-03-08T08:07:55.018Z","comments":true,"path":"archives/41256f59.html","link":"","permalink":"http://blog.aiheadn.cn/archives/41256f59.html","excerpt":"ä»¥ä¸‹ç¬”è®°è½¬è½½è‡ªgithubIOC å’Œ DI çš„æ¦‚è¿°IOC(Inversion of Controll)æ€æƒ³æ˜¯åè½¬èµ„æºè·å–çš„æ–¹å‘ï¼Œä¼ ç»Ÿçš„èµ„æºæŸ¥æ‰¾æ–¹å¼è¦æ±‚ç»„ä»¶å‘å®¹å™¨å‘èµ·è¯·æ±‚æŸ¥æ‰¾èµ„æºã€‚ä½œä¸ºå›åº”ï¼Œå®¹å™¨é€‚æ—¶çš„è¿”å›èµ„æºã€‚è€Œåº”ç”¨äº†IOCä¹‹åï¼Œåˆ™æ˜¯å®¹å™¨ä¸»åŠ¨çš„å°†èµ„æºæ¨é€ç»™å®ƒæ‰€ç®¡ç†çš„ç»„ä»¶ï¼Œç»„ä»¶æ‰€è¦åšçš„ä»…æ˜¯é€‰æ‹©ä¸€ç§åˆé€‚çš„æ–¹å¼æ¥æ¥æ”¶èµ„æº DI(Dependency Injection)æ˜¯IOCçš„å¦ä¸€ç§è¡¨è¿°æ–¹å¼ï¼Œå³ç»„ä»¶ä»¥ä¸€äº›é¢„å…ˆå®šä¹‰å¥½çš„æ–¹å¼(å¦‚ï¼šgetteræ–¹æ³•)æ¥æ¥æ”¶æ¥è‡ªå®¹å™¨çš„èµ„æºæ³¨å…¥","text":"ä»¥ä¸‹ç¬”è®°è½¬è½½è‡ªgithubIOC å’Œ DI çš„æ¦‚è¿°IOC(Inversion of Controll)æ€æƒ³æ˜¯åè½¬èµ„æºè·å–çš„æ–¹å‘ï¼Œä¼ ç»Ÿçš„èµ„æºæŸ¥æ‰¾æ–¹å¼è¦æ±‚ç»„ä»¶å‘å®¹å™¨å‘èµ·è¯·æ±‚æŸ¥æ‰¾èµ„æºã€‚ä½œä¸ºå›åº”ï¼Œå®¹å™¨é€‚æ—¶çš„è¿”å›èµ„æºã€‚è€Œåº”ç”¨äº†IOCä¹‹åï¼Œåˆ™æ˜¯å®¹å™¨ä¸»åŠ¨çš„å°†èµ„æºæ¨é€ç»™å®ƒæ‰€ç®¡ç†çš„ç»„ä»¶ï¼Œç»„ä»¶æ‰€è¦åšçš„ä»…æ˜¯é€‰æ‹©ä¸€ç§åˆé€‚çš„æ–¹å¼æ¥æ¥æ”¶èµ„æº DI(Dependency Injection)æ˜¯IOCçš„å¦ä¸€ç§è¡¨è¿°æ–¹å¼ï¼Œå³ç»„ä»¶ä»¥ä¸€äº›é¢„å…ˆå®šä¹‰å¥½çš„æ–¹å¼(å¦‚ï¼šgetteræ–¹æ³•)æ¥æ¥æ”¶æ¥è‡ªå®¹å™¨çš„èµ„æºæ³¨å…¥ Springé…ç½®åœ¨SpringIOCå®¹å™¨è¯»å–beané…ç½®åˆ›å»ºbeanå®ä¾‹ä¹‹å‰ï¼Œå¿…é¡»å¯¹å®ƒè¿›è¡Œå®ä¾‹åŒ–ã€‚åªæœ‰åœ¨å®¹å™¨å®ä¾‹åŒ–åï¼Œæ‰å¯ä»¥ä»IOCå®¹å™¨é‡Œè·å–beanå®ä¾‹å¹¶ä½¿ç”¨ Springæä¾›äº†ä¸¤ç§ç±»å‹çš„IOCå®¹å™¨å®ç° BeanFactoryï¼šIOCå®¹å™¨çš„åŸºæœ¬å®ç°ï¼Œåœ¨è°ƒç”¨getBean()æ–¹æ³•æ—¶æ‰ä¼šå®ä¾‹åŒ–å¯¹è±¡ ApplicationContextï¼šæä¾›äº†æ›´å¤šçš„é«˜çº§ç‰¹æ€§ï¼Œåœ¨åŠ è½½é…ç½®æ–‡ä»¶åå°±ä¼šå®ä¾‹åŒ–å¯¹è±¡ã€‚æ˜¯BeanFactoryçš„å­æ¥å£ BeanFactoryæ˜¯Springæ¡†æ¶çš„åŸºç¡€è®¾æ–½ï¼Œé¢å‘Springæœ¬èº« ApplicationContexté¢å‘ä½¿ç”¨Springæ¡†æ¶çš„å¼€å‘è€…ï¼Œå‡ ä¹æ‰€æœ‰çš„åº”ç”¨åœºåˆéƒ½ç›´æ¥ä½¿ç”¨ApplicationContextè€Œéåº•å±‚çš„BeanFactory æ— è®ºä½¿ç”¨ä½•ç§æ–¹å¼ï¼Œé…ç½®æ–‡ä»¶æ—¶éƒ½æ˜¯ç›¸åŒçš„ 12345&lt;!-- é…ç½®bean --&gt;&lt;!-- class: beançš„å…¨ç±»åï¼Œé€šè¿‡åå°„çš„æ–¹å¼åœ¨IOCå®¹å™¨ä¸­åˆ›å»ºbeanï¼Œæ‰€ä»¥è¦æ±‚beanä¸­å¿…é¡»æœ‰æ— å‚æ„é€ å™¨ --&gt;&lt;bean id=&quot;people&quot; class=&quot;learningspring.ioc.examples.People&quot;&gt; &lt;property name=&quot;name&quot; value=&quot;Chen&quot;/&gt;&lt;/bean&gt; 123456789101112131415161718192021public class People &#123; private String name; public People() &#123; &#125; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; @Override public String toString() &#123; return &quot;People&#123;&quot; + &quot;name=&#x27;&quot; + name + &#x27;\\&#x27;&#x27; + &#x27;&#125;&#x27;; &#125;&#125; 12345678910@Testpublic void test()&#123; // åˆ›å»ºIOCå®¹å™¨ ApplicationContext ctx = new FileSystemXmlApplicationContext(&quot;F:\\\\Projects\\\\IdeaProjects\\\\LearningSpring\\\\src\\\\main\\\\java\\\\learningspring\\\\ioc\\\\examples\\\\applicationContext.xml&quot;); // ä»IOCå®¹å™¨ä¸­è·å–beanå®ä¾‹ People people = (People) ctx.getBean(&quot;people&quot;); System.out.println(people);&#125; ApplicationContextApplicationContextæœ‰ä¸¤ä¸ªå®ç°ç±»ï¼š ClassPathXmlApplicationContextï¼šåŠ è½½ç±»è·¯å¾„é‡Œçš„é…ç½®æ–‡ä»¶ FileSystemXmlApplicationContextï¼šåŠ è½½æ–‡ä»¶ç³»ç»Ÿé‡Œçš„é…ç½®æ–‡ä»¶ Beançš„ç›¸å…³é…ç½®beanæ ‡ç­¾çš„idå’Œnameçš„é…ç½® idï¼šä½¿ç”¨äº†çº¦æŸä¸­çš„å”¯ä¸€çº¦æŸã€‚ä¸èƒ½æœ‰ç‰¹æ®Šå­—ç¬¦ nameï¼šæ²¡æœ‰ä½¿ç”¨çº¦æŸä¸­çš„å”¯ä¸€çº¦æŸï¼ˆç†è®ºä¸Šå¯ä»¥é‡å¤ï¼Œä½†æ˜¯å®é™…å¼€å‘ä¸­ä¸èƒ½å‡ºç°ï¼‰ã€‚å¯ä»¥æœ‰ç‰¹æ®Šå­—ç¬¦ beançš„ç”Ÿå‘½å‘¨æœŸçš„é…ç½® init-methodï¼šbeanè¢«åˆå§‹åŒ–çš„æ—¶å€™æ‰§è¡Œçš„æ–¹æ³• destroy-methodï¼šbeanè¢«é”€æ¯çš„æ—¶å€™æ‰§è¡Œçš„æ–¹æ³•ï¼Œå‰ææ˜¯beanæ˜¯å•ä¾‹çš„ï¼Œå·¥å‚å…³é—­ beançš„ä½œç”¨èŒƒå›´çš„é…ç½® scopeï¼šbeançš„ä½œç”¨èŒƒå›´ singletonï¼šå•ä¾‹æ¨¡å¼ï¼Œé»˜è®¤çš„ä½œç”¨åŸŸã€‚ prototypeï¼šå¤šä¾‹æ¨¡å¼ã€‚ requestï¼šåº”ç”¨åœ¨Webé¡¹ç›®ä¸­ï¼ŒSpringåˆ›å»ºè¿™ä¸ªç±»åï¼Œå°†è¿™ä¸ªç±»å­˜å…¥åˆ°requestèŒƒå›´ä¸­ã€‚ sessionï¼šåº”ç”¨åœ¨Webé¡¹ç›®ä¸­ï¼ŒSpringåˆ›å»ºè¿™ä¸ªç±»åï¼Œå°†è¿™ä¸ªç±»å­˜å…¥åˆ°sessionèŒƒå›´ä¸­ã€‚ globalsessionï¼šåº”ç”¨åœ¨Webé¡¹ç›®ä¸­ï¼Œå¿…é¡»åœ¨porletç¯å¢ƒä¸‹ä½¿ç”¨ã€‚ä½†æ˜¯å¦‚æœæ²¡æœ‰è¿™ç§ç¯å¢ƒï¼Œç›¸å½“äºsessionã€‚ Springçš„Beanç®¡ç†é…ç½®Springçš„Beançš„å®ä¾‹åŒ–æ–¹å¼æ— å‚æ„é€ æ–¹å¼ï¼ˆé»˜è®¤ï¼‰123456789101112131415161718192021222324252627282930313233343536/** * //TODO * * @author Chen Rui * @version 1.0 **/public class Dog &#123; private String name; private Integer length; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; public Integer getLength() &#123; return length; &#125; public void setLength(Integer length) &#123; this.length = length; &#125; @Override public String toString() &#123; return &quot;Dog&#123;&quot; + &quot;name=&#x27;&quot; + name + &#x27;\\&#x27;&#x27; + &quot;, length=&quot; + length + &#x27;&#125;&#x27;; &#125;&#125; 1234567891011&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt; &lt;!-- Spring Beançš„å®ä¾‹åŒ–æ–¹å¼--&gt; &lt;!-- æ— å‚æ„é€ çš„æ–¹å¼ --&gt; &lt;bean id=&quot;dog&quot; class=&quot;learningspring.ioc.examples.demo3.Dog&quot;/&gt;&lt;/beans&gt; é™æ€å·¥å‚å®ä¾‹åŒ–æ–¹å¼12345678910111213141516171819202122232425/** * * @author Chen Rui * @version 1.0 **/public class Car &#123; private String name; private Double price; public Car() &#123; &#125; public Car(String name, Double price) &#123; this.name = name; this.price = price; &#125; @Override public String toString() &#123; return &quot;Car&#123;&quot; + &quot;name=&#x27;&quot; + name + &#x27;\\&#x27;&#x27; + &quot;, price=&quot; + price + &#x27;&#125;&#x27;; &#125;&#125; 12345678910111213package learningspring.ioc.examples.demo3;/** * * @author Chen Rui * @version 1.0 **/public class CarFactory &#123; public static Car createCar()&#123; return new Car(); &#125;&#125; 12345678910&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt; &lt;!-- Spring Beançš„å®ä¾‹åŒ–æ–¹å¼--&gt; &lt;!-- é™æ€å·¥å‚çš„æ–¹å¼ --&gt; &lt;bean id=&quot;car&quot; class=&quot;learningspring.ioc.examples.demo3.CarFactory&quot; factory-method=&quot;createCar&quot;/&gt;&lt;/beans&gt; å®ä¾‹å·¥å‚å®ä¾‹åŒ–æ–¹å¼123456789101112131415161718192021222324252627282930313233343536/** * //TODO * * @author Chen Rui * @version 1.0 **/public class Dog &#123; private String name; private Integer length; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; public Integer getLength() &#123; return length; &#125; public void setLength(Integer length) &#123; this.length = length; &#125; @Override public String toString() &#123; return &quot;Dog&#123;&quot; + &quot;name=&#x27;&quot; + name + &#x27;\\&#x27;&#x27; + &quot;, length=&quot; + length + &#x27;&#125;&#x27;; &#125;&#125; 123456789101112/** * //TODO * * @author Chen Rui * @version 1.0 **/public class DogFactory &#123; public Dog createDog()&#123; return new Dog(); &#125;&#125; 1234567891011&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt; &lt;!-- Spring Beançš„å®ä¾‹åŒ–æ–¹å¼--&gt; &lt;!-- å®ä¾‹å·¥å‚çš„æ–¹å¼ --&gt; &lt;bean id=&quot;dogFactory&quot; class=&quot;learningspring.ioc.examples.demo3.DogFactory&quot;/&gt; &lt;bean id=&quot;dog2&quot; factory-bean=&quot;dogFactory&quot; factory-method=&quot;createDog&quot;/&gt;&lt;/beans&gt; Springçš„å±æ€§æ³¨å…¥æ–¹å¼æ„é€ æ–¹æ³•æ–¹å¼çš„å±æ€§æ³¨å…¥12345678910&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt; &lt;!--æ„é€ æ–¹æ³•æ–¹å¼çš„å±æ€§æ³¨å…¥--&gt; &lt;bean id=&quot;car&quot; class=&quot;learningspring.ioc.examples.demo3.Car&quot;&gt; &lt;constructor-arg name=&quot;name&quot; value=&quot;BWM&quot;/&gt; &lt;constructor-arg name=&quot;price&quot; value=&quot;800000&quot;/&gt; &lt;/bean&gt;&lt;/beans&gt; Setæ–¹æ³•æ–¹å¼çš„å±æ€§æ³¨å…¥1234567891011&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt; &lt;!--Setæ–¹æ³•æ–¹å¼çš„å±æ€§æ³¨å…¥--&gt; &lt;bean id=&quot;dog&quot; class=&quot;learningspring.ioc.examples.demo3.Dog&quot;&gt; &lt;property name=&quot;name&quot; value=&quot;Golden&quot;/&gt; &lt;property name=&quot;length&quot; value=&quot;100&quot;/&gt; &lt;/bean&gt;&lt;/beans&gt; ä¸ºBeanæ³¨å…¥å¼•ç”¨ç±»å‹çš„æ•°æ®123456789101112131415161718192021222324&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt; &lt;!--æ„é€ æ–¹æ³•æ–¹å¼çš„å±æ€§æ³¨å…¥--&gt; &lt;bean id=&quot;car&quot; class=&quot;learningspring.ioc.examples.demo3.Car&quot;&gt; &lt;constructor-arg name=&quot;name&quot; value=&quot;BWM&quot;/&gt; &lt;constructor-arg name=&quot;price&quot; value=&quot;800000&quot;/&gt; &lt;/bean&gt; &lt;!--Setæ–¹æ³•æ–¹å¼çš„å±æ€§æ³¨å…¥--&gt; &lt;bean id=&quot;dog&quot; class=&quot;learningspring.ioc.examples.demo3.Dog&quot;&gt; &lt;property name=&quot;name&quot; value=&quot;Golden&quot;/&gt; &lt;property name=&quot;length&quot; value=&quot;100&quot;/&gt; &lt;/bean&gt; &lt;!--ä¸ºBeanæ³¨å…¥å¯¹è±¡å±æ€§--&gt; &lt;!--æ„é€ æ–¹æ³•æ–¹å¼ä¸€æ ·å¯è¡Œ--&gt; &lt;bean id=&quot;employee&quot; class=&quot;learningspring.ioc.examples.demo3.Employee&quot;&gt; &lt;property name=&quot;name&quot; value=&quot;Chen&quot;/&gt; &lt;property name=&quot;car&quot; ref=&quot;car&quot;/&gt; &lt;property name=&quot;dog&quot; ref=&quot;dog&quot;/&gt; &lt;/bean&gt;&lt;/beans&gt; Påç§°ç©ºé—´çš„å±æ€§æ³¨å…¥ï¼ˆSpring2.5ï¼‰ é€šè¿‡å¼•å…¥påç§°ç©ºé—´å®Œæˆå±æ€§æ³¨å…¥ æ™®é€šå±æ€§ï¼šp:å±æ€§å&#x3D;â€œå€¼â€ å¯¹è±¡å±æ€§ï¼šp:å±æ€§å-ref&#x3D;â€œå€¼â€ 12345678910111213141516&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:p=&quot;http://www.springframework.org/schema/p&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt; &lt;!--Påç§°ç©ºé—´çš„å±æ€§æ³¨å…¥--&gt; &lt;bean id=&quot;cat&quot; class=&quot;learningspring.ioc.examples.demo3.Cat&quot; p:name=&quot;Orange&quot; p:length=&quot;100&quot;/&gt; &lt;!--ä¸ºBeanæ³¨å…¥å¯¹è±¡å±æ€§--&gt; &lt;bean id=&quot;employee&quot; class=&quot;learningspring.ioc.examples.demo3.Employee&quot; p:cat-ref=&quot;cat&quot;&gt; &lt;property name=&quot;name&quot; value=&quot;Chen&quot;/&gt; &lt;property name=&quot;car&quot; ref=&quot;car&quot;/&gt; &lt;property name=&quot;dog&quot; ref=&quot;dog&quot;/&gt; &lt;/bean&gt;&lt;/beans&gt; SpELæ–¹å¼çš„å±æ€§æ³¨å…¥ï¼ˆSpring3ï¼‰SpELï¼šSpring Expresssion Language çš„è¡¨è¾¾å¼è¯­è¨€ è¯­æ³•ï¼š#{è¡¨è¾¾å¼} 1234567891011121314&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:p=&quot;http://www.springframework.org/schema/p&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt; &lt;!--SpELè¡¨è¾¾å¼æ³¨å…¥--&gt; &lt;bean id=&quot;cat2&quot; class=&quot;learningspring.ioc.examples.demo4.Cat&quot;&gt; &lt;!--å­—ç¬¦ä¸²è¦åŠ å•å¼•å·--&gt; &lt;!--ä¹Ÿå¯ä»¥é€šè¿‡#&#123;beanName.å±æ€§åæˆ–æ–¹æ³•å&#125;æ¥é€šè¿‡å…¶ä»–beançš„å±æ€§æˆ–è€…æ–¹æ³•æ¥æ³¨å…¥--&gt; &lt;property name=&quot;name&quot; value=&quot;#&#123;&#x27;Orange&#x27;&#125;&quot;/&gt; &lt;property name=&quot;length&quot; value=&quot;#&#123;101&#125;&quot;/&gt; &lt;/bean&gt;&lt;/beans&gt; æ³¨å…¥é›†åˆç±»å‹çš„æ•°æ®12345678910111213141516171819202122232425262728293031323334353637383940/** * æ³¨å…¥é›†åˆç±»å‹çš„æ•°æ®æµ‹è¯• * * @author Chen Rui * @version 1.0 **/public class CollectionBean &#123; private String[] strs; private List&lt;String&gt; list; private Set&lt;String&gt; set; private Map&lt;String, String&gt; map; public void setStrs(String[] strs) &#123; this.strs = strs; &#125; public void setList(List&lt;String&gt; list) &#123; this.list = list; &#125; public void setSet(Set&lt;String&gt; set) &#123; this.set = set; &#125; public void setMap(Map&lt;String, String&gt; map) &#123; this.map = map; &#125; @Override public String toString() &#123; return &quot;CollectionBean&#123;&quot; + &quot;strs=&quot; + Arrays.toString(strs) + &quot;, list=&quot; + list + &quot;, set=&quot; + set + &quot;, map=&quot; + map + &#x27;&#125;&#x27;; &#125;&#125; 123456789101112131415161718192021222324252627282930313233343536373839404142&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt; &lt;!--Springçš„é›†åˆå±æ€§çš„æ³¨å…¥--&gt; &lt;!--æ³¨å…¥æ•°ç»„ç±»å‹--&gt; &lt;bean id=&quot;collectionBean&quot; class=&quot;learningspring.ioc.examples.demo4.CollectionBean&quot;&gt; &lt;!-- æ³¨å…¥æ•°ç»„ç±»å‹ --&gt; &lt;property name=&quot;strs&quot;&gt; &lt;list&gt; &lt;value&gt;Tom&lt;/value&gt; &lt;value&gt;Jack&lt;/value&gt; &lt;/list&gt; &lt;/property&gt; &lt;!-- æ³¨å…¥Listé›†åˆ --&gt; &lt;property name=&quot;list&quot;&gt; &lt;list&gt; &lt;value&gt;Lucy&lt;/value&gt; &lt;value&gt;Lily&lt;/value&gt; &lt;/list&gt; &lt;/property&gt; &lt;!-- æ³¨å…¥Seté›†åˆ --&gt; &lt;property name=&quot;set&quot;&gt; &lt;set&gt; &lt;value&gt;aaa&lt;/value&gt; &lt;value&gt;bbb&lt;/value&gt; &lt;value&gt;ccc&lt;/value&gt; &lt;/set&gt; &lt;/property&gt; &lt;!-- æ³¨å…¥Mapé›†åˆ --&gt; &lt;property name=&quot;map&quot;&gt; &lt;map&gt; &lt;entry key=&quot;a&quot; value=&quot;1&quot;/&gt; &lt;entry key=&quot;b&quot; value=&quot;2&quot;/&gt; &lt;/map&gt; &lt;/property&gt; &lt;/bean&gt;&lt;/beans&gt; Springåˆ†æ¨¡å—å¼€å‘çš„é…ç½® åŠ è½½é…ç½®æ–‡ä»¶æ—¶ï¼Œç›´æ¥åŠ è½½å¤šä¸ªé…ç½®æ–‡ä»¶ 1ApplicationContext ctx = new ClassPathXmlApplicationContext(&quot;applicationContext1.xml&quot;, &quot;applicationContext2.xml&quot;); åœ¨ä¸€ä¸ªé…ç½®æ–‡ä»¶ä¸­å¼•å…¥å¤šä¸ªé…ç½®æ–‡ä»¶ 123456789&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt; &lt;!--å¼•å…¥é…ç½®æ–‡ä»¶--&gt; &lt;import resource=&quot;applicationContext2.xml&quot;/&gt; &lt;/beans&gt; Springå¼€å‘ä¸­çš„å¸¸ç”¨æ³¨è§£@Componentè¯¥æ³¨è§£åœ¨ç±»ä¸Šä½¿ç”¨ï¼Œä½¿ç”¨è¯¥æ³¨è§£å°±ç›¸å½“äºåœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®äº†ä¸€ä¸ªBeanï¼Œä¾‹å¦‚ï¼š 1234567@Component(&quot;userDao&quot;)public class UserDaoImpl implements UserDao &#123; @Override public void save() &#123; System.out.println(&quot;UserDaoImpl.save&quot;); &#125;&#125; ç›¸å½“äºä»¥ä¸‹å†…å®¹ï¼š 1&lt;bean id=&quot;userDao&quot; class=&quot;learningspring.ioc.examplesannotation.demo1.UserDaoImpl&quot;&gt;&lt;/bean&gt; è¯¥æ³¨è§£æœ‰3ä¸ªè¡ç”Ÿæ³¨è§£ï¼š @Controllerï¼šä¿®é¥°Web å±‚ç±» @Serviceï¼šä¿®é¥°Serviceå±‚ç±» @Repositoryï¼šä¿®é¥°Daoå±‚ç±» @Valueè¯¥æ³¨è§£ç”¨äºç»™å±æ€§æ³¨å…¥å€¼ï¼Œæœ‰2ç§ç”¨æ³• å¦‚æœæœ‰setæ–¹æ³•ï¼Œåˆ™éœ€è¦å°†è¯¥æ³¨è§£æ·»åŠ åˆ°setæ–¹æ³•ä¸Š å¦‚æœæ²¡æœ‰setæ–¹æ³•ï¼Œåˆ™éœ€è¦å°†è¯¥æ³¨è§£æ·»åŠ åˆ°å±æ€§ä¸Š 123456789101112131415161718192021222324252627282930313233343536373839404142/** * Value æ³¨è§£ç”¨äºå±æ€§æ³¨å…¥ * å½“ç±»æœ‰æä¾›setæ–¹æ³•æ—¶æ·»åŠ åœ¨setæ–¹æ³•ä¸Š * å¦‚æœæ²¡æœ‰ï¼Œåˆ™æ·»åŠ åˆ°å±æ€§ä¸Š * * @author Chen Rui * @version 1.0 **/@Component(&quot;dog&quot;)public class Dog &#123; private String name; @Value(&quot;100&quot;) // æ³¨å…¥å±æ€§å€¼ private Double length; public Dog() &#123; &#125; public Dog(String name, Double length) &#123; this.name = name; this.length = length; &#125; public String getName() &#123; return name; &#125; @Value(&quot;Golden&quot;) // æ³¨å…¥å±æ€§å€¼ public void setName(String name) &#123; this.name = name; &#125; @Override public String toString() &#123; return &quot;Dog&#123;&quot; + &quot;name=&#x27;&quot; + name + &#x27;\\&#x27;&#x27; + &quot;, length=&quot; + length + &#x27;&#125;&#x27;; &#125;&#125; @Autowired@Value é€šå¸¸ç”¨äºæ™®é€šå±æ€§çš„æ³¨å…¥ã€‚ @Autowired é€šå¸¸ç”¨äºä¸ºå¯¹è±¡ç±»å‹çš„å±æ€§æ³¨å…¥å€¼ï¼Œä½†æ˜¯æŒ‰ç…§ç±»å‹å®Œæˆå±æ€§æ³¨å…¥ ä¹ æƒ¯æ˜¯æŒ‰ç…§åç§°å®Œæˆå±æ€§æ³¨å…¥ï¼Œæ‰€ä»¥å¿…é¡»è®©@Autowiredæ³¨è§£å’Œ@Qualifieræ³¨è§£ä¸€åŒä½¿ç”¨ã€‚ ï¼ˆå¦‚æœæ²¡æœ‰@Qualifieræ³¨è§£ï¼Œä¿®æ”¹ä»¥ä¸‹ä¾‹å­ä¸­@Repositoryæ³¨è§£çš„å€¼ï¼Œä¹Ÿèƒ½ç¼–è¯‘æˆåŠŸï¼‰ 12345678910111213@Service(&quot;userService&quot;)public class UserServiceImpl implements UserService &#123; @Autowired @Qualifier(&quot;userDao&quot;) private UserDao userDao; @Override public void save() &#123; System.out.println(&quot;UserServiceImpl.save&quot;); userDao.save(); &#125;&#125; 1234567@Repository(&quot;userDao&quot;)public class UserDaoImpl implements UserDao &#123; @Override public void save() &#123; System.out.println(&quot;UserDaoImpl.save&quot;); &#125;&#125; @Resourceè¯¥æ³¨è§£ä¹Ÿå¯ä»¥ç”¨äºå±æ€§æ³¨å…¥ï¼Œé€šå¸¸æƒ…å†µä¸‹ä½¿ç”¨**@Resourceæ³¨è§£ï¼Œé»˜è®¤æŒ‰ç…§åç§°**å®Œæˆå±æ€§æ³¨å…¥ã€‚ è¯¥æ³¨è§£ç”±J2EEæä¾›ï¼Œéœ€è¦å¯¼å…¥åŒ…javax.annotation.Resourceã€‚ @Resourceæœ‰ä¸¤ä¸ªé‡è¦çš„å±æ€§ï¼šnameå’Œtypeï¼Œè€ŒSpringå°†@Resourceæ³¨è§£çš„nameå±æ€§è§£æä¸ºbeançš„åå­—ï¼Œè€Œtypeå±æ€§åˆ™è§£æä¸ºbeançš„ç±»å‹ã€‚æ‰€ä»¥ï¼Œå¦‚æœä½¿ç”¨nameå±æ€§ï¼Œåˆ™ä½¿ç”¨byNameçš„è‡ªåŠ¨æ³¨å…¥ç­–ç•¥ï¼Œè€Œä½¿ç”¨typeå±æ€§æ—¶åˆ™ä½¿ç”¨byTypeè‡ªåŠ¨æ³¨å…¥ç­–ç•¥ã€‚å¦‚æœæ—¢ä¸åˆ¶å®šnameä¹Ÿä¸åˆ¶å®štypeå±æ€§ï¼Œè¿™æ—¶å°†é€šè¿‡åå°„æœºåˆ¶ä½¿ç”¨byNameè‡ªåŠ¨æ³¨å…¥ç­–ç•¥ã€‚ 12345678910111213/** * UserController * * @author Chen Rui * @version 1.0 **/@Controller(&quot;userController&quot;)public class UserController &#123; @Resource(name = &quot;userService&quot;) private UserService userService; &#125; 1234567891011121314151617181920/** * UserServiceå®ç°ç±» * * @author Chen Rui * @version 1.0 **/@Service(&quot;userService&quot;)public class UserServiceImpl implements UserService &#123; @Resource(name = &quot;userDao&quot;) private UserDao userDao; @Override public void save() &#123; System.out.println(&quot;UserServiceImpl.save&quot;); userDao.save(); &#125;&#125; 1234567891011121314/** * UserDaoå®ç°ç±» * @author Chen Rui * @version 1.0 **/@Component(&quot;userDao&quot;)public class UserDaoImpl implements UserDao &#123; @Override public void save() &#123; System.out.println(&quot;UserDaoImpl.save&quot;); &#125;&#125; @PostConstruct å’Œ @PreDestroy@PostConstructå’Œ@PreDestroyæ³¨è§£ï¼Œå‰è€…ä¸ºBeanç”Ÿå‘½å‘¨æœŸç›¸å…³çš„æ³¨è§£ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨åˆ°äº†init-methodå‚æ•°æ¥é…ç½®Beanåˆå§‹åŒ–ä¹‹å‰è¦æ‰§è¡Œçš„æ–¹æ³•ï¼Œè¯¥æ³¨è§£ä¹Ÿæ˜¯åŒæ ·çš„ä½œç”¨ã€‚å°†è¯¥æ³¨è§£æ·»åŠ åˆ°æƒ³åœ¨åˆå§‹åŒ–ä¹‹å‰æ‰§è¡Œçš„ç›®æ ‡æ–¹æ³•ä¸Šï¼Œå°±å¯ä»¥å®ç°è¯¥åŠŸèƒ½ï¼Œè€Œåè€…åˆ™æ˜¯Beanç”Ÿå‘½å‘¨æœŸä¸­destroy-methodç›®æ ‡æ–¹æ³•ï¼Œä½¿ç”¨è¯¥æ³¨è§£åœ¨æŒ‡å®šæ–¹æ³•ä¸Šï¼Œå³å¯å®ç°åœ¨Beané”€æ¯ä¹‹å‰æ‰§è¡Œè¯¥æ–¹æ³•ã€‚ 123456789101112131415161718192021222324/** * UserDaoå®ç°ç±» * @author Chen Rui * @version 1.0 **/@Component(&quot;userDao&quot;)public class UserDaoImpl implements UserDao &#123; @PostConstruct public void init()&#123; System.out.println(&quot;UserDaoImpl.init&quot;); &#125; @Override public void save() &#123; System.out.println(&quot;UserDaoImpl.save&quot;); &#125; @PreDestroy public void destroy()&#123; System.out.println(&quot;UserDaoImpl.destroy&quot;); &#125;&#125; @ScopeBeançš„ä½œç”¨èŒƒå›´çš„æ³¨è§£ï¼Œé»˜è®¤ä¸ºsingletonï¼ˆå•ä¾‹ï¼‰ å¯é€‰å€¼ï¼š singleton prototype request session globalsession 12345678910111213141516171819202122232425/** * UserDaoå®ç°ç±» * @author Chen Rui * @version 1.0 **/@Component(&quot;userDao&quot;)@Scope // é»˜è®¤ä¸ºsingletonpublic class UserDaoImpl implements UserDao &#123; @PostConstruct public void init()&#123; System.out.println(&quot;UserDaoImpl.init&quot;); &#125; @Override public void save() &#123; System.out.println(&quot;UserDaoImpl.save&quot;); &#125; @PreDestroy public void destroy()&#123; System.out.println(&quot;UserDaoImpl.destroy&quot;); &#125;&#125; åŸºäºXMLé…ç½®å’ŒåŸºäºæ³¨è§£é…ç½®çš„å¯¹æ¯” åŸºäºXMLçš„é…ç½® åŸºäºæ³¨è§£çš„é…ç½® Beançš„å®šä¹‰ &lt;bean id&#x3D;â€Beançš„idâ€ class&#x3D;â€ç±»çš„å…¨è·¯å¾„â€&#x2F;&gt; @Componentæˆ–è¡ç”Ÿæ³¨è§£@Controllerï¼Œ@Serviceå’Œ@Repository Beançš„åç§° é€šè¿‡idæˆ–nameæŒ‡å®š @Component(â€œBeançš„idâ€) Beançš„å±æ€§æ³¨å…¥ &lt;property&gt;æˆ–è€…é€šè¿‡på‘½åç©ºé—´ é€šè¿‡æ³¨è§£@Autowired æŒ‰ç±»å‹æ³¨å…¥é€šè¿‡@QualifieræŒ‰åç§°æ³¨å…¥ Beançš„ç”Ÿå‘½å‘¨æœŸ init-methodæŒ‡å®šBeanåˆå§‹åŒ–å‰æ‰§è¡Œçš„æ–¹æ³•ï¼Œdestroy-methodæŒ‡å®šBeané”€æ¯å‰æ‰§è¡Œçš„æ–¹æ³• @PostConstruct å¯¹åº”äºint-method@PreDestroy å¯¹åº”äºdestroy-method Beançš„ä½œç”¨åŸŸ åœ¨beanæ ‡ç­¾ä¸­é…ç½®scopeå±æ€§ @Scope, é»˜è®¤æ˜¯singletoné…ç½®å¤šä¾‹å¯ä»¥åœ¨ç›®æ ‡ç±»ä¸Šä½¿ç”¨@Scope(â€œprototypeâ€) ä½¿ç”¨åœºæ™¯ Beanæ¥è‡ªç¬¬ä¸‰æ–¹ï¼Œå¯ä»¥ä½¿ç”¨åœ¨ä»»ä½•åœºæ™¯ Beançš„å®ç°ç±»ç”±è‡ªå·±ç»´æŠ¤ XMLå¯ä»¥é€‚ç”¨äºä»»ä½•åœºæ™¯ï¼Œå°±ç®—Beanæ¥è‡ªç¬¬ä¸‰æ–¹ä¹Ÿå¯ä»¥é€‚ç”¨XMLæ–¹å¼æ¥ç®¡ç†ã€‚è€Œæ³¨è§£æ–¹å¼å°±æ— æ³•åœ¨æ­¤åœºæ™¯ä¸‹ä½¿ç”¨ï¼Œæ³¨è§£æ–¹å¼å¯ä»¥è®©å¼€å‘çš„è¿‡ç¨‹æ›´åŠ æ–¹ä¾¿ï¼Œä½†å‰ææ˜¯Beanç”±è‡ªå·±ç»´æŠ¤ï¼Œè¿™æ ·æ‰èƒ½åœ¨æºç ä¸­æ·»åŠ æ³¨è§£ã€‚ æ‰€ä»¥å¯ä»¥ä½¿ç”¨ä¸¤è€…æ··åˆçš„æ–¹å¼æ¥å¼€å‘é¡¹ç›®ï¼Œä½¿ç”¨XMLé…ç½®æ–‡ä»¶æ¥ç®¡ç†Beanï¼Œä½¿ç”¨æ³¨è§£æ¥è¿›è¡Œå±æ€§æ³¨å…¥ Spring AOPAOPçš„æ¦‚è¿°å³é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œé€šè¿‡é¢„ç¼–è¯‘æ–¹å¼å’Œè¿è¡ŒæœŸåŠ¨æ€ä»£ç†å®ç°ç¨‹åºåŠŸèƒ½çš„ç»Ÿä¸€ç»´æŠ¤çš„ä¸€ç§æŠ€æœ¯ã€‚åˆ©ç”¨AOPå¯ä»¥å¯¹ä¸šåŠ¡é€»è¾‘çš„å„ä¸ªéƒ¨åˆ†è¿›è¡Œéš”ç¦»ï¼Œä»è€Œä½¿å¾—ä¸šåŠ¡é€»è¾‘å„éƒ¨åˆ†ä¹‹é—´çš„è€¦åˆåº¦é™ä½ï¼Œæé«˜ç¨‹åºçš„å¯é‡ç”¨æ€§ï¼ŒåŒæ—¶æé«˜äº†å¼€å‘çš„æ•ˆç‡ã€‚ AOPçš„æ¡ˆä¾‹ï¼ˆåº”ç”¨åœºæ™¯ï¼‰èƒŒæ™¯ï¼šæŸé¡¹ç›®å·²ç»å†™å¥½äº†ä¿å­˜åˆ°æ•°æ®åº“çš„æ–¹æ³•ã€‚å‡è®¾ç°åœ¨éœ€è¦æ·»åŠ ä¸€ä¸ªæ–°çš„åŠŸèƒ½ï¼Œä¾‹å¦‚æƒé™æ ¡éªŒï¼Œåœ¨ä¿å­˜åˆ°æ•°æ®åº“ä¹‹å‰è¦å¯¹ç”¨æˆ·æƒé™è¿›è¡Œæ ¡éªŒã€‚ 123456public class UserDaoImpl implements UserDao &#123; @Override public void save()&#123; ... &#125;&#125; ç°åœ¨éœ€è¦å¤šåŠ ä¸€ä¸ªéœ€æ±‚ï¼Œåœ¨ç”¨æˆ·å°†æ•°æ®ä¿å­˜åˆ°æ•°æ®åº“ä¹‹å‰ï¼Œè¿›è¡Œæƒé™æ ¡éªŒã€‚ æ­¤æ—¶é€šå¸¸å°±ä¼šåœ¨è¯¥æ–¹æ³•ä¸­æ·»åŠ ä¸€ä¸ªæ–¹æ³•æ¥è¿›è¡Œæƒé™æ ¡éªŒç„¶ååœ¨saveæ–¹æ³•ä¸­è°ƒç”¨ã€‚ 1234567891011public class UserDaoImpl implements UserDao &#123; @Override public void save()&#123; checkPri(); // ä¿å­˜åˆ°æ•°æ®åº“ &#125; private void checkPri()&#123; // æƒé™æ ¡éªŒ &#125;&#125; ç”¨è¿™æ ·çš„æ–¹æ³•æ¥å®ç°ï¼Œå¼Šç«¯å°±æ˜¯åªèƒ½åœ¨è¿™ä¸€ä¸ªç±»ä¸­ä½¿ç”¨ï¼Œé€šå¸¸ä¸€ä¸ªé¡¹ç›®ä¸­æœ‰è®¸å¤šçš„æ–¹æ³•éƒ½å¯èƒ½éœ€è¦æ‰§è¡Œæƒé™æ ¡éªŒï¼Œæ­¤æ—¶å°±è¦åœ¨æ¯ä¸ªç±»ä¸­ç¼–å†™åŒæ ·çš„ä»£ç ï¼Œæ‰€ä»¥è¯¥æ–¹æ³•å¹¶ä¸ç§‘å­¦ã€‚ æ­¤æ—¶å°±æœ‰äº†ä¸€ä¸ªæ›´å¥½çš„æ–¹æ³•ï¼Œå³çºµå‘ç»§æ‰¿ã€‚ å®šä¹‰ä¸€ä¸ªé€šç”¨çš„Daoï¼Œåœ¨é€šç”¨çš„Daoä¸­ç¼–å†™æƒé™æ ¡éªŒçš„æ–¹æ³•ã€‚ 12345public class BaseDao&#123; public void checkPri()&#123; // æƒé™æ ¡éªŒ &#125;&#125; ç„¶åæ¯ä¸€ä¸ªä¸åŒçš„ç±»éƒ½å»ç»§æ‰¿è¿™ä¸ªç±»ï¼Œå†è°ƒç”¨è¯¥æ–¹æ³• 1234567public class UserDaoImpl extends BaseDao implements UserDao&#123; @Override public void save()&#123; checkPri(); // ä¿å­˜åˆ°æ•°æ®åº“ &#125;&#125; æ­¤æ—¶å°±åªéœ€è¦ç»´æŠ¤BaseDaoä¸­çš„ä¸€ä»½ä»£ç å°±å¯ä»¥ï¼Œå¤§å¤§å‡è½»äº†å·¥ä½œé‡ï¼Œæé«˜äº†æ•ˆç‡ã€‚ ä½†AOPçš„æ€æƒ³æ›´é«˜ä¸€æ­¥ï¼Œä¸é‡‡ç”¨çºµå‘ç»§æ‰¿ï¼Œè€Œé‡‡ç”¨æ¨ªå‘æŠ½å–æ¥å–ä»£ 123456public class UserDaoImpl implements UserDao&#123; @Override public void save()&#123; // ä¿å­˜åˆ°æ•°æ®åº“ &#125;&#125; æ¨ªå‘æŠ½å–æœºåˆ¶å®è´¨ä¸Šå°±æ˜¯ä»£ç†æœºåˆ¶ï¼Œé€šè¿‡åˆ›å»ºUserDaoImplç±»çš„ä»£ç†ç±»ï¼Œé€šè¿‡ä»£ç†ç±»æ¥è°ƒç”¨æƒé™æ ¡éªŒçš„æ–¹æ³•ã€‚ AOPåº•å±‚å®ç°åŸç†AOPçš„å®ç°ä½¿ç”¨äº†åŠ¨æ€ä»£ç†æŠ€æœ¯ï¼ŒåŠ¨æ€ä»£ç†åˆ†ä¸ºä¸¤ç§ JDKåŠ¨æ€ä»£ç†ï¼šåªèƒ½å¯¹å®ç°äº†æ¥å£çš„ç±»äº§ç”Ÿä»£ç† CglibåŠ¨æ€ä»£ç†ï¼ˆç±»ä¼¼äºjavassistçš„ç¬¬ä¸‰æ–¹ä»£ç†æŠ€æœ¯ï¼‰ï¼šå¯¹æ²¡æœ‰å®ç°æ¥å£çš„ç±»äº§ç”Ÿä»£ç†å¯¹è±¡ï¼Œå³ç”Ÿæˆå­ç±»å¯¹è±¡ã€‚ JDKåŠ¨æ€ä»£ç†JDKåŠ¨æ€ä»£ç†æ¡ˆä¾‹è¯¥æ¡ˆä¾‹å®ç°ä¸€ä¸ªè®¡ç®—å™¨çš„æ—¥å¿—åŠŸèƒ½ é¦–å…ˆåˆ›å»ºä¸€ä¸ªæ¥å£Calculator 12345678910111213141516171819202122232425262728293031323334353637383940/** * è®¡ç®—å™¨æ¥å£ * * @author Chen Rui * @version 1.0 **/public interface Calculator &#123; /** * åŠ æ³• * @param a å®æ•° * @param b å®æ•° * @return ç›¸åŠ ç»“æœ */ int add(int a, int b); /** * å‡æ³• * @param a å®æ•°,è¢«å‡æ•° * @param b å®æ•°,å‡æ•° * @return ç›¸å‡ç»“æœ */ int sub(int a, int b); /** * ä¹˜æ³• * @param a å®æ•° * @param b å®æ•° * @return ç›¸ä¹˜ç»“æœ */ int mul(int a, int b); /** * é™¤æ³• * @param a å®æ•°,è¢«é™¤æ•° * @param b å®æ•°,é™¤æ•° * @return ç›¸é™¤ç»“æœ */ int div(int a, int b);&#125; æ¥ç€åˆ›å»ºä¸€ä¸ªç±»CalculatorImplæ¥å®ç°è¯¥æ¥å£å¹¶é‡å†™æ–¹æ³• 123456789101112131415161718192021222324252627282930313233/** * è®¡ç®—å™¨å®ç°ç±» * * @author Chen Rui * @version 1.0 **/public class CalculatorImpl implements Calculator &#123; @Override public int add(int a, int b) &#123; return a + b; &#125; @Override public int sub(int a, int b) &#123; return a - b; &#125; @Override public int mul(int a, int b) &#123; return a * b; &#125; @Override public int div(int a, int b) &#123; if (b == 0)&#123; System.out.println(&quot;é™¤æ•°ä¸èƒ½ä¸º0&quot;); return 0; &#125; return a / b; &#125;&#125; åœ¨æµ‹è¯•ç±»ä¸­æµ‹è¯•è¯¥è®¡ç®—å™¨ä»£ç  1234567891011121314151617181920/** * @author Chen Rui * @version 1.0 **/public class AppTest &#123; @Test public void test() &#123; Calculator target = new CalculatorImpl(); int a = 10; int b = 10; System.out.println(&quot;res --&gt; &quot; + target.add(a, b)); System.out.println(&quot;res --&gt; &quot; + target.mul(a, b)); System.out.println(&quot;res --&gt; &quot; + target.sub(a, b)); System.out.println(&quot;res --&gt; &quot; + target.div(a, b)); &#125;&#125; æ­¤æ—¶æ§åˆ¶å°çš„è¾“å‡ºç»“æœä¸ºï¼š 1234res --&gt; 20res --&gt; 100res --&gt; 0res --&gt; 1 ç°åœ¨ä¸ºè¯¥è®¡ç®—å™¨å¢åŠ æ‰“å°æ—¥å¿—çš„åŠŸèƒ½ åˆ›å»ºä¸€ä¸ªè®¡ç®—å™¨çš„ä»£ç†ç±»CalculatorLoggingProxyï¼Œåœ¨ç±»ä¸­é¦–å…ˆå®šä¹‰è¢«ä»£ç†çš„ç›®æ ‡å¯¹è±¡targetï¼Œå¹¶é€šè¿‡æ„é€ å‡½æ•°è¿›è¡Œèµ‹å€¼ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859import java.lang.reflect.InvocationHandler;import java.lang.reflect.Method;import java.lang.reflect.Proxy;import java.util.Arrays;import java.util.Date;/** * è®¡ç®—å™¨ä»£ç†ç±» * å®ç°æ‰©å±•æ‰“å°æ—¥å¿—åŠŸèƒ½ * * @author Chen Rui * @version 1.0 **/public class CalculatorProxy &#123; /** * è¢«ä»£ç†çš„å¯¹è±¡ */ private Calculator target; public CalculatorProxy(Calculator target) &#123; this.target = target; &#125; public Calculator createProxy()&#123; Calculator proxy; ClassLoader classLoader = target.getClass().getClassLoader(); Class[] interfaces = new Class[]&#123;Calculator.class&#125;; InvocationHandler handler = new InvocationHandler() &#123; /** * @param proxy æ­£åœ¨è¿”å›çš„ä»£ç†å¯¹è±¡ï¼Œä¸€èˆ¬åœ¨invokeæ–¹æ³•ä¸­éƒ½ä¸ä½¿ç”¨è¯¥å¯¹è±¡ * å¦‚æœä½¿ç”¨è¯¥å¯¹è±¡ï¼Œåˆ™ä¼šå¼•å‘æ ˆå†…å­˜æº¢å‡ºã€‚å› ä¸ºä¼šå¾ªç¯è°ƒç”¨invokeæ–¹æ³•ã€‚ * @param method æ­£åœ¨è¢«è°ƒç”¨çš„æ–¹æ³• * @param args è°ƒç”¨æ–¹å¼æ—¶ä¼ å…¥çš„å‚æ•° * @return * @throws Throwable */ @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123; // è·å–æ–¹æ³•å String methodName = method.getName(); // è¾“å‡ºæ—¥å¿—é€»è¾‘ System.out.println(new Date() + &quot;: The method &quot; + methodName + &quot; begins with &quot; + Arrays.asList(args)); // æ‰§è¡Œæ–¹æ³• Object result = method.invoke(target, args); // è¾“å‡ºæ—¥å¿—é€»è¾‘ System.out.println(new Date() + &quot;: The method &quot; + methodName + &quot; ends with &quot; + result); return result; &#125; &#125;; proxy = (Calculator) Proxy.newProxyInstance(classLoader,interfaces,handler); return proxy; &#125;&#125; æ­¤æ—¶é‡æ–°ç¼–å†™æµ‹è¯•æ–¹æ³• 12345678910111213141516171819202122/** * @author Chen Rui * @version 1.0 **/public class AppTest &#123; @Test public void test() &#123; Calculator target = new CalculatorImpl(); // åˆ›å»ºä»£ç†å¯¹è±¡ Calculator proxy = new CalculatorProxy(target).createProxy(); int a = 10; int b = 10; System.out.println(&quot;res --&gt; &quot; + proxy.add(a, b)); System.out.println(&quot;res --&gt; &quot; + proxy.mul(a, b)); System.out.println(&quot;res --&gt; &quot; + proxy.sub(a, b)); System.out.println(&quot;res --&gt; &quot; + proxy.div(a, b)); &#125;&#125; åˆ°æ­¤å°±å®Œæˆäº†åœ¨ä¸æ”¹å˜CalculatorImplç±»çš„æºä»£ç çš„æƒ…å†µä¸‹ï¼Œå®ç°å¯¹è®¡ç®—å™¨çš„åŠŸèƒ½å¢åŠ ï¼Œå®ç°äº†æ—¥å¿—æ‰“å°çš„åŠŸèƒ½ã€‚æ­¤æ—¶æ§åˆ¶å°çš„æ‰“å°å†…å®¹ä¸º 123456789101112Sun Mar 17 20:36:26 CST 2019: The method add begins with [10, 10]Sun Mar 17 20:36:26 CST 2019: The method add ends with 20res --&gt; 20Sun Mar 17 20:36:26 CST 2019: The method mul begins with [10, 10]Sun Mar 17 20:36:26 CST 2019: The method mul ends with 100res --&gt; 100Sun Mar 17 20:36:26 CST 2019: The method sub begins with [10, 10]Sun Mar 17 20:36:26 CST 2019: The method sub ends with 0res --&gt; 0Sun Mar 17 20:36:26 CST 2019: The method div begins with [10, 10]Sun Mar 17 20:36:26 CST 2019: The method div ends with 1res --&gt; 1 CglibåŠ¨æ€ä»£ç†CglibåŠ¨æ€ä»£ç†æ¡ˆä¾‹åŒæ ·æ¥å®ç°ä¸€ä¸ªå¯¹è®¡ç®—å™¨æ¥å¢åŠ æ‰“å°æ—¥å¿—åŠŸèƒ½ é¦–å…ˆåˆ›å»ºè®¡ç®—å™¨ç±»Calculator 1234567891011121314151617181920212223242526272829/** * è®¡ç®—å™¨ç±» * * @author Chen Rui * @version 1.0 **/public class Calculator &#123; public int add(int a, int b) &#123; return a + b; &#125; public int sub(int a, int b) &#123; return a - b; &#125; public int mul(int a, int b) &#123; return a * b; &#125; public int div(int a, int b) &#123; if (b == 0)&#123; System.out.println(&quot;é™¤æ•°ä¸èƒ½ä¸º0&quot;); return 0; &#125; return a / b; &#125;&#125; æ­¤æ—¶éœ€è¦å¯¼å…¥cglibçš„jaråŒ…ï¼Œåœ¨mavenä¸­æ·»åŠ ä¾èµ– 12345&lt;dependency&gt; &lt;groupId&gt;cglib&lt;/groupId&gt; &lt;artifactId&gt;cglib&lt;/artifactId&gt; &lt;version&gt;2.2.2&lt;/version&gt;&lt;/dependency&gt; æ¥ç€åˆ›å»ºè®¡ç®—å™¨çš„ä»£ç†ç±»CalculatorProxyå¹¶ä¸”å®ç°MethodInterceptoræ¥å£å¹¶é‡å†™interceptæ–¹æ³•ã€‚ åœ¨ç±»ä¸­é¦–å…ˆå®šä¹‰è¢«ä»£ç†çš„ç›®æ ‡å¯¹è±¡ï¼Œå¹¶é€šè¿‡æ„é€ å‡½æ•°è¿›è¡Œèµ‹å€¼ã€‚ç„¶ååˆ›å»ºcreateProxy()æ–¹æ³•è¿”å›è¢«å¢å¼ºçš„è®¡ç®—å™¨å¯¹è±¡ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748/** * è®¡ç®—å™¨ä»£ç†ç±» * * @author Chen Rui * @version 1.0 **/public class CalculatorProxy implements MethodInterceptor &#123; /** * è¢«ä»£ç†çš„å¯¹è±¡ */ private Calculator target; public CalculatorProxy(Calculator target) &#123; this.target = target; &#125; public Calculator createProxy()&#123; // 1.åˆ›å»ºcglibçš„æ ¸å¿ƒç±»å¯¹è±¡ Enhancer enhancer = new Enhancer(); // 2.è®¾ç½®çˆ¶ç±» enhancer.setSuperclass(target.getClass()); // 3.è®¾ç½®å›è°ƒï¼ˆç±»ä¼¼äºjdkåŠ¨æ€ä»£ç†ä¸­çš„InvocationHandlerå¯¹è±¡ï¼‰ enhancer.setCallback(this); // 4.åˆ›å»ºä»£ç†å¯¹è±¡ Calculator proxy = (Calculator) enhancer.create(); return proxy; &#125; @Override public Object intercept(Object proxy, Method method, Object[] args, MethodProxy methodProxy) throws Throwable &#123; // è·å–æ–¹æ³•å String methodName = method.getName(); // è¾“å‡ºæ—¥å¿—é€»è¾‘ System.out.println(new Date() + &quot;: The method &quot; + methodName + &quot; begins with &quot; + Arrays.asList(args)); // æ‰§è¡Œæ–¹æ³• Object result = methodProxy.invokeSuper(proxy, args); // è¾“å‡ºæ—¥å¿—é€»è¾‘ System.out.println(new Date() + &quot;: The method &quot; + methodName + &quot; ends with &quot; + result); return result; &#125;&#125; Springä¸­çš„AOPå®ç°â€”â€”AspectJAOPå¼€å‘ä¸­çš„ç›¸å…³æœ¯è¯­123456789public class UserDao&#123; public void save()&#123;&#125; public void query()&#123;&#125; public void update()&#123;&#125; public void delete()&#123;&#125;&#125; joinpoint(è¿æ¥ç‚¹) ï¼š å¯ä»¥è¢«æ‹¦æˆªåˆ°çš„ç‚¹ã€‚save(), query(),update(),delete()æ–¹æ³•éƒ½å¯ä»¥å¢å¼ºï¼Œè¿™äº›æ–¹æ³•å°±å¯ä»¥ç§°ä¸ºè¿æ¥ç‚¹ã€‚ pointcut(åˆ‡å…¥ç‚¹)ï¼šçœŸæ­£è¢«æ‹¦æˆªåˆ°çš„ç‚¹ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¯ä»¥åªå¯¹save()æ–¹æ³•è¿›è¡Œå¢å¼ºï¼Œé‚£ä¹ˆsave()æ–¹æ³•å°±æ˜¯åˆ‡å…¥ç‚¹ã€‚ advice(å¢å¼º)ï¼šæ–¹æ³•å±‚é¢çš„å¢å¼ºï¼Œç°åœ¨å¯ä»¥å¯¹save()æ–¹æ³•è¿›è¡Œæƒé™æ ¡éªŒï¼Œæƒé™æ ¡éªŒ(checkPri())çš„æ–¹æ³•ç§°ä¸ºå¢å¼ºã€‚ introduction(å¼•ä»‹)ï¼šç±»å±‚é¢çš„å¢å¼ºã€‚ target(ç›®æ ‡)ï¼šè¢«å¢å¼ºçš„å¯¹è±¡ã€‚ weaving(ç»‡å…¥)ï¼šå°†å¢å¼º(advice)åº”ç”¨åˆ°ç›®æ ‡(target)çš„è¿‡ç¨‹ proxy(ä»£ç†)ï¼šä»£ç†å¯¹è±¡ï¼Œè¢«å¢å¼ºä»¥åçš„ä»£ç†å¯¹è±¡ aspect(åˆ‡é¢)ï¼šå¤šä¸ªå¢å¼º(advice)å’Œå¤šä¸ªåˆ‡å…¥ç‚¹(pointcut)çš„ç»„åˆ AspectJçš„XMLé…ç½®æ¡ˆä¾‹é¦–å…ˆåˆ›å»ºä¸€ä¸ªæ¥å£ProductDaoï¼Œåœ¨é‡Œé¢å®šä¹‰æ·»åŠ å•†å“ï¼ŒæŸ¥è¯¢å•†å“ï¼Œä¿®æ”¹å•†å“ï¼Œåˆ é™¤å•†å“æ–¹æ³•ã€‚ 1234567891011121314151617181920212223242526272829/** * ProductDao * * @author Chen Rui * @version 1.0 **/public interface ProductDao &#123; /** * æ·»åŠ å•†å“ */ void save(); /** * åˆ é™¤å•†å“ */ void delete(); /** * ä¿®æ”¹å•†å“ */ void modify(); /** * æŸ¥è¯¢å•†å“ */ void query();&#125; æ¥ç€åˆ›å»ºä¸€ä¸ªç±»ProductDaoImplæ¥å®ç°è¯¥æ¥å£ 123456789101112131415161718192021222324252627282930/** * ProductDaoçš„å®ç°ç±» * * @author Chen Rui * @version 1.0 **/public class ProductDaoImpl implements ProductDao &#123; @Override public void save() &#123; System.out.println(&quot;æ·»åŠ å•†å“&quot;); &#125; @Override public void delete() &#123; System.out.println(&quot;åˆ é™¤å•†å“&quot;); &#125; @Override public void modify() &#123; System.out.println(&quot;ä¿®æ”¹å•†å“&quot;); &#125; @Override public void query() &#123; System.out.println(&quot;æŸ¥è¯¢å•†å“&quot;); &#125; &#125; ç°åœ¨ç›®çš„å°±æ˜¯ç»™save()æ–¹æ³•è¿›è¡Œå¢å¼ºï¼Œä½¿å¾—åœ¨è°ƒç”¨save()æ–¹æ³•å‰è¿›è¡Œæƒé™æ ¡éªŒã€‚ è¦å®ç°æ­¤åŠŸèƒ½ï¼Œå…ˆåˆ›å»ºä¸€ä¸ªå¢å¼ºç±»ï¼Œæˆ–è€…å«åˆ‡é¢ç±»ã€‚é‡Œé¢ç¼–å†™è¦å¢å¼ºçš„åŠŸèƒ½ï¼Œä¾‹å¦‚æƒé™æ ¡éªŒã€‚ åˆ›å»ºå¢å¼ºç±»ProductEnhancer 1234567891011121314/** * ProductDaoçš„å¢å¼ºç±»(åˆ‡é¢ç±») * * @author Chen Rui * @version 1.0 **/public class ProductEnhancer &#123; public void checkPri()&#123; System.out.println(&quot;ã€å‰ç½®å¢å¼ºã€‘æƒé™æ ¡éªŒ&quot;); &#125;&#125; ç„¶ååˆ›å»ºé…ç½®æ–‡ä»¶aspectj-xml.xmlæ¥é…ç½®ï¼Œè¯¥æ–‡ä»¶åæ­¤æ¡ˆä¾‹ä»…ç”¨äºæ¼”ç¤ºï¼Œå®é™…å¼€å‘ä¸­ä¸è¦é‡‡å–æ­¤åï¼Œä¾æ®å®é™…éœ€æ±‚ç¼–å†™ã€‚ 12345678910111213141516171819202122232425262728293031323334&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt; &lt;!-- é…ç½®ç›®æ ‡å¯¹è±¡ï¼Œå³è¢«å¢å¼ºçš„å¯¹è±¡ --&gt; &lt;bean id=&quot;productDao&quot; class=&quot;learningspring.aop.aspectj.xml.demo2.ProductDaoImpl&quot;/&gt; &lt;!-- å°†å¢å¼ºç±»(åˆ‡é¢ç±»)äº¤ç»™Springç®¡ç† --&gt; &lt;bean id=&quot;productEnhancer&quot; class=&quot;learningspring.aop.aspectj.xml.demo2.ProductEnhancer&quot;/&gt; &lt;!-- é€šè¿‡å¯¹AOPçš„é…ç½®å®Œæˆå¯¹ç›®æ ‡å¯¹è±¡äº§ç”Ÿä»£ç† --&gt; &lt;aop:config&gt; &lt;!-- è¡¨è¾¾å¼é…ç½®å“ªäº›ç±»çš„å“ªäº›æ–¹æ³•éœ€è¦è¿›è¡Œå¢å¼º --&gt; &lt;!-- å¯¹ProductDaoImplç±»ä¸­çš„saveæ–¹æ³•è¿›è¡Œå¢å¼º --&gt; &lt;!-- â€œ*â€ è¡¨ç¤ºä»»æ„è¿”å›å€¼ç±»å‹ â€œ..â€ è¡¨ç¤ºä»»æ„å‚æ•° --&gt; &lt;aop:pointcut id=&quot;pointcut1&quot; expression=&quot;execution(* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.save(..))&quot;/&gt; &lt;!-- é…ç½®åˆ‡é¢ --&gt; &lt;aop:aspect ref=&quot;productEnhancer&quot;&gt; &lt;!-- å‰ç½®å¢å¼º --&gt; &lt;!-- å®ç°åœ¨è°ƒç”¨saveæ–¹æ³•ä¹‹å‰è°ƒç”¨checkPriæ–¹æ³•æ¥è¿›è¡Œæƒé™æ ¡éªŒ--&gt; &lt;aop:before method=&quot;checkPri&quot; pointcut-ref=&quot;pointcut1&quot;/&gt; &lt;/aop:aspect&gt; &lt;/aop:config&gt; &lt;/beans&gt; è‡³æ­¤åˆ‡å…¥ç‚¹åŠåˆ‡é¢éƒ½å·²é…ç½®å®Œæˆï¼Œç¼–å†™æµ‹è¯•ç±»å’Œæ–¹æ³• 12345678910111213141516171819202122232425262728293031323334import org.junit.Test;import org.junit.runner.RunWith;import org.springframework.test.context.ContextConfiguration;import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;import javax.annotation.Resource;/** * AspectJçš„XMLæ–¹å¼é…ç½®æµ‹è¯•ç±» * * @author Chen Rui * @version 1.0 **/@RunWith(SpringJUnit4ClassRunner.class)@ContextConfiguration(&quot;classpath:aspectj-xml.xml&quot;)public class AppTest &#123; @Resource(name = &quot;productDao&quot;) private ProductDao productDao; @Test public void test()&#123; // å¯¹saveæ–¹æ³•è¿›è¡Œå¢å¼º productDao.save(); productDao.delete(); productDao.modify(); productDao.query(); &#125;&#125; è¿è¡Œtest()æ–¹æ³•ï¼Œæ§åˆ¶å°æ‰“å°ç»“æœå¦‚ä¸‹ï¼š 12345ã€å‰ç½®å¢å¼ºã€‘æƒé™æ ¡éªŒæ·»åŠ å•†å“åˆ é™¤å•†å“ä¿®æ”¹å•†å“æŸ¥è¯¢å•†å“ è‡³æ­¤å°±å®ç°äº†åœ¨ä¸ä¿®æ”¹ProductDaoImplç±»çš„æƒ…å†µä¸‹ï¼Œå¯¹å…¶ä¸­çš„save()æ–¹æ³•è¿›è¡Œå¢å¼ºã€‚ Springä¸­å¸¸ç”¨çš„å¢å¼ºç±»å‹å‰ç½®å¢å¼ºåœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å‰æ‰§è¡Œï¼Œå¯ä»¥è·å¾—åˆ‡å…¥ç‚¹çš„ä¿¡æ¯ ä¿®æ”¹ä¹‹å‰çš„ProductEnhancerç±»çš„checkPri()æ–¹æ³•çš„å‚æ•°ã€‚ 123456789101112131415import org.aspectj.lang.JoinPoint;/** * ProductDaoçš„å¢å¼ºç±»(åˆ‡é¢ç±») * * @author Chen Rui * @version 1.0 **/public class ProductEnhancer &#123; public void checkPri(JoinPoint joinPoint)&#123; System.out.println(&quot;ã€å‰ç½®å¢å¼ºã€‘æƒé™æ ¡éªŒ&quot; + joinPoint); &#125;&#125; æ‰§è¡Œæµ‹è¯•æ–¹æ³•ï¼Œæ§åˆ¶å°è¾“å‡º 12345ã€å‰ç½®å¢å¼ºã€‘æƒé™æ ¡éªŒexecution(void learningspring.aop.aspectj.xml.demo2.ProductDao.save())æ·»åŠ å•†å“åˆ é™¤å•†å“ä¿®æ”¹å•†å“æŸ¥è¯¢å•†å“ åç½®å¢å¼ºåœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹åæ‰§è¡Œï¼Œå¯ä»¥è·å¾—æ–¹æ³•çš„è¿”å›å€¼ é¦–å…ˆä¿®æ”¹ProductDaoä¸­çš„delete()æ–¹æ³•çš„è¿”å›å€¼ç±»å‹ï¼Œæ”¹æˆString 1234567891011121314151617181920212223242526272829/** * ProductDao * * @author Chen Rui * @version 1.0 **/public interface ProductDao &#123; /** * æ·»åŠ å•†å“ */ void save(); /** * åˆ é™¤å•†å“ */ String delete(); /** * ä¿®æ”¹å•†å“ */ void modify(); /** * æŸ¥è¯¢å•†å“ */ void query();&#125; å†ä¿®æ”¹ProductDaoImplä¸­çš„delete()æ–¹æ³• 123456789101112131415161718192021222324252627282930/** * ProductDaoçš„å®ç°ç±» * * @author Chen Rui * @version 1.0 **/public class ProductDaoImpl implements ProductDao &#123; @Override public void save() &#123; System.out.println(&quot;æ·»åŠ å•†å“&quot;); &#125; @Override public String delete() &#123; System.out.println(&quot;åˆ é™¤å•†å“&quot;); return new Date().toString(); &#125; @Override public void modify() &#123; System.out.println(&quot;ä¿®æ”¹å•†å“&quot;); &#125; @Override public void query() &#123; System.out.println(&quot;æŸ¥è¯¢å•†å“&quot;); &#125;&#125; ä¿®æ”¹ProductEnhancerç±»ï¼Œæ·»åŠ writeLog()æ–¹æ³•ï¼Œå®ç°å†™æ—¥å¿—åŠŸèƒ½ 1234567891011121314151617181920212223242526/** * ProductDaoçš„å¢å¼ºç±»(åˆ‡é¢ç±») * * @author Chen Rui * @version 1.0 **/public class ProductEnhancer &#123; /** * å‰ç½®å¢å¼ºæ¡ˆä¾‹ * åœ¨è°ƒç”¨saveæ–¹æ³•ä¹‹å‰è¿›è¡Œæƒé™æ ¡éªŒ * @param joinPoint åˆ‡å…¥ç‚¹å¯¹è±¡ */ public void checkPri(JoinPoint joinPoint)&#123; System.out.println(&quot;ã€å‰ç½®å¢å¼ºã€‘æƒé™æ ¡éªŒ&quot; + joinPoint); &#125; /** * åç½®å¢å¼ºæ¡ˆä¾‹ * åœ¨è°ƒç”¨deleteæ–¹æ³•ä¹‹åï¼Œå†™å…¥æ—¥å¿—è®°å½•æ“ä½œæ—¶é—´ * @param result ç›®æ ‡æ–¹æ³•è¿”å›çš„å¯¹è±¡ */ public void writeLog(Object result)&#123; System.out.println(&quot;ã€åç½®å¢å¼ºã€‘å†™å…¥æ—¥å¿— æ“ä½œæ—¶é—´ï¼š&quot; + result.toString()); &#125;&#125; ç„¶åä¿®æ”¹aspectj.xmlé…ç½®æ–‡ä»¶ï¼Œé…ç½®æ–°çš„åˆ‡å…¥ç‚¹å’Œåˆ‡é¢ 123456789101112131415161718192021222324252627282930313233343536373839404142&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt; &lt;!-- é…ç½®ç›®æ ‡å¯¹è±¡ï¼Œå³è¢«å¢å¼ºçš„å¯¹è±¡ --&gt; &lt;bean id=&quot;productDao&quot; class=&quot;learningspring.aop.aspectj.xml.demo2.ProductDaoImpl&quot;/&gt; &lt;!-- å°†å¢å¼ºç±»(åˆ‡é¢ç±»)äº¤ç»™Springç®¡ç† --&gt; &lt;bean id=&quot;productEnhancer&quot; class=&quot;learningspring.aop.aspectj.xml.demo2.ProductEnhancer&quot;/&gt; &lt;!-- é€šè¿‡å¯¹AOPçš„é…ç½®å®Œæˆå¯¹ç›®æ ‡å¯¹è±¡äº§ç”Ÿä»£ç† --&gt; &lt;aop:config&gt; &lt;!-- è¡¨è¾¾å¼é…ç½®å“ªäº›ç±»çš„å“ªäº›æ–¹æ³•éœ€è¦è¿›è¡Œå¢å¼º --&gt; &lt;!-- å¯¹ProductDaoImplç±»ä¸­çš„saveæ–¹æ³•è¿›è¡Œå¢å¼º --&gt; &lt;!-- â€œ*â€ è¡¨ç¤ºä»»æ„è¿”å›å€¼ç±»å‹ â€œ..â€ è¡¨ç¤ºä»»æ„å‚æ•° --&gt; &lt;!-- å‰ç½®å¢å¼ºçš„åˆ‡å…¥ç‚¹é…ç½® --&gt; &lt;aop:pointcut id=&quot;pointcut1&quot; expression=&quot;execution(* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.save(..))&quot;/&gt; &lt;!-- åç½®å¢å¼ºçš„åˆ‡å…¥ç‚¹é…ç½® --&gt; &lt;aop:pointcut id=&quot;pointcut2&quot; expression=&quot;execution(* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.delete(..))&quot;/&gt; &lt;!-- é…ç½®åˆ‡é¢ --&gt; &lt;aop:aspect ref=&quot;productEnhancer&quot;&gt; &lt;!-- å‰ç½®å¢å¼º --&gt; &lt;!-- å®ç°åœ¨è°ƒç”¨saveæ–¹æ³•ä¹‹å‰è°ƒç”¨checkPriæ–¹æ³•æ¥è¿›è¡Œæƒé™æ ¡éªŒ--&gt; &lt;aop:before method=&quot;checkPri&quot; pointcut-ref=&quot;pointcut1&quot;/&gt; &lt;!-- åç½®å¢å¼º --&gt; &lt;!-- returningé‡Œé¢çš„å€¼å¿…é¡»å’ŒwriteLog()æ–¹æ³•é‡Œçš„å‚æ•°åç›¸åŒï¼Œæœ¬æ¡ˆä¾‹ä¸ºresult--&gt; &lt;aop:after-returning method=&quot;writeLog&quot; returning=&quot;result&quot; pointcut-ref=&quot;pointcut2&quot;/&gt; &lt;/aop:aspect&gt; &lt;/aop:config&gt;&lt;/beans&gt; æ‰§è¡Œæµ‹è¯•æ–¹æ³•ï¼Œæ§åˆ¶å°æ‰“å°ç»“æœ 123456ã€å‰ç½®å¢å¼ºã€‘æƒé™æ ¡éªŒexecution(void learningspring.aop.aspectj.xml.demo2.ProductDao.save())æ·»åŠ å•†å“åˆ é™¤å•†å“ã€åç½®å¢å¼ºã€‘å†™å…¥æ—¥å¿— æ“ä½œæ—¶é—´ï¼šTue Mar 19 15:59:48 CST 2019ä¿®æ”¹å•†å“æŸ¥è¯¢å•†å“ ç¯ç»•å¢å¼ºåœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å‰å’Œä¹‹åéƒ½æ‰§è¡Œ åˆ©ç”¨ç¯ç»•å¢å¼ºæ¥å®ç°åœ¨è°ƒç”¨modify()æ–¹æ³•å‰åè¿›è¡Œæ€§èƒ½ç›‘æ§ é¦–å…ˆä¿®æ”¹ProductEnhancerç±»ï¼Œæ·»åŠ monitor()æ–¹æ³• 12345678910111213141516171819202122232425262728293031323334353637383940/** * ProductDaoçš„å¢å¼ºç±»(åˆ‡é¢ç±») * * @author Chen Rui * @version 1.0 **/public class ProductEnhancer &#123; /** * å‰ç½®å¢å¼ºæ¡ˆä¾‹ * åœ¨è°ƒç”¨saveæ–¹æ³•ä¹‹å‰è¿›è¡Œæƒé™æ ¡éªŒ * @param joinPoint åˆ‡å…¥ç‚¹å¯¹è±¡ */ public void checkPri(JoinPoint joinPoint)&#123; System.out.println(&quot;ã€å‰ç½®å¢å¼ºã€‘æƒé™æ ¡éªŒ&quot; + joinPoint); &#125; /** * åç½®å¢å¼ºæ¡ˆä¾‹ * åœ¨è°ƒç”¨deleteæ–¹æ³•ä¹‹åï¼Œå†™å…¥æ—¥å¿—è®°å½•æ“ä½œæ—¶é—´ * @param result ç›®æ ‡æ–¹æ³•è¿”å›çš„å¯¹è±¡ */ public void writeLog(Object result)&#123; System.out.println(&quot;ã€åç½®å¢å¼ºã€‘å†™å…¥æ—¥å¿— æ“ä½œæ—¶é—´ï¼š&quot; + result.toString()); &#125; /** * ç¯ç»•å¢å¼º * åœ¨è°ƒç”¨modifyæ–¹æ³•å‰åï¼Œæ˜¾ç¤ºæ€§èƒ½å‚æ•° * @param joinPoint åˆ‡å…¥ç‚¹å¯¹è±¡ * @throws Throwable å¯æŠ›å‡ºçš„å¼‚å¸¸ */ public Object monitor(ProceedingJoinPoint joinPoint) throws Throwable&#123; System.out.println(&quot;ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜&quot; + Runtime.getRuntime().freeMemory()/(1024 * 1024) + &quot;MB&quot;); Object obj = joinPoint.proceed(); System.out.println(&quot;ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜&quot; + Runtime.getRuntime().freeMemory()/(1024 * 1024) + &quot;MB&quot;); return obj; &#125;&#125; ç„¶åå†ä¿®æ”¹aspectj.xmlé…ç½®æ–‡ä»¶ï¼Œæ·»åŠ æ–°çš„åˆ‡å…¥ç‚¹å’Œåˆ‡é¢ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt; &lt;!-- é…ç½®ç›®æ ‡å¯¹è±¡ï¼Œå³è¢«å¢å¼ºçš„å¯¹è±¡ --&gt; &lt;bean id=&quot;productDao&quot; class=&quot;learningspring.aop.aspectj.xml.demo2.ProductDaoImpl&quot;/&gt; &lt;!-- å°†å¢å¼ºç±»(åˆ‡é¢ç±»)äº¤ç»™Springç®¡ç† --&gt; &lt;bean id=&quot;productEnhancer&quot; class=&quot;learningspring.aop.aspectj.xml.demo2.ProductEnhancer&quot;/&gt; &lt;!-- é€šè¿‡å¯¹AOPçš„é…ç½®å®Œæˆå¯¹ç›®æ ‡å¯¹è±¡äº§ç”Ÿä»£ç† --&gt; &lt;aop:config&gt; &lt;!-- è¡¨è¾¾å¼é…ç½®å“ªäº›ç±»çš„å“ªäº›æ–¹æ³•éœ€è¦è¿›è¡Œå¢å¼º --&gt; &lt;!-- å¯¹ProductDaoImplç±»ä¸­çš„saveæ–¹æ³•è¿›è¡Œå¢å¼º --&gt; &lt;!-- â€œ*â€ è¡¨ç¤ºä»»æ„è¿”å›å€¼ç±»å‹ â€œ..â€ è¡¨ç¤ºä»»æ„å‚æ•° --&gt; &lt;!-- å‰ç½®å¢å¼ºçš„åˆ‡å…¥ç‚¹é…ç½® --&gt; &lt;aop:pointcut id=&quot;pointcut1&quot; expression=&quot;execution(* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.save(..))&quot;/&gt; &lt;!-- åç½®å¢å¼ºçš„åˆ‡å…¥ç‚¹é…ç½® --&gt; &lt;aop:pointcut id=&quot;pointcut2&quot; expression=&quot;execution(* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.delete(..))&quot;/&gt; &lt;!-- ç¯ç»•å¢å¼ºçš„åˆ‡å…¥ç‚¹é…ç½® --&gt; &lt;aop:pointcut id=&quot;pointcut3&quot; expression=&quot;execution(* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.modify(..))&quot;/&gt; &lt;!-- é…ç½®åˆ‡é¢ --&gt; &lt;aop:aspect ref=&quot;productEnhancer&quot;&gt; &lt;!-- å‰ç½®å¢å¼º --&gt; &lt;!-- å®ç°åœ¨è°ƒç”¨saveæ–¹æ³•ä¹‹å‰è°ƒç”¨checkPriæ–¹æ³•æ¥è¿›è¡Œæƒé™æ ¡éªŒ--&gt; &lt;aop:before method=&quot;checkPri&quot; pointcut-ref=&quot;pointcut1&quot;/&gt; &lt;!-- åç½®å¢å¼º --&gt; &lt;!-- returningé‡Œé¢çš„å€¼å¿…é¡»å’ŒwriteLog()æ–¹æ³•é‡Œçš„å‚æ•°åç›¸åŒï¼Œæœ¬æ¡ˆä¾‹ä¸ºresult--&gt; &lt;aop:after-returning method=&quot;writeLog&quot; returning=&quot;result&quot; pointcut-ref=&quot;pointcut2&quot;/&gt; &lt;!-- ç¯ç»•å¢å¼º --&gt; &lt;aop:around method=&quot;monitor&quot; pointcut-ref=&quot;pointcut3&quot;/&gt; &lt;/aop:aspect&gt; &lt;/aop:config&gt;&lt;/beans&gt; è¿è¡Œæµ‹è¯•æ–¹æ³•ï¼Œæ§åˆ¶å°æ‰“å°ç»“æœï¼š 12345678ã€å‰ç½®å¢å¼ºã€‘æƒé™æ ¡éªŒexecution(void learningspring.aop.aspectj.xml.demo2.ProductDao.save())æ·»åŠ å•†å“åˆ é™¤å•†å“ã€åç½®å¢å¼ºã€‘å†™å…¥æ—¥å¿— æ“ä½œæ—¶é—´ï¼šTue Mar 19 15:58:49 CST 2019ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜185MBä¿®æ”¹å•†å“ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜185MBæŸ¥è¯¢å•†å“ å¼‚å¸¸æŠ›å‡ºå¢å¼ºåœ¨ç¨‹åºå‡ºç°å¼‚å¸¸æ—¶æ‰§è¡Œ åˆ©ç”¨å¼‚å¸¸æŠ›å‡ºå¢å¼ºæ¥å®ç°è·å–å¼‚å¸¸ä¿¡æ¯çš„åŠŸèƒ½ é¦–å…ˆä¿®æ”¹ProductDaoImplä¸­çš„query()æ–¹æ³•ï¼Œä½¿è¯¥æ–¹æ³•æŠ›å‡ºå¼‚å¸¸ 123456789101112131415161718192021222324252627282930/** * ProductDaoçš„å®ç°ç±» * * @author Chen Rui * @version 1.0 **/public class ProductDaoImpl implements ProductDao &#123; @Override public void save() &#123; System.out.println(&quot;æ·»åŠ å•†å“&quot;); &#125; @Override public void query() &#123; System.out.println(&quot;æŸ¥è¯¢å•†å“&quot;); int a = 1/0; &#125; @Override public void modify() &#123; System.out.println(&quot;ä¿®æ”¹å•†å“&quot;); &#125; @Override public String delete() &#123; System.out.println(&quot;åˆ é™¤å•†å“&quot;); return new Date().toString(); &#125;&#125; æ¥ç€ä¿®æ”¹ProductEnhancerç±»ï¼Œæ·»åŠ exception()æ–¹æ³• 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849/** * ProductDaoçš„å¢å¼ºç±»(åˆ‡é¢ç±») * * @author Chen Rui * @version 1.0 **/public class ProductEnhancer &#123; /** * å‰ç½®å¢å¼ºæ¡ˆä¾‹ * åœ¨è°ƒç”¨saveæ–¹æ³•ä¹‹å‰è¿›è¡Œæƒé™æ ¡éªŒ * @param joinPoint åˆ‡å…¥ç‚¹å¯¹è±¡ */ public void checkPri(JoinPoint joinPoint)&#123; System.out.println(&quot;ã€å‰ç½®å¢å¼ºã€‘æƒé™æ ¡éªŒ&quot; + joinPoint); &#125; /** * åç½®å¢å¼ºæ¡ˆä¾‹ * åœ¨è°ƒç”¨deleteæ–¹æ³•ä¹‹åï¼Œå†™å…¥æ—¥å¿—è®°å½•æ“ä½œæ—¶é—´ * @param result ç›®æ ‡æ–¹æ³•è¿”å›çš„å¯¹è±¡ */ public void writeLog(Object result)&#123; System.out.println(&quot;ã€åç½®å¢å¼ºã€‘å†™å…¥æ—¥å¿— æ“ä½œæ—¶é—´ï¼š&quot; + result.toString()); &#125; /** * ç¯ç»•å¢å¼º * åœ¨è°ƒç”¨modifyæ–¹æ³•å‰åï¼Œæ˜¾ç¤ºæ€§èƒ½å‚æ•° * @param joinPoint åˆ‡å…¥ç‚¹å¯¹è±¡ * @throws Throwable å¯æŠ›å‡ºçš„å¼‚å¸¸ */ public Object monitor(ProceedingJoinPoint joinPoint) throws Throwable&#123; System.out.println(&quot;ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜&quot; + Runtime.getRuntime().freeMemory()/(1024 * 1024) + &quot;MB&quot;); Object obj = joinPoint.proceed(); System.out.println(&quot;ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜&quot; + Runtime.getRuntime().freeMemory()/(1024 * 1024) + &quot;MB&quot;); return obj; &#125; /** * å¼‚å¸¸æŠ›å‡ºå¢å¼º * åœ¨è°ƒç”¨queryæ—¶è‹¥æŠ›å‡ºå¼‚å¸¸åˆ™æ‰“å°å¼‚å¸¸ä¿¡æ¯ * @param ex å¼‚å¸¸å¯¹è±¡ */ public void exception(Throwable ex)&#123; System.out.println(&quot;ã€å¼‚å¸¸æŠ›å‡ºå¢å¼ºã€‘&quot; + &quot;å¼‚å¸¸ä¿¡æ¯ï¼š&quot; +ex.getMessage()); &#125;&#125; ç„¶åå†ä¿®æ”¹aspectj-xml.xmlé…ç½®æ–‡ä»¶ï¼Œæ·»åŠ æ–°çš„åˆ‡å…¥ç‚¹å’Œåˆ‡é¢ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt; &lt;!-- é…ç½®ç›®æ ‡å¯¹è±¡ï¼Œå³è¢«å¢å¼ºçš„å¯¹è±¡ --&gt; &lt;bean id=&quot;productDao&quot; class=&quot;learningspring.aop.aspectj.xml.demo2.ProductDaoImpl&quot;/&gt; &lt;!-- å°†å¢å¼ºç±»(åˆ‡é¢ç±»)äº¤ç»™Springç®¡ç† --&gt; &lt;bean id=&quot;productEnhancer&quot; class=&quot;learningspring.aop.aspectj.xml.demo2.ProductEnhancer&quot;/&gt; &lt;!-- é€šè¿‡å¯¹AOPçš„é…ç½®å®Œæˆå¯¹ç›®æ ‡å¯¹è±¡äº§ç”Ÿä»£ç† --&gt; &lt;aop:config&gt; &lt;!-- è¡¨è¾¾å¼é…ç½®å“ªäº›ç±»çš„å“ªäº›æ–¹æ³•éœ€è¦è¿›è¡Œå¢å¼º --&gt; &lt;!-- å¯¹ProductDaoImplç±»ä¸­çš„saveæ–¹æ³•è¿›è¡Œå¢å¼º --&gt; &lt;!-- â€œ*â€ è¡¨ç¤ºä»»æ„è¿”å›å€¼ç±»å‹ â€œ..â€ è¡¨ç¤ºä»»æ„å‚æ•° --&gt; &lt;!-- å‰ç½®å¢å¼ºçš„åˆ‡å…¥ç‚¹é…ç½® --&gt; &lt;aop:pointcut id=&quot;pointcut1&quot; expression=&quot;execution(* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.save(..))&quot;/&gt; &lt;!-- åç½®å¢å¼ºçš„åˆ‡å…¥ç‚¹é…ç½® --&gt; &lt;aop:pointcut id=&quot;pointcut2&quot; expression=&quot;execution(* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.delete(..))&quot;/&gt; &lt;!-- ç¯ç»•å¢å¼ºçš„åˆ‡å…¥ç‚¹é…ç½® --&gt; &lt;aop:pointcut id=&quot;pointcut3&quot; expression=&quot;execution(* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.modify(..))&quot;/&gt; &lt;!-- å¼‚å¸¸æŠ›å‡ºå¢å¼ºçš„åˆ‡å…¥ç‚¹é…ç½® --&gt; &lt;aop:pointcut id=&quot;pointcut4&quot; expression=&quot;execution(* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.query(..))&quot;/&gt; &lt;!-- é…ç½®åˆ‡é¢ --&gt; &lt;aop:aspect ref=&quot;productEnhancer&quot;&gt; &lt;!-- å‰ç½®å¢å¼º --&gt; &lt;!-- å®ç°åœ¨è°ƒç”¨saveæ–¹æ³•ä¹‹å‰è°ƒç”¨checkPriæ–¹æ³•æ¥è¿›è¡Œæƒé™æ ¡éªŒ--&gt; &lt;aop:before method=&quot;checkPri&quot; pointcut-ref=&quot;pointcut1&quot;/&gt; &lt;!-- åç½®å¢å¼º --&gt; &lt;!-- returningé‡Œé¢çš„å€¼å¿…é¡»å’ŒwriteLog()æ–¹æ³•é‡Œçš„å‚æ•°åç›¸åŒï¼Œæœ¬æ¡ˆä¾‹ä¸ºresult--&gt; &lt;aop:after-returning method=&quot;writeLog&quot; returning=&quot;result&quot; pointcut-ref=&quot;pointcut2&quot;/&gt; &lt;!-- ç¯ç»•å¢å¼º --&gt; &lt;aop:around method=&quot;monitor&quot; pointcut-ref=&quot;pointcut3&quot;/&gt; &lt;!-- å¼‚å¸¸æŠ›å‡ºå¢å¼º --&gt; &lt;aop:after-throwing method=&quot;exception&quot; throwing=&quot;ex&quot; pointcut-ref=&quot;pointcut4&quot;/&gt; &lt;/aop:aspect&gt; &lt;/aop:config&gt;&lt;/beans&gt; æœ€åæ‰§è¡Œæµ‹è¯•æ–¹æ³•ï¼Œæ§åˆ¶å°è¾“å‡ºç»“æœï¼š 123456789ã€å‰ç½®å¢å¼ºã€‘æƒé™æ ¡éªŒexecution(void learningspring.aop.aspectj.xml.demo2.ProductDao.save())æ·»åŠ å•†å“åˆ é™¤å•†å“ã€åç½®å¢å¼ºã€‘å†™å…¥æ—¥å¿— æ“ä½œæ—¶é—´ï¼šTue Mar 19 15:58:16 CST 2019ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜183MBä¿®æ”¹å•†å“ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜183MBæŸ¥è¯¢å•†å“ã€å¼‚å¸¸æŠ›å‡ºå¢å¼ºã€‘å¼‚å¸¸ä¿¡æ¯ï¼š/ by zero æœ€ç»ˆå¢å¼ºæ— è®ºä»£ç æ˜¯å¦æœ‰å¼‚å¸¸æœ€ç»ˆéƒ½ä¼šæ‰§è¡Œ ç»§ç»­åœ¨å¼‚å¸¸æŠ›å‡ºå¢å¼ºçš„ä»£ç ä¿®æ”¹ï¼Œå®ç°æ— è®ºæ˜¯å¦æŠ›å‡ºå¼‚å¸¸éƒ½ä¼šæ‰“å°å½“å‰æ—¶é—´ä¿¡æ¯ é¦–å…ˆä¿®æ”¹ProductEnhancerç±»ï¼Œæ·»åŠ finallyAdvice()æ–¹æ³• 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657/** * ProductDaoçš„å¢å¼ºç±»(åˆ‡é¢ç±») * * @author Chen Rui * @version 1.0 **/public class ProductEnhancer &#123; /** * å‰ç½®å¢å¼ºæ¡ˆä¾‹ * åœ¨è°ƒç”¨saveæ–¹æ³•ä¹‹å‰è¿›è¡Œæƒé™æ ¡éªŒ * @param joinPoint åˆ‡å…¥ç‚¹å¯¹è±¡ */ public void checkPri(JoinPoint joinPoint)&#123; System.out.println(&quot;ã€å‰ç½®å¢å¼ºã€‘æƒé™æ ¡éªŒ&quot; + joinPoint); &#125; /** * åç½®å¢å¼ºæ¡ˆä¾‹ * åœ¨è°ƒç”¨deleteæ–¹æ³•ä¹‹åï¼Œå†™å…¥æ—¥å¿—è®°å½•æ“ä½œæ—¶é—´ * @param result ç›®æ ‡æ–¹æ³•è¿”å›çš„å¯¹è±¡ */ public void writeLog(Object result)&#123; System.out.println(&quot;ã€åç½®å¢å¼ºã€‘å†™å…¥æ—¥å¿— æ“ä½œæ—¶é—´ï¼š&quot; + result.toString()); &#125; /** * ç¯ç»•å¢å¼º * åœ¨è°ƒç”¨modifyæ–¹æ³•å‰åï¼Œæ˜¾ç¤ºæ€§èƒ½å‚æ•° * @param joinPoint åˆ‡å…¥ç‚¹å¯¹è±¡ * @throws Throwable å¯æŠ›å‡ºçš„å¼‚å¸¸ */ public Object monitor(ProceedingJoinPoint joinPoint) throws Throwable&#123; System.out.println(&quot;ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜&quot; + Runtime.getRuntime().freeMemory()/(1024 * 1024) + &quot;MB&quot;); Object obj = joinPoint.proceed(); System.out.println(&quot;ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜&quot; + Runtime.getRuntime().freeMemory()/(1024 * 1024) + &quot;MB&quot;); return obj; &#125; /** * å¼‚å¸¸æŠ›å‡ºå¢å¼º * åœ¨è°ƒç”¨queryæ—¶è‹¥æŠ›å‡ºå¼‚å¸¸åˆ™æ‰“å°å¼‚å¸¸ä¿¡æ¯ * @param ex å¼‚å¸¸å¯¹è±¡ */ public void exception(Throwable ex)&#123; System.out.println(&quot;ã€å¼‚å¸¸æŠ›å‡ºå¢å¼ºã€‘&quot; + &quot;å¼‚å¸¸ä¿¡æ¯ï¼š&quot; +ex.getMessage()); &#125; /** * æœ€ç»ˆå¢å¼º * æ— è®ºqueryæ–¹æ³•æ˜¯å¦æŠ›å‡ºå¼‚å¸¸éƒ½æ‰“å°å½“å‰æ—¶é—´ */ public void finallyAdvice()&#123; System.out.println(&quot;ã€æœ€ç»ˆå¢å¼ºã€‘&quot; + new Date().toString()); &#125;&#125; ä¿®æ”¹aspectj.xmlé…ç½®æ–‡ä»¶ï¼Œæ·»åŠ æ–°çš„åˆ‡é¢ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt; &lt;!-- é…ç½®ç›®æ ‡å¯¹è±¡ï¼Œå³è¢«å¢å¼ºçš„å¯¹è±¡ --&gt; &lt;bean id=&quot;productDao&quot; class=&quot;learningspring.aop.aspectj.xml.demo2.ProductDaoImpl&quot;/&gt; &lt;!-- å°†å¢å¼ºç±»(åˆ‡é¢ç±»)äº¤ç»™Springç®¡ç† --&gt; &lt;bean id=&quot;productEnhancer&quot; class=&quot;learningspring.aop.aspectj.xml.demo2.ProductEnhancer&quot;/&gt; &lt;!-- é€šè¿‡å¯¹AOPçš„é…ç½®å®Œæˆå¯¹ç›®æ ‡å¯¹è±¡äº§ç”Ÿä»£ç† --&gt; &lt;aop:config&gt; &lt;!-- è¡¨è¾¾å¼é…ç½®å“ªäº›ç±»çš„å“ªäº›æ–¹æ³•éœ€è¦è¿›è¡Œå¢å¼º --&gt; &lt;!-- å¯¹ProductDaoImplç±»ä¸­çš„saveæ–¹æ³•è¿›è¡Œå¢å¼º --&gt; &lt;!-- â€œ*â€ è¡¨ç¤ºä»»æ„è¿”å›å€¼ç±»å‹ â€œ..â€ è¡¨ç¤ºä»»æ„å‚æ•° --&gt; &lt;!-- å‰ç½®å¢å¼ºçš„åˆ‡å…¥ç‚¹é…ç½® --&gt; &lt;aop:pointcut id=&quot;pointcut1&quot; expression=&quot;execution(* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.save(..))&quot;/&gt; &lt;!-- åç½®å¢å¼ºçš„åˆ‡å…¥ç‚¹é…ç½® --&gt; &lt;aop:pointcut id=&quot;pointcut2&quot; expression=&quot;execution(* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.delete(..))&quot;/&gt; &lt;!-- ç¯ç»•å¢å¼ºçš„åˆ‡å…¥ç‚¹é…ç½® --&gt; &lt;aop:pointcut id=&quot;pointcut3&quot; expression=&quot;execution(* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.modify(..))&quot;/&gt; &lt;!-- å¼‚å¸¸æŠ›å‡ºå¢å¼ºçš„åˆ‡å…¥ç‚¹é…ç½® --&gt; &lt;aop:pointcut id=&quot;pointcut4&quot; expression=&quot;execution(* learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.query(..))&quot;/&gt; &lt;!-- é…ç½®åˆ‡é¢ --&gt; &lt;aop:aspect ref=&quot;productEnhancer&quot;&gt; &lt;!-- å‰ç½®å¢å¼º --&gt; &lt;!-- å®ç°åœ¨è°ƒç”¨saveæ–¹æ³•ä¹‹å‰è°ƒç”¨checkPriæ–¹æ³•æ¥è¿›è¡Œæƒé™æ ¡éªŒ--&gt; &lt;aop:before method=&quot;checkPri&quot; pointcut-ref=&quot;pointcut1&quot;/&gt; &lt;!-- åç½®å¢å¼º --&gt; &lt;!-- returningé‡Œé¢çš„å€¼å¿…é¡»å’ŒwriteLog()æ–¹æ³•é‡Œçš„å‚æ•°åç›¸åŒï¼Œæœ¬æ¡ˆä¾‹ä¸ºresult--&gt; &lt;aop:after-returning method=&quot;writeLog&quot; returning=&quot;result&quot; pointcut-ref=&quot;pointcut2&quot;/&gt; &lt;!-- ç¯ç»•å¢å¼º --&gt; &lt;aop:around method=&quot;monitor&quot; pointcut-ref=&quot;pointcut3&quot;/&gt; &lt;!-- å¼‚å¸¸æŠ›å‡ºå¢å¼º --&gt; &lt;aop:after-throwing method=&quot;exception&quot; throwing=&quot;ex&quot; pointcut-ref=&quot;pointcut4&quot;/&gt; &lt;!-- æœ€ç»ˆå¢å¼º --&gt; &lt;aop:after method=&quot;finallyAdvice&quot; pointcut-ref=&quot;pointcut4&quot;/&gt; &lt;/aop:aspect&gt; &lt;/aop:config&gt;&lt;/beans&gt; æœ€åè¿è¡Œæµ‹è¯•ä»£ç ï¼Œæ§åˆ¶å°è¾“å‡ºç»“æœï¼š 12345678910ã€å‰ç½®å¢å¼ºã€‘æƒé™æ ¡éªŒexecution(void learningspring.aop.aspectj.xml.demo2.ProductDao.save())æ·»åŠ å•†å“åˆ é™¤å•†å“ã€åç½®å¢å¼ºã€‘å†™å…¥æ—¥å¿— æ“ä½œæ—¶é—´ï¼šTue Mar 19 15:57:01 CST 2019ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜183MBä¿®æ”¹å•†å“ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜183MBæŸ¥è¯¢å•†å“ã€æœ€ç»ˆå¢å¼ºã€‘Tue Mar 19 15:57:01 CST 2019ã€å¼‚å¸¸æŠ›å‡ºå¢å¼ºã€‘å¼‚å¸¸ä¿¡æ¯ï¼š/ by zero AOPåˆ‡å…¥ç‚¹è¡¨è¾¾å¼è¯­æ³•AOPåˆ‡å…¥ç‚¹è¡¨è¾¾å¼æ˜¯åŸºäºexecutionçš„å‡½æ•°å®Œæˆçš„ è¯­æ³•ï¼š**[è®¿é—®ä¿®é¥°ç¬¦] æ–¹æ³•è¿”å›å€¼ åŒ…å.ç±»å.æ–¹æ³•å(å‚æ•°)** â€œ*â€ è¡¨ç¤ºä»»æ„è¿”å›å€¼ç±»å‹â€œ..â€ è¡¨ç¤ºä»»æ„å‚æ•° public void learningspring.aop.aspectj.xml.demo2.ProductDaoImpl.save(..) ï¼šå…·ä½“åˆ°æŸä¸ªå¢å¼ºçš„æ–¹æ³• * *.*.*.*Dao.save(..) ï¼šæ‰€æœ‰åŒ…ä¸‹çš„æ‰€æœ‰ä»¥Daoç»“å°¾çš„ç±»ä¸­çš„saveæ–¹æ³•éƒ½ä¼šè¢«å¢å¼º * learningspring.aop.aspectj.xml.demo2.ProductDaoImpl+.save(..) ï¼šProductDaoImplåŠå…¶å­ç±»çš„saveæ–¹æ³•éƒ½ä¼šè¢«å¢å¼º * learningspring.aop.aspectj.xml..*.*(..)ï¼šxmlåŒ…åŠå…¶å­åŒ…çš„æ‰€æœ‰ç±»çš„æ–¹æ³•éƒ½ä¼šè¢«å¢å¼º AspectJçš„æ³¨è§£é…ç½®æ¡ˆä¾‹é¦–å…ˆä¹Ÿæ˜¯åˆ›å»ºä¸€ä¸ªæ¥å£ProductDao 12345678910111213141516171819202122232425262728/** * ProductDaoæ¥å£ * * @author Chen Rui * @version 1.0 **/public interface ProductDao &#123; /** * æ·»åŠ å•†å“ */ void save(); /** * æŸ¥è¯¢å•†å“ */ void query(); /** * ä¿®æ”¹å•†å“ */ void modify(); /** * åˆ é™¤å•†å“ */ String delete();&#125; ç„¶ååˆ›å»ºä¸€ä¸ªDaoå®ç°ç±»ProductDaoImpl 123456789101112131415161718192021222324252627282930/** * ProductDaoçš„å®ç°ç±» * * @author Chen Rui * @version 1.0 **/public class ProductDaoImpl implements ProductDao &#123; @Override public void save() &#123; System.out.println(&quot;æ·»åŠ å•†å“&quot;); &#125; @Override public String delete() &#123; System.out.println(&quot;åˆ é™¤å•†å“&quot;); return new Date().toString(); &#125; @Override public void modify() &#123; System.out.println(&quot;ä¿®æ”¹å•†å“&quot;); &#125; @Override public void query() &#123; System.out.println(&quot;æŸ¥è¯¢å•†å“&quot;); int a = 1/0; &#125;&#125; æ¥ç€åˆ›å»ºå¢å¼ºç±»ProductEnhancerï¼Œåœ¨è¯¥ç±»é‡Œé¢ä½¿ç”¨æ³¨è§£ ä½¿ç”¨@Pointcutæ³¨è§£å¯ä»¥é…ç½®åˆ‡å…¥ç‚¹ä¿¡æ¯ï¼Œåœ¨è¾ƒå¤šçš„æ–¹æ³•éƒ½è¦ä½¿ç”¨åŒä¸€ä¸ªå¢å¼ºæ—¶ï¼Œå°±å¯ä»¥é…ç½®ä¸€ä¸ªåˆ‡å…¥ç‚¹è®©ç›®æ ‡æ–¹æ³•éƒ½å»å¼•ç”¨ @Beforeï¼šå‰ç½®å¢å¼º @AfterReturningï¼šåç½®å¢å¼ºï¼Œå…¶ä¸­çš„returningçš„å€¼å¿…é¡»å’Œæ–¹æ³•ä¼ å…¥çš„å‚æ•°åç›¸åŒ @Aroundï¼šç¯ç»•å¢å¼º @AfterThrowingï¼šå¼‚å¸¸æŠ›å‡ºå¢å¼ºï¼Œå…¶ä¸­çš„throwingçš„å€¼å¿…é¡»å’Œæ–¹æ³•ä¼ å…¥çš„å‚æ•°åç›¸åŒ @Afterï¼šæœ€ç»ˆå¢å¼º 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970/** * ProductDaoçš„å¢å¼ºç±»(åˆ‡é¢ç±») * * @author Chen Rui * @version 1.0 **/@Aspectpublic class ProductEnhancer &#123; /** * åˆ‡å…¥ç‚¹é…ç½® * å¯¹ProductDaoImplé‡Œçš„æ–¹æ³•éƒ½å¢å¼º */ @Pointcut(value = &quot;execution(* learningspring.aop.aspectj.annotation.demo2.ProductDaoImpl.*(..))&quot;) private void pointcut1()&#123;&#125; /** * å‰ç½®å¢å¼ºæ¡ˆä¾‹ * åœ¨è°ƒç”¨saveæ–¹æ³•ä¹‹å‰è¿›è¡Œæƒé™æ ¡éªŒ * @param joinPoint åˆ‡å…¥ç‚¹å¯¹è±¡ */ @Before(value = &quot;execution(* learningspring.aop.aspectj.annotation.demo2.ProductDaoImpl.save())&quot;) public void checkPri(JoinPoint joinPoint)&#123; System.out.println(&quot;ã€å‰ç½®å¢å¼ºã€‘æƒé™æ ¡éªŒ&quot; + joinPoint); &#125; /** * åç½®å¢å¼ºæ¡ˆä¾‹ * åœ¨è°ƒç”¨deleteæ–¹æ³•ä¹‹åï¼Œå†™å…¥æ—¥å¿—è®°å½•æ“ä½œæ—¶é—´ * @param result ç›®æ ‡æ–¹æ³•è¿”å›çš„å¯¹è±¡ */ @AfterReturning(returning = &quot;result&quot;, value = &quot;execution(* learningspring.aop.aspectj.annotation.demo2.ProductDaoImpl.delete())&quot;) public void writeLog(Object result)&#123; System.out.println(&quot;ã€åç½®å¢å¼ºã€‘å†™å…¥æ—¥å¿— æ“ä½œæ—¶é—´ï¼š&quot; + result.toString()); &#125; /** * ç¯ç»•å¢å¼º * åœ¨è°ƒç”¨modifyæ–¹æ³•å‰åï¼Œæ˜¾ç¤ºæ€§èƒ½å‚æ•° * @param joinPoint åˆ‡å…¥ç‚¹å¯¹è±¡ * @throws Throwable å¯æŠ›å‡ºçš„å¼‚å¸¸ */ @Around(value = &quot;execution(* learningspring.aop.aspectj.annotation.demo2.ProductDaoImpl.modify())&quot;) public Object monitor(ProceedingJoinPoint joinPoint) throws Throwable&#123; System.out.println(&quot;ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜&quot; + Runtime.getRuntime().freeMemory()/(1024 * 1024) + &quot;MB&quot;); Object obj = joinPoint.proceed(); System.out.println(&quot;ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜&quot; + Runtime.getRuntime().freeMemory()/(1024 * 1024) + &quot;MB&quot;); return obj; &#125; /** * å¼‚å¸¸æŠ›å‡ºå¢å¼º * åœ¨è°ƒç”¨queryæ—¶è‹¥æŠ›å‡ºå¼‚å¸¸åˆ™æ‰“å°å¼‚å¸¸ä¿¡æ¯ * @param ex å¼‚å¸¸å¯¹è±¡ */ @AfterThrowing(throwing = &quot;ex&quot;, value = &quot;execution(* learningspring.aop.aspectj.annotation.demo2.ProductDaoImpl.query())&quot;) public void exception(Throwable ex)&#123; System.out.println(&quot;ã€å¼‚å¸¸æŠ›å‡ºå¢å¼ºã€‘&quot; + &quot;å¼‚å¸¸ä¿¡æ¯ï¼š&quot; +ex.getMessage()); &#125; /** * æœ€ç»ˆå¢å¼º * æ— è®ºProductDaoImplé‡Œçš„æ¯ä¸ªæ–¹æ³•æ˜¯å¦æŠ›å‡ºå¼‚å¸¸éƒ½æ‰“å°å½“å‰æ—¶é—´ */ @After(value = &quot;pointcut1()&quot;) public void finallyAdvice()&#123; System.out.println(&quot;ã€æœ€ç»ˆå¢å¼ºã€‘&quot; + new Date().toString()); &#125;&#125; ç¼–å†™æµ‹è¯•æ–¹æ³• 1234567891011121314151617181920212223242526/** * AspectJçš„æ³¨è§£æ–¹å¼é…ç½®æµ‹è¯•ç±» * * @author Chen Rui * @version 1.0 **/@RunWith(SpringJUnit4ClassRunner.class)@ContextConfiguration(&quot;classpath:aspectj-annotation.xml&quot;)public class AppTest &#123; @Resource(name = &quot;productDao&quot;) private ProductDao productDao; @Test public void test()&#123; productDao.save(); productDao.delete(); productDao.modify(); productDao.query(); &#125;&#125; è¿è¡Œï¼Œæ§åˆ¶å°è¾“å‡º 12345678910111213ã€å‰ç½®å¢å¼ºã€‘æƒé™æ ¡éªŒexecution(void learningspring.aop.aspectj.annotation.demo2.ProductDao.save())æ·»åŠ å•†å“ã€æœ€ç»ˆå¢å¼ºã€‘Tue Mar 19 16:01:06 CST 2019åˆ é™¤å•†å“ã€æœ€ç»ˆå¢å¼ºã€‘Tue Mar 19 16:01:06 CST 2019ã€åç½®å¢å¼ºã€‘å†™å…¥æ—¥å¿— æ“ä½œæ—¶é—´ï¼šTue Mar 19 16:01:06 CST 2019ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜186MBä¿®æ”¹å•†å“ã€ç¯ç»•å¢å¼ºã€‘å½“å‰ç©ºé—²å†…å­˜186MBã€æœ€ç»ˆå¢å¼ºã€‘Tue Mar 19 16:01:06 CST 2019æŸ¥è¯¢å•†å“ã€æœ€ç»ˆå¢å¼ºã€‘Tue Mar 19 16:01:06 CST 2019ã€å¼‚å¸¸æŠ›å‡ºå¢å¼ºã€‘å¼‚å¸¸ä¿¡æ¯ï¼š/ by zero Spring JDBC TemplateSpringæä¾›äº†æä¾›äº†å¤šç§æŒä¹…å±‚æŠ€æœ¯çš„æ¨¡æ¿ç±» ORMæŒä¹…åŒ–æŠ€æœ¯ æ¨¡æ¿ç±» JDBC org.springframework.jdbc.core.JdbcTemplate Hibernate3.0 org.springframework.orm.hibernate3.HibernateTemplate IBatis(Mybatis) org.springframework.orm.ibatis.SqlMapClientTemplate JPA org.springframework.orm.jpa.JpaTemplate JDBC Templateçš„å…¥é—¨é¦–å…ˆå¼•å…¥jaråŒ…ï¼Œåœ¨pom.xmlæ–‡ä»¶ä¸­åŠ å…¥spring-jdbcï¼Œspring-txï¼Œmysql-connector-javaï¼ˆæœ¬æ¡ˆä¾‹ä½¿ç”¨çš„æ˜¯MySQL8ï¼‰ä¸‰ä¸ªä¾èµ–ã€‚ 1234567891011121314151617&lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt; &lt;version&gt;4.3.14.RELEASE&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-tx&lt;/artifactId&gt; &lt;version&gt;4.3.14.RELEASE&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;8.0.15&lt;/version&gt;&lt;/dependency&gt; ç„¶ååˆ›å»ºæ•°æ®åº“è¡¨ï¼Œæœ¬ä¾‹ä½¿ç”¨çš„MySQL8 12345678create table account( id int auto_increment primary key, name varchar(8) not null, money double default 0)comment &#x27;è´¦æˆ·è¡¨&#x27;; åŸºæœ¬ä½¿ç”¨æœ€åŸºæœ¬çš„ä½¿ç”¨ï¼Œä¸ä¾èµ–äºSpring çš„ç®¡ç†ï¼Œæ‰‹åŠ¨åˆ›å»ºå¯¹è±¡ï¼Œé‡‡ç”¨ç¡¬ç¼–ç çš„æ–¹å¼è¿›è¡Œå±æ€§æ³¨å…¥ã€‚ä¸æ¨èä½¿ç”¨è¯¥æ–¹æ³•ã€‚ 1234567891011121314151617181920public class AppTest &#123; /** * ç¡¬ç¼–ç  */ @Test public void test1()&#123; // åˆ›å»ºè¿æ¥æ±  DriverManagerDataSource dataSource = new DriverManagerDataSource(); dataSource.setDriverClassName(&quot;com.mysql.cj.jdbc.Driver&quot;); dataSource.setUrl(&quot;jdbc:mysql://localhost:3306/springjdbc?useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=Asia/Shanghai&amp;useSSL=false &quot;); dataSource.setUsername(&quot;root&quot;); dataSource.setPassword(&quot;123456&quot;); // åˆ›å»ºJDBC Template JdbcTemplate jdbcTemplate = new JdbcTemplate(dataSource); int i = jdbcTemplate.update(&quot;INSERT INTO account VALUES (null ,?,?)&quot;, &quot;Tom&quot;, 20000d); if (i &gt; 0)&#123; System.out.println(&quot;Update Successful&quot;); &#125; &#125;&#125; æ¥ä¸‹æ¥ä½¿ç”¨ç¬¬äºŒç§æ–¹æ³•ï¼ŒæŠŠè¿æ¥æ± å¯¹è±¡å’Œæ¨¡æ¿(Template)éƒ½äº¤ç»™Springæ¥ç®¡ç† åˆ›å»ºspring-jdbc.xmlè¯¥æ–‡ä»¶ç”¨æ¥ç®¡ç†Bean 12345678910111213141516171819&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt; &lt;!-- é…ç½®æ•°æ®åº“è¿æ¥æ±  --&gt; &lt;bean id=&quot;dataSource&quot; class=&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;&gt; &lt;property name=&quot;driverClassName&quot; value=&quot;com.mysql.cj.jdbc.Driver&quot;/&gt; &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/springjdbc?useUnicode=true&amp;amp;characterEncoding=utf-8&amp;amp;serverTimezone=Asia/Shanghai&amp;amp;useSSL=false&quot;/&gt; &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt; &lt;property name=&quot;password&quot; value=&quot;123456&quot;/&gt; &lt;/bean&gt; &lt;!-- é…ç½®Spring JDBC Template --&gt; &lt;bean id=&quot;jdbcTemplate&quot; class=&quot;org.springframework.jdbc.core.JdbcTemplate&quot;&gt; &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt; &lt;/bean&gt;&lt;/beans&gt; åœ¨æµ‹è¯•ç±»ä¸­åŠ å…¥ç›¸åº”çš„æ³¨è§£ï¼Œä»¥åŠé…ç½®æ–‡ä»¶ä¿¡æ¯ï¼Œç¼–å†™æ–°çš„æµ‹è¯•æ–¹æ³• 12345678910111213141516171819202122232425/** * Spring JDBC Templateçš„ä½¿ç”¨ * * @author Chen Rui * @version 1.0 **/@RunWith(SpringJUnit4ClassRunner.class)@ContextConfiguration(&quot;classpath:spring-jdbc.xml&quot;)public class AppTest &#123; /** * Spring é…ç½®æ–‡ä»¶æ–¹å¼ * æŠŠè¿æ¥æ± å’Œæ¨¡æ¿(Template)éƒ½äº¤ç»™springç®¡ç† * æ—¥å¿—ä¿¡æ¯ï¼šLoaded JDBC driver: com.mysql.cj.jdbc.Driver * æ˜¯ä½¿ç”¨çš„é»˜è®¤çš„è¿æ¥æ±  */ @Resource(name = &quot;jdbcTemplate&quot;) private JdbcTemplate jdbcTemplate; @Test public void test2()&#123; int i = jdbcTemplate.update(&quot;INSERT INTO account VALUES (null ,?,?)&quot;, &quot;Jack&quot;, 30000d); if (i &gt; 0)&#123; System.out.println(&quot;Update Successful&quot;); &#125; &#125; é€šè¿‡@Resourceæ³¨è§£ä»IOCå®¹å™¨ä¸­è·å–åˆ°æ¨¡æ¿å¯¹è±¡ï¼Œç„¶åé€šè¿‡è¯¥æ¨¡æ¿å¯¹è±¡æ¥æ“ä½œæ•°æ®åº“ã€‚ è¿™æ ·å°±å®Œæˆäº†Spring JDBC Templateçš„æœ€åŸºæœ¬ä½¿ç”¨ æ•°æ®åº“è¿æ¥æ± åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¯èƒ½å¹¶ä¸ä¼šä½¿ç”¨é»˜è®¤çš„è¿æ¥æ± ï¼Œè€Œæ˜¯å»ä½¿ç”¨ä¸€äº›å¼€æºçš„æ•°æ®åº“è¿æ¥æ± ï¼Œåœ¨è¯¥ä¾‹ä¸­ä»‹ç»ä¸¤ç§æ•°æ®åº“è¿æ¥æ± DBCPå’ŒC3P0 DBCPè¿æ¥æ± çš„é…ç½®é¦–å…ˆåˆ›å»ºè¿æ¥æ•°æ®åº“çš„é…ç½®æ–‡ä»¶db.propertiesï¼Œæ³¨æ„ï¼Œä¸åŒçš„MySQLç‰ˆæœ¬å¯èƒ½urlä¿¡æ¯ä¼šä¸åŒï¼Œæ¯”å¦‚MySQL8å°±éœ€è¦æ·»åŠ serverTimezoneå‚æ•°ã€‚ 1234jdbc.driverClassName=com.mysql.cj.jdbc.Driverjdbc.url=jdbc:mysql://localhost:3306/springjdbc?useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=Asia/Shanghai&amp;useSSL=false jdbc.username=rootjdbc.password=123456 æ¥ç€åˆ›å»ºä¸€ä¸ªæ–°çš„é…ç½®æ–‡ä»¶spring-dbcp.xmlå’Œå‰é¢çš„é…ç½®æ–‡ä»¶åšåŒºåˆ†ã€‚ åˆ©ç”¨context:property-placeholderæ ‡ç­¾å¼•å…¥db.propertiesé…ç½®æ–‡ä»¶ï¼Œé€šè¿‡$&#123;key&#125;çš„æ–¹å¼æ¥è·å–å¯¹åº”çš„valueã€‚ 12345678910111213141516171819202122&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt; &lt;!-- å¼•å…¥æ•°æ®åº“é…ç½®æ–‡ä»¶ --&gt; &lt;context:property-placeholder location=&quot;db.properties&quot;/&gt; &lt;!-- é…ç½®DBCPè¿æ¥æ±  --&gt; &lt;bean id=&quot;dataSource&quot; class=&quot;org.apache.commons.dbcp2.BasicDataSource&quot;&gt; &lt;property name=&quot;driverClassName&quot; value=&quot;$&#123;jdbc.driverClassName&#125;&quot;/&gt; &lt;property name=&quot;url&quot; value=&quot;$&#123;jdbc.url&#125;&quot;/&gt; &lt;property name=&quot;username&quot; value=&quot;$&#123;jdbc.username&#125;&quot;/&gt; &lt;property name=&quot;password&quot; value=&quot;$&#123;jdbc.password&#125;&quot;/&gt; &lt;/bean&gt; &lt;!-- é…ç½®Spring JDBC Template --&gt; &lt;bean id=&quot;jdbcTemplateDBCP&quot; class=&quot;org.springframework.jdbc.core.JdbcTemplate&quot;&gt; &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt; &lt;/bean&gt;&lt;/beans&gt; ç¼–å†™æµ‹è¯•æ–¹æ³• 12345678910111213141516171819202122232425/** * Spring JDBC Templateçš„ä½¿ç”¨ * * @author Chen Rui * @version 1.0 **/@RunWith(SpringJUnit4ClassRunner.class)@ContextConfiguration(&quot;classpath:spring-dbcp.xml&quot;)public class AppTest &#123; //ä½¿ç”¨å¼€æºçš„æ•°æ®åº“è¿æ¥æ± è¿›è¡Œé…ç½® /** * ä½¿ç”¨DBCPè¿æ¥æ±  */ @Resource(name = &quot;jdbcTemplateDBCP&quot;) private JdbcTemplate jdbcTemplateDBCP; @Test public void test3()&#123; int i = jdbcTemplateDBCP.update(&quot;INSERT INTO account VALUES (null ,?,?)&quot;, &quot;Lucy&quot;, 40000d); if (i &gt; 0)&#123; System.out.println(&quot;Update Successful&quot;); &#125; &#125;&#125; C3P0è¿æ¥æ± é…ç½®åŒæ ·æ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„é…ç½®æ–‡ä»¶spring-c3p0.xmlï¼Œä»¥ä½œåŒºåˆ†ï¼ŒåŒæ—¶ä¹Ÿè¦å¼•å…¥æ•°æ®åº“é…ç½®æ–‡ä»¶db.properties è¦æ³¨æ„propertyæ ‡ç­¾çš„nameå±æ€§å’Œå‰é¢çš„é…ç½®æ–‡ä»¶ç¨æœ‰ä¸åŒ 12345678910111213141516171819202122232425&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt; &lt;!-- å¼•å…¥æ•°æ®åº“é…ç½®æ–‡ä»¶ --&gt; &lt;context:property-placeholder location=&quot;db.properties&quot;/&gt; &lt;!-- é…ç½®C3P0è¿æ¥æ±  --&gt; &lt;bean id=&quot;dataSource&quot; class=&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;&gt; &lt;property name=&quot;driverClass&quot; value=&quot;$&#123;jdbc.driverClassName&#125;&quot;/&gt; &lt;property name=&quot;jdbcUrl&quot; value=&quot;$&#123;jdbc.url&#125;&quot;/&gt; &lt;property name=&quot;user&quot; value=&quot;$&#123;jdbc.username&#125;&quot;/&gt; &lt;property name=&quot;password&quot; value=&quot;$&#123;jdbc.password&#125;&quot;/&gt; &lt;/bean&gt; &lt;!-- é…ç½®Spring JDBC Template --&gt; &lt;bean id=&quot;jdbcTemplateC3P0&quot; class=&quot;org.springframework.jdbc.core.JdbcTemplate&quot;&gt; &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt; &lt;/bean&gt;&lt;/beans&gt; ç¼–å†™æµ‹è¯•æ–¹æ³• 1234567891011121314151617181920212223242526/** * Spring JDBC Templateçš„ä½¿ç”¨ * * @author Chen Rui * @version 1.0 **/@RunWith(SpringJUnit4ClassRunner.class)@ContextConfiguration(&quot;classpath:spring-*.xml&quot;)public class AppTest &#123; //ä½¿ç”¨å¼€æºçš„æ•°æ®åº“è¿æ¥æ± è¿›è¡Œé…ç½® /** * ä½¿ç”¨C3P0è¿æ¥æ±  */ @Resource(name = &quot;jdbcTemplateC3P0&quot;) private JdbcTemplate jdbcTemplateC3P0; @Test public void test4()&#123; int i = jdbcTemplateC3P0.update(&quot;INSERT INTO account VALUES (null ,?,?)&quot;, &quot;Lily&quot;, 50000d); if (i &gt; 0)&#123; System.out.println(&quot;Update Successful&quot;); &#125; &#125;&#125; å®ŒæˆåŸºæœ¬çš„CRUDæ“ä½œä»¥ä¸‹å†…å®¹éƒ½æ˜¯ä½¿ç”¨çš„C3P0è¿æ¥æ± ï¼Œå¹¶ä¸”é€šè¿‡@Resourceæ³¨è§£ä»IOCå®¹å™¨ä¸­è·å–äº†jdbcTemplateC3P0å¯¹è±¡ æ’å…¥æ“ä½œ12345678910/** * æ’å…¥æ“ä½œ */@Testpublic void test()&#123; int i = jdbcTemplateC3P0.update(&quot;INSERT INTO account VALUES (null ,?,?)&quot;, &quot;Lily&quot;, 50000d); if (i &gt; 0)&#123; System.out.println(&quot;Update Successful&quot;); &#125;&#125; ä¿®æ”¹æ“ä½œ12345678910/** * ä¿®æ”¹æ“ä½œ */@Testpublic void test()&#123; int i = jdbcTemplateC3P0.update(&quot;UPDATE account SET name = ? WHERE id = ?&quot;, &quot;Bob&quot;, 1); if (i &gt; 0)&#123; System.out.println(&quot;Update Successful&quot;); &#125;&#125; åˆ é™¤æ“ä½œ12345678910/** * åˆ é™¤æ“ä½œ */@Testpublic void test()&#123; int i = jdbcTemplateC3P0.update(&quot;DELETE FROM account WHERE id = ?&quot;, 2); if (i &gt; 0)&#123; System.out.println(&quot;Delete Successful&quot;); &#125;&#125; æŸ¥è¯¢æ“ä½œæŸ¥è¯¢æŸä¸ªå±æ€§123456789101112131415161718192021222324/** * æŸ¥è¯¢æ“ä½œ * * æŸ¥è¯¢å•ä¸ªå­—ç¬¦ä¸²ç»“æœ */@Testpublic void test()&#123; String result = jdbcTemplateC3P0.queryForObject(&quot;SELECT name FROM account WHERE id = ?&quot;, String.class, 1); if (result != null)&#123; System.out.println(result); &#125; else&#123; System.out.println(&quot;NULL&quot;); &#125;&#125;/** * ç»Ÿè®¡æŸ¥è¯¢ * è¿”å›æ•°æ®è¡¨ä¸­çš„è®°å½•æ•° */@Testpublic void test()&#123; Long result = jdbcTemplateC3P0.queryForObject(&quot;SELECT COUNT(*) FROM account&quot;, Long.class); System.out.println(result);&#125; æŸ¥è¯¢è¿”å›å•ä¸ªå¯¹è±¡è¦å®ç°æŸ¥è¯¢çš„æ•°æ®å°è£…æˆä¸€ä¸ªå¯¹è±¡çš„è¯ï¼ŒæŸ¥è¯¢queryForObjectçš„å‚æ•°åˆ—è¡¨å¯çŸ¥éœ€è¦ä¸€ä¸ªrowMapperçš„å‚æ•°ã€‚æ‰€ä»¥éœ€è¦åˆ›å»ºä¸€ä¸ªæ‰§è¡Œæ•°æ®å°è£…çš„ç±»æ¥å®ç°RowMapper&lt;T&gt;æ¥å£é‡Œçš„mapRowæ–¹æ³•ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•é‡Œè¿›è¡Œæ•°æ®å¯¹è±¡çš„å°è£…ã€‚ 1234567891011121314151617/** * æ•°æ®å°è£…ç±» * * @author Chen Rui * @version 1.0 **/public class MyRowMapper implements RowMapper&lt;Account&gt; &#123; @Override public Account mapRow(ResultSet rs, int rowNum) throws SQLException &#123; Account account = new Account(); account.setId(rs.getInt(&quot;id&quot;)); account.setName(rs.getString(&quot;name&quot;)); account.setMoney(rs.getDouble(&quot;money&quot;)); return account; &#125;&#125; ç¼–å†™æµ‹è¯•æ–¹æ³• 12345678910111213/** * å°†æŸ¥è¯¢çš„ç»“æœå°è£…æˆå¯¹è±¡ * è¦åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰rowMapperæ¥å®ç°RowMapperæ¥å£ */@Testpublic void test()&#123; Account account = jdbcTemplateC3P0.queryForObject(&quot;SELECT * FROM account WHERE id = ?&quot;, new MyRowMapper(), 1); if (account != null)&#123; System.out.println(account); &#125; else&#123; System.out.println(&quot;NULL&quot;); &#125;&#125; æŸ¥è¯¢è¿”å›å¯¹è±¡é›†åˆè¦å®ç°æŸ¥è¯¢è¿”å›å¯¹è±¡é›†åˆä¾ç„¶éœ€è¦è‡ªå®šä¹‰ç±»å®ç°RowMapper&lt;T&gt;æ¥å£ï¼Œè°ƒç”¨çš„æ˜¯queryæ–¹æ³• 12345678/** * æŸ¥è¯¢å¤šæ¡è®°å½• */@Testpublic void test10()&#123; List&lt;Account&gt; accounts = jdbcTemplateC3P0.query(&quot;SELECT * FROM account&quot;, new MyRowMapper()); accounts.forEach(System.out::println);&#125; Springäº‹åŠ¡ç®¡ç†ä»€ä¹ˆæ˜¯äº‹åŠ¡äº‹åŠ¡ï¼šé€»è¾‘ä¸Šçš„ä¸€ç»„æ“ä½œï¼Œç»„æˆè¿™ç»„æ“ä½œçš„å„ä¸ªå•å…ƒï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€‚ äº‹åŠ¡çš„ç‰¹æ€§ åŸå­æ€§ï¼šäº‹åŠ¡ä¸å¯åˆ†å‰² ä¸€è‡´æ€§ï¼šäº‹åŠ¡æ‰§è¡Œå‰åæ•°æ®å®Œæ•´æ€§ä¿æŒä¸€è‡´ éš”ç¦»æ€§ï¼šä¸€ä¸ªäº‹åŠ¡çš„æ‰§è¡Œä¸åº”è¯¥å—åˆ°å…¶ä»–äº‹åŠ¡çš„å¹²æ‰° æŒä¹…æ€§ï¼šä¸€æ—¦äº‹åŠ¡ç»“æŸï¼Œæ•°æ®å°±æŒä¹…åŒ–åˆ°æ•°æ®åº“ ä¸è€ƒè™‘éš”ç¦»æ€§å¼•å‘çš„å®‰å…¨æ€§é—®é¢˜ è¯»é—®é¢˜ è„è¯»ï¼šAäº‹åŠ¡è¯»åˆ°Bäº‹åŠ¡æœªæäº¤çš„æ•°æ® ä¸å¯é‡å¤è¯»ï¼šBäº‹åŠ¡åœ¨Aäº‹åŠ¡ä¸¤æ¬¡è¯»å–æ•°æ®ä¹‹é—´ï¼Œä¿®æ”¹äº†æ•°æ®ï¼Œå¯¼è‡´Aäº‹åŠ¡ä¸¤æ¬¡è¯»å–ç»“æœä¸ä¸€è‡´ å¹»è¯»&#x2F;è™šè¯»ï¼šBäº‹åŠ¡åœ¨Aäº‹åŠ¡æ‰¹é‡ä¿®æ”¹æ•°æ®æ—¶ï¼Œæ’å…¥äº†ä¸€æ¡æ–°çš„æ•°æ®ï¼Œå¯¼è‡´æ•°æ®åº“ä¸­ä»æœ‰ä¸€æ¡æ•°æ®æœªè¢«ä¿®æ”¹ã€‚ å†™é—®é¢˜ ä¸¢å¤±æ›´æ–°ï¼š è§£å†³è¯»é—®é¢˜ è®¾ç½®äº‹åŠ¡çš„éš”ç¦»çº§åˆ« Read uncommittedï¼šæœªæäº¤è¯»ï¼Œä»»ä½•è¯»é—®é¢˜éƒ½è§£å†³ä¸äº† Read committedï¼šå·²æäº¤è¯»ï¼Œè§£å†³è„è¯»ï¼Œä½†æ˜¯ä¸å¯é‡å¤è¯»å’Œå¹»è¯»æœ‰å¯èƒ½å‘ç”Ÿ Repeatable readï¼šé‡å¤è¯»ï¼Œè§£å†³è„è¯»å’Œä¸å¯é‡å¤è¯»ï¼Œä½†æ˜¯å¹»è¯»æœ‰å¯èƒ½å‘ç”Ÿ Serializableï¼šè§£å†³æ‰€æœ‰è¯»é—®é¢˜ï¼Œå› ä¸ºç¦æ­¢å¹¶è¡Œæ‰§è¡Œ Springäº‹åŠ¡ç®¡ç†API PlatformTransactionManagerï¼šå¹³å°äº‹åŠ¡ç®¡ç†å™¨ DataSourceTransactionManagerï¼šåº•å±‚ä½¿ç”¨JDBCç®¡ç†äº‹åŠ¡ TransactionDefinitionï¼šäº‹åŠ¡å®šä¹‰ä¿¡æ¯ â€‹ ç”¨äºå®šä¹‰äº‹åŠ¡ç›¸å…³çš„ä¿¡æ¯ï¼Œéš”ç¦»çº§åˆ«ï¼Œè¶…æ—¶ä¿¡æ¯ï¼Œä¼ æ’­è¡Œä¸ºï¼Œæ˜¯å¦åªè¯»â€¦â€¦ TransactionStatusï¼šäº‹åŠ¡çš„çŠ¶æ€ â€‹ ç”¨äºè®°å½•åœ¨äº‹åŠ¡ç®¡ç†è¿‡ç¨‹ä¸­ï¼Œäº‹åŠ¡çš„çŠ¶æ€ APIçš„å…³ç³»ï¼š Springåœ¨è¿›è¡Œäº‹åŠ¡ç®¡ç†çš„æ—¶å€™ï¼Œé¦–å…ˆå¹³å°äº‹åŠ¡ç®¡ç†å™¨æ ¹æ®äº‹åŠ¡å®šä¹‰ä¿¡æ¯è¿›è¡Œäº‹åŠ¡çš„ç®¡ç†ï¼Œåœ¨äº‹åŠ¡ç®¡ç†è¿‡ç¨‹ä¸­ï¼Œäº§ç”Ÿå„ç§çŠ¶æ€ï¼Œå°†è¿™äº›çŠ¶æ€ä¿¡æ¯è®°å½•åˆ°äº‹åŠ¡çŠ¶æ€å¯¹è±¡ Springäº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºé¦–å…ˆå‡è®¾ä¸€ä¸ªèƒŒæ™¯ï¼ŒService1é‡Œçš„x()æ–¹æ³•å·²ç»å®šä¹‰äº†ä¸€ä¸ªäº‹åŠ¡ï¼ŒService2é‡Œçš„y()æ–¹æ³•ä¹Ÿæœ‰ä¸€ä¸ªäº‹åŠ¡ï¼Œä½†ç°åœ¨æ–°å¢ä¸€è¡Œä»£ç åœ¨Service2çš„y()æ–¹æ³•ä¸­è¦å…ˆè°ƒç”¨Service1é‡Œçš„x()æ–¹æ³•ç„¶åå†æ‰§è¡Œæœ¬èº«çš„æ–¹æ³•ã€‚è¿™æ—¶å°±æ¶‰åŠåˆ°äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºã€‚ Springä¸­æä¾›äº†7ç§ä¼ æ’­è¡Œä¸º å‡è®¾x()æ–¹æ³•ç§°ä¸ºAï¼Œy()æ–¹æ³•ç§°ä¸ºB ä¿è¯å¤šä¸ªæ“ä½œåœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­ PROPAGATION_REQUIRED(*)ï¼šSpringäº‹åŠ¡éš”ç¦»çº§åˆ«çš„é»˜è®¤å€¼ã€‚å¦‚æœAä¸­æœ‰äº‹åŠ¡ï¼Œåˆ™ä½¿ç”¨Aä¸­çš„äº‹åŠ¡ã€‚å¦‚æœæ²¡æœ‰ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„äº‹åŠ¡ï¼Œå°†æ“ä½œåŒ…å«è¿›æ¥ã€‚ PROPAGATION_SUPPORTSï¼šæ”¯æŒäº‹åŠ¡ã€‚å¦‚æœAä¸­æœ‰äº‹åŠ¡ï¼Œä½¿ç”¨Aä¸­çš„äº‹åŠ¡ã€‚å¦‚æœAæ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™ä¸ä½¿ç”¨äº‹åŠ¡ã€‚ PROPAGATION_MANDATORYï¼šå¦‚æœAä¸­æœ‰äº‹åŠ¡ï¼Œä½¿ç”¨Aä¸­çš„äº‹åŠ¡ã€‚å¦‚æœæ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚ ä¿è¯å¤šä¸ªäº‹åŠ¡ä¸åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­ PROPAGATION_REQUIRES_NEW(*)ï¼šå¦‚æœAä¸­æœ‰äº‹åŠ¡ï¼Œå°†Açš„äº‹åŠ¡æŒ‚èµ·ï¼Œåˆ›å»ºæ–°äº‹åŠ¡ï¼ŒåªåŒ…å«è‡ªèº«æ“ä½œã€‚å¦‚æœAä¸­æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ›å»ºä¸€ä¸ªæ–°äº‹ç‰©ï¼ŒåŒ…å«è‡ªèº«æ“ä½œã€‚ PROPAGATION_NOT_SUPPORTEDï¼šå¦‚æœAä¸­æœ‰äº‹åŠ¡ï¼Œå°†Açš„äº‹åŠ¡æŒ‚èµ·ï¼Œä¸ä½¿ç”¨äº‹åŠ¡ã€‚ PROPAGATION_NEVERï¼šå¦‚æœAä¸­æœ‰äº‹åŠ¡ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚ åµŒå¥—å¼äº‹åŠ¡ PROPAGATION_NESTED(*)ï¼šåµŒå¥—äº‹åŠ¡ï¼Œå¦‚æœAä¸­æœ‰äº‹åŠ¡ï¼Œåˆ™æŒ‰ç…§Açš„äº‹åŠ¡æ‰§è¡Œï¼Œæ‰§è¡Œå®Œæˆåï¼Œè®¾ç½®ä¸€ä¸ªä¿å­˜ç‚¹ï¼Œå†æ‰§è¡ŒBä¸­çš„æ“ä½œï¼Œå¦‚æœæ— å¼‚å¸¸ï¼Œåˆ™æ‰§è¡Œé€šè¿‡ï¼Œå¦‚æœæœ‰å¼‚å¸¸ï¼Œåˆ™å¯ä»¥é€‰æ‹©å›æ»šåˆ°åˆå§‹ä½ç½®æˆ–è€…ä¿å­˜ç‚¹ã€‚ Springäº‹åŠ¡ç®¡ç†æ¡ˆä¾‹â€”â€”è½¬è´¦æƒ…æ™¯è½¬è´¦æƒ…æ™¯å®ç°é¦–å…ˆåˆ›å»ºæ¥å£AccountDaoï¼Œå®šä¹‰ä¸¤ä¸ªæ–¹æ³•åˆ†åˆ«æ˜¯outå’Œin 12345678910111213141516171819202122232425/** * AccountDao * * @author Chen Rui * @version 1.0 **/public interface AccountDao &#123; /** * è½¬å‡º * * @param from è½¬å‡ºè´¦æˆ· * @param money è½¬å‡ºé‡‘é¢ */ void out(String from, double money); /** * è½¬å…¥ * * @param to è½¬å…¥è´¦æˆ· * @param money è½¬å…¥é‡‘é¢ */ void in(String to, double money);&#125; æ¥ç€åˆ›å»ºå®ç°ç±»AccountDaoImplå®ç°outå’Œinæ–¹æ³•å¹¶ä¸”ç»§æ‰¿JdbcSupportç±»ã€‚è¿™æ ·å°±å¯ä»¥ç›´æ¥ä½¿ç”¨çˆ¶ç±»çš„JDBCTemplateå¯¹è±¡ã€‚ 12345678910111213141516171819/** * AccountDaoå®ç°ç±» * * @author Chen Rui * @version 1.0 **/public class AccountDaoImpl extends JdbcDaoSupport implements AccountDao &#123; @Override public void out(String from, double money) &#123; this.getJdbcTemplate().update(&quot;UPDATE account SET money = money - ? WHERE name = ?&quot;, money, from); &#125; @Override public void in(String to, double money) &#123; this.getJdbcTemplate().update(&quot;UPDATE account SET money = money + ? WHERE name = ?&quot;, money, to); &#125;&#125; ç„¶ååˆ›å»ºæ¥å£AccountrServiceï¼Œå®šä¹‰transferæ–¹æ³• 1234567891011121314151617/** * AccountService * * @author Chen Rui * @version 1.0 **/public interface AccountService &#123; /** * è½¬è´¦ * @param from è½¬å‡ºè´¦æˆ· * @param to è½¬å…¥è´¦æˆ· * @param money äº¤æ˜“é‡‘é¢ */ void transfer(String from, String to, Double money);&#125; å†åˆ›å»ºç±»AccountServiceImplå®ç°è¯¥æ¥å£ï¼Œå¹¶å£°æ˜AccountDaoå¼•ç”¨å¹¶åˆ›å»ºsetæ–¹æ³• 1234567891011121314151617181920/** * AccountServiceå®ç°ç±» * * @author Chen Rui * @version 1.0 **/public class AccountServiceImpl implements AccountService &#123; private AccountDao accountDao; public void setAccountDao(AccountDao accountDao) &#123; this.accountDao = accountDao; &#125; @Override public void transfer(String from, String to, Double money) &#123; accountDao.out(from, money); accountDao.in(to, money); &#125;&#125; æœ€ååˆ›å»ºé…ç½®æ–‡ä»¶spring-tx-programmatic.xmlï¼Œç”¨æ¥ç®¡ç†Beanã€‚ å¼•å…¥æ•°æ®åº“è¿æ¥æ–‡ä»¶ï¼Œé…ç½®æ•°æ®æºï¼Œåˆ›å»ºBeanå¯¹è±¡accountDaoå°†æ•°æ®æºdataSourceæ³¨å…¥åˆ°accountDaoä¸­ï¼Œå†åˆ›å»ºBeanå¯¹è±¡accountServiceï¼Œå°†accountDaoæ³¨å…¥ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot; xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot; http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt; &lt;!-- ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†é…ç½®æ–‡ä»¶ --&gt; &lt;!-- é…ç½®Service --&gt; &lt;bean id=&quot;accountService&quot; class=&quot;learningspring.transaction.programmatic.AccountServiceImpl&quot;&gt; &lt;property name=&quot;accountDao&quot; ref=&quot;accountDao&quot;/&gt; &lt;/bean&gt; &lt;!-- é…ç½®Dao --&gt; &lt;bean id=&quot;accountDao&quot; class=&quot;learningspring.transaction.programmatic.AccountDaoImpl&quot;&gt; &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt; &lt;/bean&gt; &lt;!-- å¼•å…¥æ•°æ®åº“é…ç½®æ–‡ä»¶ --&gt; &lt;context:property-placeholder location=&quot;db.properties&quot;/&gt; &lt;!-- é…ç½®C3P0è¿æ¥æ±  --&gt; &lt;bean id=&quot;dataSource&quot; class=&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;&gt; &lt;property name=&quot;driverClass&quot; value=&quot;$&#123;jdbc.driverClassName&#125;&quot;/&gt; &lt;property name=&quot;jdbcUrl&quot; value=&quot;$&#123;jdbc.url&#125;&quot;/&gt; &lt;property name=&quot;user&quot; value=&quot;$&#123;jdbc.username&#125;&quot;/&gt; &lt;property name=&quot;password&quot; value=&quot;$&#123;jdbc.password&#125;&quot;/&gt; &lt;/bean&gt;&lt;/beans&gt; åˆ°æ­¤ä¸€ä¸ªè½¬è´¦æ¨¡æ‹Ÿä¸šåŠ¡å°±å®ç°äº†ï¼Œæ•°æ®åº“è¡¨ä¾ç„¶ä½¿ç”¨å‰é¢åˆ›å»ºçš„accountè¡¨ï¼Œå…ˆæŸ¥è¯¢å½“å‰æ•°æ®åº“çš„æ•°æ®ã€‚ ç¼–å†™æµ‹è¯•æ–¹æ³•ï¼Œå®ç°è®©å§“åä¸ºBobçš„è´¦æˆ·å‘Jackè½¬è´¦1000å…ƒã€‚ 123456789101112131415161718/** * ç¼–ç¨‹å¼äº‹åŠ¡æµ‹è¯•ç±» * * @author Chen Rui * @version 1.0 **/@RunWith(SpringJUnit4ClassRunner.class)@ContextConfiguration(value = &quot;classpath:spring-tx-programmatic.xml&quot;)public class AppTest &#123; @Resource(name = &quot;accountService&quot;) private AccountService accountService; @Test public void test()&#123; accountService.transfer(&quot;Bob&quot;,&quot;Jack&quot;,1000d); &#125;&#125; è¿è¡Œç»“æœ ç°åœ¨å¯¹ç±»AccountServiceImplé‡Œçš„transferæ–¹æ³•è¿›è¡Œä¿®æ”¹ï¼Œè®©å…¶å‘ç”Ÿå¼‚å¸¸ï¼Œå†è§‚å¯Ÿç»“æœ 123456789101112131415161718192021222324/** * AccountServiceå®ç°ç±» * * @author Chen Rui * @version 1.0 **/public class AccountServiceImpl implements AccountService &#123; private AccountDao accountDao; public void setAccountDao(AccountDao accountDao) &#123; this.accountDao = accountDao; &#125; @Override public void transfer(String from, String to, Double money) &#123; accountDao.out(from, money); // æŠ›å‡ºå¼‚å¸¸ int i = 1/0; accountDao.in(to, money); &#125;&#125; æŸ¥è¯¢æ•°æ®åº“æ•°æ® è¿™æ—¶Bobè´¦æˆ·çš„é’±å°±å°‘äº†1000å…ƒï¼Œè€ŒJackè´¦æˆ·ä¹Ÿæ²¡æœ‰å¢åŠ 1000å…ƒã€‚ æ‰€ä»¥å°±éœ€è¦äº‹åŠ¡æ¥è¿›è¡Œç®¡ç†ã€‚ ç¼–ç¨‹å¼äº‹åŠ¡æ‰€è°“ç¼–ç¨‹å¼äº‹åŠ¡ï¼Œå°±æ˜¯è¦åœ¨æºç ä¸­ç¼–å†™äº‹åŠ¡ç›¸å…³çš„ä»£ç ã€‚å®ç°ç¼–ç¨‹å¼äº‹åŠ¡ï¼Œé¦–å…ˆè¦åœ¨AccountServiceImplä¸­å£°æ˜TransactionTemplateå¯¹è±¡ï¼Œå¹¶åˆ›å»ºsetæ–¹æ³•ã€‚ç„¶åä¿®æ”¹transferå‚æ•°åˆ—è¡¨æ‰€æœ‰å‚æ•°éƒ½ç”¨final(å› ä¸ºä½¿ç”¨äº†åŒ¿åå†…éƒ¨ç±»)ä¿®é¥°ï¼Œå¹¶ä¿®æ”¹æ–¹æ³•ä½“å†…å®¹ã€‚ 1234567891011121314151617181920212223242526272829303132/** * AccountServiceå®ç°ç±» * * @author Chen Rui * @version 1.0 **/public class AccountServiceImpl implements AccountService &#123; private AccountDao accountDao; private TransactionTemplate transactionTemplate; public void setAccountDao(AccountDao accountDao) &#123; this.accountDao = accountDao; &#125; public void setTransactionTemplate(TransactionTemplate transactionTemplate) &#123; this.transactionTemplate = transactionTemplate; &#125; @Override public void transfer(final String from, final String to, final Double money) &#123; transactionTemplate.execute(new TransactionCallbackWithoutResult() &#123; @Override protected void doInTransactionWithoutResult(TransactionStatus status) &#123; accountDao.out(from, money); // æŠ›å‡ºå¼‚å¸¸ int i = 1/0; accountDao.in(to,money); &#125; &#125;); &#125;&#125; ç„¶åä¿®æ”¹spring-tx-programmatic.xmlæ–‡ä»¶ï¼Œåˆ›å»ºBeanå¯¹è±¡transactionManagerå’ŒtransactionTemplateï¼Œå¹¶å°†transactionTemplateæ³¨å…¥åˆ°accountServiceä¸­ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot; xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot; http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt; &lt;!-- ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†é…ç½®æ–‡ä»¶ --&gt; &lt;!-- é…ç½®Service --&gt; &lt;bean id=&quot;accountService&quot; class=&quot;learningspring.transaction.programmatic.AccountServiceImpl&quot;&gt; &lt;property name=&quot;accountDao&quot; ref=&quot;accountDao&quot;/&gt; &lt;property name=&quot;transactionTemplate&quot; ref=&quot;transactionTemplate&quot;/&gt; &lt;/bean&gt; &lt;!-- é…ç½®Dao --&gt; &lt;bean id=&quot;accountDao&quot; class=&quot;learningspring.transaction.programmatic.AccountDaoImpl&quot;&gt; &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt; &lt;/bean&gt; &lt;!-- å¼•å…¥æ•°æ®åº“é…ç½®æ–‡ä»¶ --&gt; &lt;context:property-placeholder location=&quot;db.properties&quot;/&gt; &lt;!-- é…ç½®C3P0è¿æ¥æ±  --&gt; &lt;bean id=&quot;dataSource&quot; class=&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;&gt; &lt;property name=&quot;driverClass&quot; value=&quot;$&#123;jdbc.driverClassName&#125;&quot;/&gt; &lt;property name=&quot;jdbcUrl&quot; value=&quot;$&#123;jdbc.url&#125;&quot;/&gt; &lt;property name=&quot;user&quot; value=&quot;$&#123;jdbc.username&#125;&quot;/&gt; &lt;property name=&quot;password&quot; value=&quot;$&#123;jdbc.password&#125;&quot;/&gt; &lt;/bean&gt; &lt;!-- é…ç½®äº‹åŠ¡ç®¡ç†å™¨ --&gt; &lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt; &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt; &lt;/bean&gt; &lt;!-- é…ç½®æ¨¡æ¿ --&gt; &lt;bean id=&quot;transactionTemplate&quot; class=&quot;org.springframework.transaction.support.TransactionTemplate&quot;&gt; &lt;property name=&quot;transactionManager&quot; ref=&quot;transactionManager&quot;/&gt; &lt;/bean&gt;&lt;/beans&gt; æ­¤æ—¶å¼‚å¸¸ä¾ç„¶å­˜åœ¨ï¼Œæ•°æ®åº“æ•°æ®ä»ç„¶æ˜¯ä¸Šæ¬¡æ‰§è¡Œçš„ç»“æœçŠ¶æ€ å†æ¬¡è¿è¡Œæµ‹è¯•æ–¹æ³•ï¼Œå¹¶æŸ¥è¯¢ç»“æœï¼Œè§‚å¯Ÿæ˜¯å¦å‘ç”Ÿå˜åŒ– ç°åœ¨å°±å®ç°äº†ç¼–ç¨‹å¼äº‹åŠ¡ï¼Œå½“å‡ºç°å¼‚å¸¸æ—¶ï¼Œæ•°æ®åº“çš„æ•°æ®å°±ä¸ä¼šè¢«ä¿®æ”¹ã€‚ å£°æ˜å¼äº‹åŠ¡XMLé…ç½®æ–¹å¼å£°æ˜å¼äº‹åŠ¡å³é€šè¿‡é…ç½®æ–‡ä»¶å®ç°ï¼Œåˆ©ç”¨çš„å°±æ˜¯Springçš„AOP ä¿®æ”¹ç±»AccountServiceImplï¼Œåˆ é™¤TransactionTemplateå¯¹è±¡ï¼Œå¹¶ä¿®æ”¹transferæ–¹æ³•ï¼Œä¿ç•™å¼‚å¸¸ä»£ç  12345678910111213141516171819202122/** * AccountServiceå®ç°ç±» * * @author Chen Rui * @version 1.0 **/public class AccountServiceImpl implements AccountService&#123; private AccountDao accountDao; public void setAccountDao(AccountDao accountDao) &#123; this.accountDao = accountDao; &#125; @Override public void transfer(String from, String to, Double money) &#123; accountDao.out(from, money); int i = 1/0; accountDao.in(to,money); &#125;&#125; ç„¶ååˆ›å»ºé…ç½®æ–‡ä»¶spring-tx-declarative.xmlï¼Œé…ç½®æ•°æ®æºå³Beanå¯¹è±¡ï¼Œç„¶åé…ç½®äº‹åŠ¡ç®¡ç†å™¨ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot; xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot; http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt; &lt;!-- å£°æ˜å¼äº‹åŠ¡ç®¡ç†é…ç½®æ–‡ä»¶ --&gt; &lt;!-- é…ç½®Service --&gt; &lt;bean id=&quot;accountService&quot; class=&quot;learningspring.transaction.declarative.AccountServiceImpl&quot;&gt; &lt;property name=&quot;accountDao&quot; ref=&quot;accountDao&quot;/&gt; &lt;/bean&gt; &lt;!-- é…ç½®Dao --&gt; &lt;bean id=&quot;accountDao&quot; class=&quot;learningspring.transaction.declarative.AccountDaoImpl&quot;&gt; &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt; &lt;/bean&gt; &lt;!-- å¼•å…¥æ•°æ®åº“é…ç½®æ–‡ä»¶ --&gt; &lt;context:property-placeholder location=&quot;db.properties&quot;/&gt; &lt;!-- é…ç½®C3P0è¿æ¥æ±  --&gt; &lt;bean id=&quot;dataSource&quot; class=&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;&gt; &lt;property name=&quot;driverClass&quot; value=&quot;$&#123;jdbc.driverClassName&#125;&quot;/&gt; &lt;property name=&quot;jdbcUrl&quot; value=&quot;$&#123;jdbc.url&#125;&quot;/&gt; &lt;property name=&quot;user&quot; value=&quot;$&#123;jdbc.username&#125;&quot;/&gt; &lt;property name=&quot;password&quot; value=&quot;$&#123;jdbc.password&#125;&quot;/&gt; &lt;/bean&gt; &lt;!-- é…ç½®äº‹åŠ¡ç®¡ç†å™¨ --&gt; &lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt; &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt; &lt;/bean&gt;&lt;/beans&gt; æ¥ç€å°±é…ç½®äº‹åŠ¡çš„å¢å¼ºï¼Œé…ç½®æ–‡ä»¶ä¸­åŠ å…¥ä»¥ä¸‹é…ç½® 12345678910111213&lt;!-- é…ç½®äº‹åŠ¡çš„å¢å¼º --&gt;&lt;tx:advice id=&quot;txAdvice&quot; transaction-manager=&quot;transactionManager&quot;&gt; &lt;tx:attributes&gt; &lt;!-- é…ç½®äº‹åŠ¡çš„è§„åˆ™ æ ¹æ®å®é™…ä¸šåŠ¡ä¿®æ”¹--&gt; &lt;tx:method name=&quot;*&quot; propagation=&quot;REQUIRED&quot;/&gt; &lt;/tx:attributes&gt;&lt;/tx:advice&gt;&lt;!-- AOPçš„é…ç½® --&gt;&lt;aop:config&gt; &lt;aop:pointcut id=&quot;pointcut1&quot; expression=&quot;execution(* learningspring.transaction.declarative.AccountServiceImpl.*(..))&quot;/&gt; &lt;aop:advisor advice-ref=&quot;txAdvice&quot; pointcut-ref=&quot;pointcut1&quot;/&gt;&lt;/aop:config&gt; å…ˆæŸ¥çœ‹å½“å‰æ•°æ®åº“æ•°æ® ç¼–å†™æµ‹è¯•æ–¹æ³• 123456789101112131415161718/** * å£°æ˜å¼äº‹åŠ¡é…ç½®æµ‹è¯•ç±» * * @author Chen Rui * @version 1.0 **/@RunWith(SpringJUnit4ClassRunner.class)@ContextConfiguration(value = &quot;classpath:spring-tx-declarative.xml&quot;)public class AppTest &#123; @Resource(name = &quot;accountService&quot;) private AccountService accountService; @Test public void test()&#123; accountService.transfer(&quot;Bob&quot;,&quot;Jack&quot;,1000d); &#125;&#125; è¿è¡ŒæŸ¥çœ‹ç»“æœï¼Œæ˜¯å¦å˜åŒ– è‡³æ­¤å°±å®ç°äº†å£°æ˜å¼äº‹åŠ¡XMLæ–¹å¼çš„é…ç½®ã€‚ æ³¨è§£é…ç½®æ–¹å¼Springçš„äº‹åŠ¡é…ç½®ä»ç„¶æ”¯æŒæ³¨è§£é…ç½® ç»§ç»­æ²¿ç”¨spring-tx-declarative.xmlæ–‡ä»¶ï¼ŒæŠŠäº‹åŠ¡å¢å¼ºå’ŒAOPç›¸å…³çš„é…ç½®æ³¨é‡Šï¼Œå¹¶å¼€å¯æ³¨è§£äº‹åŠ¡ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot; xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot; http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt; &lt;!-- å£°æ˜å¼äº‹åŠ¡ç®¡ç†é…ç½®æ–‡ä»¶ --&gt; &lt;!-- é…ç½®Service --&gt; &lt;bean id=&quot;accountService&quot; class=&quot;learningspring.transaction.declarative.AccountServiceImpl&quot;&gt; &lt;property name=&quot;accountDao&quot; ref=&quot;accountDao&quot;/&gt; &lt;/bean&gt; &lt;!-- é…ç½®Dao --&gt; &lt;bean id=&quot;accountDao&quot; class=&quot;learningspring.transaction.declarative.AccountDaoImpl&quot;&gt; &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt; &lt;/bean&gt; &lt;!-- å¼•å…¥æ•°æ®åº“é…ç½®æ–‡ä»¶ --&gt; &lt;context:property-placeholder location=&quot;db.properties&quot;/&gt; &lt;!-- é…ç½®C3P0è¿æ¥æ±  --&gt; &lt;bean id=&quot;dataSource&quot; class=&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;&gt; &lt;property name=&quot;driverClass&quot; value=&quot;$&#123;jdbc.driverClassName&#125;&quot;/&gt; &lt;property name=&quot;jdbcUrl&quot; value=&quot;$&#123;jdbc.url&#125;&quot;/&gt; &lt;property name=&quot;user&quot; value=&quot;$&#123;jdbc.username&#125;&quot;/&gt; &lt;property name=&quot;password&quot; value=&quot;$&#123;jdbc.password&#125;&quot;/&gt; &lt;/bean&gt; &lt;!-- é…ç½®äº‹åŠ¡ç®¡ç†å™¨ --&gt; &lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt; &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt; &lt;/bean&gt; &lt;!-- é…ç½®äº‹åŠ¡çš„å¢å¼º --&gt; &lt;!--&lt;tx:advice id=&quot;txAdvice&quot; transaction-manager=&quot;transactionManager&quot;&gt;--&gt; &lt;!--&lt;tx:attributes&gt;--&gt; &lt;!-- é…ç½®äº‹åŠ¡çš„è§„åˆ™ --&gt; &lt;!--&lt;tx:method name=&quot;*&quot; propagation=&quot;REQUIRED&quot;/&gt;--&gt; &lt;!--&lt;/tx:attributes&gt;--&gt; &lt;!--&lt;/tx:advice&gt;--&gt; &lt;!-- AOPçš„é…ç½® --&gt; &lt;!--&lt;aop:config&gt;--&gt; &lt;!--&lt;aop:pointcut id=&quot;pointcut1&quot; expression=&quot;execution(* learningspring.transaction.declarative.AccountServiceImpl.*(..))&quot;/&gt;--&gt; &lt;!--&lt;aop:advisor advice-ref=&quot;txAdvice&quot; pointcut-ref=&quot;pointcut1&quot;/&gt;--&gt; &lt;!--&lt;/aop:config&gt;--&gt; &lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot;/&gt;&lt;/beans&gt; æ¥ä¸‹æ¥å°±å¯ä»¥åœ¨ä¸šåŠ¡å±‚ç±»ä¸Šä½¿ç”¨äº‹åŠ¡ç®¡ç†çš„æ³¨è§£äº†ã€‚ä¿®æ”¹AccountServiceImplç±»ï¼Œæ·»åŠ @Transactionalæ³¨è§£ 123456789101112131415161718192021222324/** * AccountServiceå®ç°ç±» * * @author Chen Rui * @version 1.0 **/@Transactional(rollbackFor = Exception.class)public class AccountServiceImpl implements AccountService&#123; private AccountDao accountDao; public void setAccountDao(AccountDao accountDao) &#123; this.accountDao = accountDao; &#125; @Override public void transfer(String from, String to, Double money) &#123; accountDao.out(from, money); int i = 1/0; accountDao.in(to,money); &#125;&#125; å†æ¬¡è¿è¡Œæµ‹è¯•æ–¹æ³•ï¼Œæ•°æ®åº“ä¹Ÿä¸ä¼šå‘ç”Ÿæ”¹å˜ã€‚","categories":[{"name":"ä»£ç å­¦ä¹ ","slug":"Codelearning","permalink":"http://blog.aiheadn.cn/categories/Codelearning/"},{"name":"æ¡†æ¶å­¦ä¹ ","slug":"Codelearning/kuangjia","permalink":"http://blog.aiheadn.cn/categories/Codelearning/kuangjia/"}],"tags":[{"name":"spring","slug":"spring","permalink":"http://blog.aiheadn.cn/tags/spring/"}]},{"title":"åŸºäºå‰ç«¯Vueå­¦ä¹ æ€»ç»“","slug":"åŸºäºå‰ç«¯Vueå­¦ä¹ æ€»ç»“","date":"2023-03-08T02:45:15.000Z","updated":"2023-03-08T08:07:55.023Z","comments":true,"path":"archives/25f3330a.html","link":"","permalink":"http://blog.aiheadn.cn/archives/25f3330a.html","excerpt":"","text":"å‰è¨€æ€»ç»“ä¸€ä¸‹vueæ–¹ä¾¿æŸ¥é˜… è®¤è¯†ä¸€ä¸‹123456789101112131415161718192021&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;title&gt;Vue Basic Example&lt;/tit le&gt; &lt;script src=&quot;https://cdn.jsdelivr.net/npm/vue&quot;&gt;&lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;div id=&quot;app&quot;&gt; &#123;&#123; message &#125;&#125; &lt;/div&gt; &lt;script&gt; var app = new Vue(&#123; el: &#x27;#app&#x27;, data: &#123; message: &#x27;Hello, Vue!&#x27; &#125; &#125;); &lt;/script&gt; &lt;/body&gt;&lt;/html&gt; vueå®˜æ–¹æ–‡æ¡£æŸ¥è¯¢ä½¿ç”¨ï¼švueå®˜æ–¹æ–‡æ¡£ vueæŒ‡ä»¤å±æ€§ç»‘å®šæŒ‡ä»¤ åœ¨ Vue ä¸­ï¼Œå±æ€§ç»‘å®šæŒ‡ä»¤æ˜¯æŒ‡ v-bind æŒ‡ä»¤ã€‚v-bind æŒ‡ä»¤å¯ä»¥ç”¨æ¥åŠ¨æ€åœ°å°† HTML å±æ€§ä¸ Vue å®ä¾‹ä¸­çš„æ•°æ®ç»‘å®šèµ·æ¥ï¼Œä»¥ä¾¿åœ¨æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶è‡ªåŠ¨æ›´æ–°é¡µé¢ã€‚ åœ¨ Vue ä¸­ï¼Œv-bind æŒ‡ä»¤è¿˜æœ‰ä¸€ç§ç®€å†™æ–¹å¼ï¼Œå³ä½¿ç”¨å†’å·ï¼ˆ:ï¼‰ä»£æ›¿ v-bind:ã€‚ äº‹ä»¶ç»‘å®šçš„æ—¶å€™ å˜é‡ç”¨â€œâ€ å­—ç¬¦ä¸²ç”¨â€˜â€™ äº‹ä»¶ç»‘å®šæŒ‡ä»¤äº‹ä»¶ä¿®é¥°ç¬¦æŒ‰é”®ä¿®é¥°ç¬¦åŒå‘ç»‘å®š v-model","categories":[{"name":"ä»£ç å­¦ä¹ ","slug":"Codelearning","permalink":"http://blog.aiheadn.cn/categories/Codelearning/"},{"name":"æ¡†æ¶å­¦ä¹ ","slug":"Codelearning/kuangjia","permalink":"http://blog.aiheadn.cn/categories/Codelearning/kuangjia/"}],"tags":[{"name":"vue","slug":"vue","permalink":"http://blog.aiheadn.cn/tags/vue/"}]},{"title":"è½¯ä»¶è®¾è®¡å¸ˆä¸­ä¸€äº›å…¬å¼çŸ¥è¯†ç‚¹","slug":"è½¯ä»¶è®¾è®¡å¸ˆä¸­ä¸€äº›å…¬å¼çŸ¥è¯†ç‚¹","date":"2023-03-01T13:54:13.000Z","updated":"2023-03-08T08:06:30.583Z","comments":true,"path":"archives/8b4bd44a.html","link":"","permalink":"http://blog.aiheadn.cn/archives/8b4bd44a.html","excerpt":"","text":"æ ¡éªŒç å¯é åº¦æµæ°´","categories":[{"name":"ä¿¡æ¯æŠ€æœ¯","slug":"xingxijishu","permalink":"http://blog.aiheadn.cn/categories/xingxijishu/"}],"tags":[{"name":"edu","slug":"edu","permalink":"http://blog.aiheadn.cn/tags/edu/"}]},{"title":"å¯¹äºwinç³»ç»Ÿçš„Cç›˜è¿›è¡Œç˜¦èº«","slug":"å¯¹äºwinç³»ç»Ÿçš„Cç›˜è¿›è¡Œç˜¦èº«","date":"2023-02-24T06:13:47.000Z","updated":"2023-02-26T12:53:26.783Z","comments":true,"path":"archives/679a4029.html","link":"","permalink":"http://blog.aiheadn.cn/archives/679a4029.html","excerpt":"","text":"å‰è¨€è®°å½•ä¸€ä¸‹æ¸…ç†ç”µè„‘cç›˜çš„ä¸€ä¸‹å°æŠ€å·§ æ¸…ç†cç›˜ç¼“å­˜1C:\\Users\\å°ad\\AppData\\Local\\Temp è¿™ä¸ªæ–‡ä»¶ä¸‹çš„ä¸€èˆ¬éƒ½æ˜¯ç¼“å­˜","categories":[{"name":"ä¿¡æ¯æŠ€æœ¯","slug":"xingxijishu","permalink":"http://blog.aiheadn.cn/categories/xingxijishu/"}],"tags":[{"name":"C","slug":"C","permalink":"http://blog.aiheadn.cn/tags/C/"}]},{"title":"JAVAä¸­å¸¸ç”¨æ–¹æ³•æ€»ç»“","slug":"JAVAä¸­å¸¸ç”¨æ–¹æ³•æ€»ç»“","date":"2023-02-11T04:47:26.000Z","updated":"2023-02-11T05:13:46.496Z","comments":true,"path":"archives/bcf1045e.html","link":"","permalink":"http://blog.aiheadn.cn/archives/bcf1045e.html","excerpt":"","text":"å‰è¨€æ€»ç»“ä¸€äº›å¸¸ç”¨çš„æ–¹æ³• Stringå­—ç¬¦ä¸²é•¿åº¦12String str = &quot;aaaaaaaa&quot;; int len = str.length();//lenä»£è¡¨æ­¤å­—ç¬¦ä¸²çš„é•¿åº¦ charAt(int index)12String str=&quot; hello&quot;;System.out.println(str.charAt(3));//æ‰“å°ç»“æœä¸ºe è¿æ¥å­—ç¬¦ä¸²123String string1=&quot;æˆ‘çš„åå­—æ˜¯ï¼š&quot;;String string2=&quot;å°èŠ±&quot;;string1.concat(string2);//æ­¤æ—¶æ‰“å°ç»“æœä¸ºï¼šæˆ‘çš„åå­—æ˜¯ï¼šå°èŠ± å¼•ç”¨ç±»å‹çš„æ•´æ•°è½¬æ¢å­—ç¬¦ä¸²123456789101112131415161718public class IntToString &#123; public static void main(String[] args) &#123; Integer num = 456; //æ–¹å¼1 String str1 = String.valueOf(num); System.out.println(&quot;æ–¹å¼1çš„ç»“æœï¼š&quot; + str1); //æ–¹å¼2 String str2 = Integer.toString(num); System.out.println(&quot;æ–¹å¼1çš„ç»“æœï¼š&quot; + str2); //æ–¹å¼3 String str3 = num + &quot;&quot;; System.out.println(&quot;æ–¹å¼1çš„ç»“æœï¼š&quot; + str3); &#125;&#125; å­—ç¬¦ä¸²æ¯”è¾ƒ12345678public class A &#123; public static void main(String[] args) &#123; String a = &quot;123&quot;; String b = &quot;123&quot;; System.out.println(a.equals(b)); &#125; &#125; Math123456789101112131415161718192021222324252627282930313233343536System.out.println(Math.sqrt(25)); //5.0 --è®¡ç®—å¹³æ–¹æ ¹System.out.println(Math.cbrt(8)); //2.0 --è®¡ç®—ç«‹æ–¹æ ¹System.out.println(Math.pow(3,3)); //27.0 --è®¡ç®—açš„bæ¬¡æ–¹System.out.println(Math.max(88,8)); //88 --è®¡ç®—æœ€å¤§å€¼System.out.println(Math.min(88,8)); //8 --è®¡ç®—æœ€å°å€¼System.out.println(Math.abs(-13.14)); //13.14 --è®¡ç®—ç»å¯¹å€¼double a = 2.01;double b = Math.ceil(a); //å‘ä¸Šå–æ•´System.out.println(b); //3.0double a = 8.99;double b = Math.floor(a); //å‘ä¸‹å–æ•´System.out.println(b); //8.0double a = 5.4;double b = Math.round(a); //å‘ä¸Šå–æ•´System.out.println(b);//5.0double a = 6.51;double b = Math.rint(a); //å››èˆäº”å…¥ æ³¨æ„.5çš„æ—¶å€™ä¼šå–å¶æ•°System.out.println(b); //7.0System.out.println(Math.random()); // [0, 1)çš„doubleç±»å‹çš„æ•°System.out.println(Math.random() * 2);//[0, 2)çš„doubleç±»å‹çš„æ•°System.out.println(Math.random() * 2 + 1);// [1, 3)çš„doubleç±»å‹çš„æ•° MapMap.containsKey(Object key)123456789101112131415public static void main(String[] args)&#123; Map map = new HashMap(); //å®šä¹‰Mapå¯¹è±¡ map.put(&quot;apple&quot;,&quot;æ–°é²œçš„è‹¹æœ&quot;); //å‘é›†åˆä¸­æ·»åŠ å¯¹è±¡ map.put(&quot;computer&quot;,&quot;é…ç½®ä¼˜è‰¯çš„è®¡ç®—æœº&quot;); map.put(&quot;book&quot;,&quot;å †ç§¯æˆå±±çš„å›¾ä¹¦&quot;); map.put(&quot;time&quot;,new Date()); String key = &quot;book&quot;; boolean contains=map.containsKey(key); //åˆ¤æ–­æ˜¯å¦åŒ…å«æŒ‡å®šçš„é”®å€¼ if(contains)&#123; //å¦‚æœæ¡ä»¶ä¸ºçœŸ System.out.println(&quot;åœ¨Mapé›†åˆä¸­åŒ…å«é”®å&quot;+key); //è¾“å‡ºä¿¡æ¯ &#125;else&#123; System.out.println(&quot;åœ¨Mapé›†åˆä¸­ä¸åŒ…å«é”®å&quot;+key); &#125;&#125;","categories":[{"name":"ä»£ç å­¦ä¹ ","slug":"Codelearning","permalink":"http://blog.aiheadn.cn/categories/Codelearning/"},{"name":"Java","slug":"Codelearning/Java","permalink":"http://blog.aiheadn.cn/categories/Codelearning/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"http://blog.aiheadn.cn/tags/Java/"}]},{"title":"å“”å“©å“”å“©avå’Œbväº’ç›¸è½¬æ¢JAVAç‰ˆæœ¬","slug":"å“”å“©å“”å“©avå’Œbväº’ç›¸è½¬æ¢JAVAç‰ˆæœ¬","date":"2023-02-01T06:42:43.000Z","updated":"2023-02-01T11:52:16.362Z","comments":true,"path":"archives/9f02f0c2.html","link":"","permalink":"http://blog.aiheadn.cn/archives/9f02f0c2.html","excerpt":"","text":"å‰è¨€å“”å“©å“”å“©é€æ¸ä»avè½¬åŒ–åˆ°bvï¼Œä½†æ˜¯å¥½å¤šä»£ç æ¡†æ¶è¿˜åœ¨ä½¿ç”¨avï¼Œè¿™ä¸ªæ˜¯javaç‰ˆæœ¬çš„ä»£ç  ä¸¤ä¸ªç‰ˆæœ¬å¯ä»¥äº’ç›¸è½¬åŒ–ã€‚ Javaä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354import java.util.HashMap;public class AvBv &#123; private static String table = &quot;fZodR9XQDSUm21yCkr6zBqiveYah8bt4xsWpHnJE7jL5VG3guMTKNPAwcF&quot;; private static HashMap&lt;String, Integer&gt; mp = new HashMap&lt;&gt;(); private static HashMap&lt;Integer, String&gt; mp2 = new HashMap&lt;&gt;(); static int ss[] = &#123;11, 10, 3, 8, 4, 6, 2, 9, 5, 7&#125;; static long xor = 177451812; static long add = 8728348608l; public static void main(String[] args) &#123; System.out.println(b2v(&quot;BV1d64y1q7KS&quot;)); System.out.println(v2b(&quot;av98464354&quot;)); //è¿™é‡Œéœ€è¦è½¬åŒ–å“ªä¸ªå°±ä¿®æ”¹å“ªä¸ª &#125; public static long power(int a, int b) &#123; long power = 1; for (int c = 0; c &lt; b; c++) power *= a; return power; &#125; public static String b2v(String s) &#123; long r = 0; for (int i = 0; i &lt; 58; i++) &#123; String s1 = table.substring(i, i + 1); mp.put(s1, i); &#125; for (int i = 0; i &lt; 6; i++) &#123; r = r + mp.get(s.substring(ss[i], ss[i] + 1)) * power(58, i); &#125; return &quot;av&quot; + ((r - add) ^ xor); &#125; public static String v2b(String st) &#123; long s = Long.valueOf(st.split(&quot;av&quot;)[1]); StringBuffer sb = new StringBuffer(&quot;BV1 4 1 7 &quot;); s = (s ^ xor) + add; for (int i = 0; i &lt; 58; i++) &#123; String s1 = table.substring(i, i + 1); mp2.put(i, s1); &#125; for (int i = 0; i &lt; 6; i++) &#123; String r = mp2.get((int) (s / power(58, i) % 58)); sb.replace(ss[i], ss[i] + 1, r); &#125; return sb.toString(); &#125;&#125;","categories":[{"name":"ä»£ç å­¦ä¹ ","slug":"Codelearning","permalink":"http://blog.aiheadn.cn/categories/Codelearning/"},{"name":"Java","slug":"Codelearning/Java","permalink":"http://blog.aiheadn.cn/categories/Codelearning/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"http://blog.aiheadn.cn/tags/Java/"}]},{"title":"cmdå¸¸ç”¨å‘½ä»¤","slug":"cmdå¸¸ç”¨å‘½ä»¤","date":"2023-01-07T10:36:47.000Z","updated":"2023-02-06T16:37:11.647Z","comments":true,"path":"archives/65edf23c.html","link":"","permalink":"http://blog.aiheadn.cn/archives/65edf23c.html","excerpt":"","text":"å‰è¨€è®°å½•ä¸€äº›æˆ‘ç»å¸¸ä½¿ç”¨çš„cmdå‘½ä»¤ï¼ŒæŒç»­æ›´æ–° å¯ç”¨èµ„æºç®¡ç†å™¨explorer è¿”å›ä¸Šä¸€çº§ç›®å½•åœ¨é»˜è®¤çš„å‘½ä»¤ååŠ  cd.. å³å¯è¿”å›ä¸Šä¸€çº§ç›®å½•","categories":[{"name":"ä»£ç å­¦ä¹ ","slug":"Codelearning","permalink":"http://blog.aiheadn.cn/categories/Codelearning/"}],"tags":[{"name":"cmd","slug":"cmd","permalink":"http://blog.aiheadn.cn/tags/cmd/"}]},{"title":"ä¸€äº›å¸¸ç”¨çš„ç½‘ç«™æ–‡æ¡£","slug":"ä¸€äº›å¸¸ç”¨çš„ç½‘ç«™æ–‡æ¡£","date":"2023-01-06T09:32:05.000Z","updated":"2023-03-01T03:29:10.580Z","comments":true,"path":"archives/1d5436e1.html","link":"","permalink":"http://blog.aiheadn.cn/archives/1d5436e1.html","excerpt":"","text":"å‰è¨€ä¸»è¦ç”¨æ¥è®°å½•ä¸€äº›æˆ‘ç»å¸¸ä½¿ç”¨çš„ç½‘ç«™æŸ¥è¯¢èµ„æ–™ ç½‘ç«™æ–‡æ¡£æ— æ¶¯æ•™ç¨‹ï¼šhttps://www.learnfk.com/ butterflyä¸»é¢˜çš„æ ‡ç­¾å¤–æŒ‚ï¼š https://butterfly.js.org/posts/2df239ce/ æœ‰é“ç¿»è¯‘ï¼š https://fanyi.youdao.com/index.html#/ markdownå®˜æ–¹æ–‡æ¡£ï¼š https://markdown.com.cn/cheat-sheet.html å›¾ç‰‡åœ¨çº¿å‹ç¼©ï¼ˆä»¥åŠç«™é•¿åŠŸèƒ½ï¼‰ï¼š https://www.bejson.com/ui/compress_img/ æ–‡ä»¶æ ¼å¼è½¬æ¢ï¼šhttps://app.xunjiepdf.com/ppt2jpg/ å“”å“©å“”å“©è§†é¢‘ä¸‹è½½ï¼š https://bilibili.iiilab.com/ ç½‘æ˜“è§å¤–å·¥ä½œå°ï¼š https://jianwai.youdao.com/ æ²¹çŒ´ Greasy Forkï¼š https://greasyfork.org/zh-CN Jqueryï¼šhttps://jquery.cuishifeng.cn/ JSå®˜æ–¹æ–‡æ¡£ï¼š https://developer.mozilla.org/zh-CN/docs/Web/JavaScript","categories":[{"name":"ä»£ç å­¦ä¹ ","slug":"Codelearning","permalink":"http://blog.aiheadn.cn/categories/Codelearning/"},{"name":"æ–‡æ¡£","slug":"Codelearning/doc","permalink":"http://blog.aiheadn.cn/categories/Codelearning/doc/"}],"tags":[{"name":"æ–‡æ¡£","slug":"doc","permalink":"http://blog.aiheadn.cn/tags/doc/"},{"name":"ç½‘ç«™","slug":"web","permalink":"http://blog.aiheadn.cn/tags/web/"}]},{"title":"å…³äºhexoé…ç½®æ±‡æ€»","slug":"å…³äºhexoé…ç½®æ±‡æ€»","date":"2023-01-05T05:19:11.000Z","updated":"2023-02-01T06:33:04.249Z","comments":true,"path":"archives/1b4c065d.html","link":"","permalink":"http://blog.aiheadn.cn/archives/1b4c065d.html","excerpt":"","text":"å‰è¨€è¿™ç¯‡æ–‡ç« ä¸»è¦è®°å½•ä¸€ä¸‹æˆ‘åœ¨ä½¿ç”¨hexoåšå®¢é‡åˆ°çš„ä¸€äº›é—®é¢˜ï¼Œä»¥åŠä¸€äº›å¸¸ç”¨çš„é…ç½®ï¼Œéƒ½æ±‡æ€»åˆ°è¿™ç¯‡æ–‡ç« ï¼ŒæŒç»­æ€§æ›´æ–°ï¼Œä»¥ä¾¿å¿˜è®°çš„æ—¶å€™æ–¹ä¾¿æŸ¥æ‰¾ã€‚ åˆ†ç±»åå’Œæ ‡ç­¾åæ”¹æˆè‹±æ–‡ä¸€èˆ¬hexoéƒ½æ˜¯éƒ¨ç½²åœ¨GitHubä¸Šé¢ï¼Œä¿®ä¸ä¿®æ”¹éƒ½æ— æ‰€è°“ï¼Œæˆ‘çš„ç½‘ç«™æ˜¯åœ¨ä¸ªäººäº‘æœåŠ¡å™¨ä¸Šéƒ¨ç½²ï¼Œå¯¹äºNginxä¸Šä¸æ”¯æŒä¸­æ–‡urlï¼Œè¿™å°±å¾ˆéš¾å—ï¼Œåœ¨æŸ¥æ‰¾èµ„æ–™çš„æ—¶å€™å‘ç°å¯ä»¥ä¿®æ”¹æˆè‹±æ–‡ï¼Œå¦‚ä¸‹ åˆ†ç±»åç§°é»˜è®¤æ˜¯ä½ åœ¨æ–‡ç« é‡Œé¢è®¾ç½®çš„ï¼Œå¦‚æœæ˜¯ä¸­æ–‡åˆ†ç±»åï¼Œé‚£ä¹ˆè·¯å¾„åä¹Ÿæ˜¯ä¸­æ–‡äº†ï¼Œç‰¹åˆ«åˆ«æ‰­ã€‚æˆ‘åœ¨æ–‡æ¡£ä¸ŠæŸ¥åˆ°äº†ä¸€ä¸ªåä¸º category_map çš„è®¾ç½®é¡¹ï¼Œå°±æ˜¯ä¸€ä¸ªé”®å€¼å¯¹å˜›ã€‚ä¿®æ”¹åŠæ³•å°±æ˜¯æ‰“å¼€ä½ çš„ Hexo é…ç½®æ–‡ä»¶ _config.ymlã€‚ä¿®æ”¹ category_map å±æ€§å’Œtag_mapå±æ€§å¤§æ¦‚æŒ‰ç…§è¿™æ ·çš„æ ¼å¼ï¼š 1234567891011category_map: &#x27;ä»£ç å­¦ä¹ &#x27; : Codelearning &#x27;ä¿¡æ¯æŠ€æœ¯&#x27; : xingxijishu &#x27;å¹³é¢è®¾è®¡&#x27; : plane &#x27;å¹³é¢ç¬”è®°&#x27; : planenote tag_map: &#x27;å¹³é¢è®¾è®¡&#x27; : plane &#x27;åšå®¢&#x27; : blog &#x27;è…¾è®¯cos&#x27; : cos &#x27;APIæ¥å£&#x27; : api è¿™æ ·é‡æ–°ç”Ÿæˆçš„é™æ€æ–‡ä»¶ï¼Œå°±ä¼šå°†ä¸­æ–‡è½¬æ¢ä¸ºè‹±æ–‡ï¼Œè¿™æ ·åšå¯èƒ½æœ‰ç‚¹éº»çƒ¦ï¼Œæ¯æ¬¡éƒ½éœ€è¦ä¿®æ”¹ä¸€ä¸‹ï¼Œæ‰€ä»¥æ ‡ç­¾å°½é‡ä½¿ç”¨è‹±æ–‡ã€‚ä¿®æ”¹å‰çš„urlhttp://blog.aiheadn.cn/categories/ä»£ç å­¦ä¹ /ä¿®æ”¹åçš„urlhttp://blog.aiheadn.cn/categories/Codelearning/ ç›‘è§†æ–‡ä»¶å˜åŠ¨Hexo èƒ½å¤Ÿç›‘è§†æ–‡ä»¶å˜åŠ¨å¹¶ç«‹å³é‡æ–°ç”Ÿæˆé™æ€æ–‡ä»¶ï¼Œåœ¨ç”Ÿæˆæ—¶ä¼šæ¯”å¯¹æ–‡ä»¶çš„ SHA1 checksumï¼Œåªæœ‰å˜åŠ¨çš„æ–‡ä»¶æ‰ä¼šå†™å…¥ã€‚ 1hexo generate --watch hexo Butterflyä¸»é¢˜æ–‡ç« ç½®é¡¶å¸è½½hexo-generator-indexï¼Œç„¶åå®‰è£…hexo-generator-index-pin-top 123npm uninstall hexo-generator-index --savenpm install hexo-generator-index-pin-top --save ä½¿ç”¨æ–¹æ³•ï¼šåœ¨éœ€è¦ç½®é¡¶çš„æ–‡ç« çš„Front-matterä¸­åŠ ä¸Štop: true&#x2F;æ•°å­—å³å¯ï¼Œæ•°å­—è¶Šå¤§ï¼Œæ–‡ç« è¶Šé å‰ã€‚ä¾‹å¦‚ 12345cover: top: 1 #è¿™é‡ŒåŠ ä¸€ä¸ªtopå°±è¡Œabbrlink: 1d5436e1date: 2023-01-06 17:32:05 æ–‡ç« æ¨¡æ¿å¾ˆå¤šå°ä¼™ä¼´ç»™è‡ªå·±ä¸ªåšå®¢æ·»åŠ äº†å¾ˆå¤šå…¶ä»–çš„åŠŸèƒ½ï¼Œä½†æ˜¯æ¯æ¬¡å†™æ–‡ç« çš„æ—¶å€™éƒ½éœ€è¦åœ¨æ–‡ç« çš„å¼€å¤´å»å†™ä¸€éï¼Œè¿™ç®€ç›´å°±æ˜¯é‡å¤é€ è½®å­ã€‚å…¶å®ï¼Œä½ å¯ä»¥è‡ªå·±åœ¨scaffoldsä¸­å»ä¿®æ”¹å±äºä½ è‡ªå·±çš„æ¨¡æ¿ hexoæ·»åŠ å“”å“©å“”å“©è§†é¢‘è¯­æ³•ï¼š&#123;% bili video_id %&#125; or &#123;% bili video_id page %&#125;ç”¨æ³• åœ¨ Hexo åšå®¢è¿è¡Œä¸­å®‰è£…æ’ä»¶ npm i hexo-tag-bili --save åœ¨ Hexo å¸–å­&#x2F;é¡µé¢ä¸­ &#123;% bili video_id %&#125; or &#123;% bili video_id page %&#125; ä¾‹ï¼šhttps://www.bilibili.com/video/av24897960 &#123;% bili 24897960 %&#125; https://www.bilibili.com/video/av24897960/?p=2 &#123;% bili 24897960 2 %&#125; æ’ä»¶ä»“åº“åœ°å€ï¼šhttps://github.com/honjun/hexo-tag-bili æŒç»­æ›´æ–°","categories":[{"name":"ä»£ç å­¦ä¹ ","slug":"Codelearning","permalink":"http://blog.aiheadn.cn/categories/Codelearning/"},{"name":"hexo","slug":"Codelearning/hexo","permalink":"http://blog.aiheadn.cn/categories/Codelearning/hexo/"}],"tags":[{"name":"hexo","slug":"hexo","permalink":"http://blog.aiheadn.cn/tags/hexo/"}]},{"title":"linuxç¯å¢ƒå®‰è£…nodejså’Œnpmç¯å¢ƒ","slug":"linuxç¯å¢ƒå®‰è£…nodejså’Œnpmç¯å¢ƒ","date":"2023-01-04T13:01:25.000Z","updated":"2023-01-05T03:35:05.309Z","comments":true,"path":"archives/53576780.html","link":"","permalink":"http://blog.aiheadn.cn/archives/53576780.html","excerpt":"","text":"å‰è¨€å› ä¸ºåˆšåˆšæ¢ä¸Šhexoçš„æ¡†æ¶ï¼Œæƒ³åˆ©ç”¨ç§æœ‰éƒ¨ç½²æŠŠTwikooè¯„è®ºéƒ¨ç½²åœ¨åšå®¢ä¸Šï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨liunxå®‰è£…node.js,ç½‘ç»œä¸Šå¯¹äºå®‰è£…linuxçš„èµ„æ–™å¾ˆå°‘ï¼Œåœ¨æˆ‘æŸ¥æ‰¾äº†ä¸€äº›èµ„æ–™ä¹‹åç»ˆäºæŠŠç¯å¢ƒé…ç½®å¥½ï¼Œä½†æ˜¯å› ä¸ºæ‰§è¡Œæ¡å‘½ä»¤ nohup tkserver &gt;&gt; tkserver.log 2&gt;&amp;1 &amp;ä¸€ç›´æŠ¥é”™ï¼Œæ€è€ƒä¸€ä¸ªä¸‹åˆä¹‹åï¼Œæœ€åæ¢äº†å¦å¤–ä¸€ä¸ªè¯„è®ºç³»ç»Ÿã€‚ å®‰è£…npde.jsç¬¬ä¸€æ­¥å…ˆå®‰è£…nodejsnodejså®˜æ–¹ç½‘ç«™æ‰¾åˆ°éœ€è¦ä¸‹è½½çš„ç‰ˆæœ¬å·ï¼Œå³é”®å¤åˆ¶å‡ºä¸‹è½½åœ°å€ https://nodejs.org/dist/v18.12.1/node-v18.12.1-linux-x64.tar.xzåˆ©ç”¨Xshellè¿æ¥ä½ çš„æœåŠ¡å™¨é¦–å…ˆåº”è¯¥å…ˆè¿›å…¥ç›®å½• 1cd /usr/local/ æ–°å»ºä¸€ä¸ªnodejsçš„ç›®å½• 1mkdir nodejs 6.cdåˆ°nodejsç›®å½•ï¼Œç”¨wgetä¸‹è½½ è¿™æ ·å°±ç›´æ¥ä¸‹è½½åˆ°ä½ çš„ç›®å½•é‡Œé¢ 1wget https://nodejs.org/dist/v18.12.1/node-v18.12.1-linux-x64.tar.xz tar xf è§£å‹æ–‡ä»¶ 1tar xf node-v10.15.0-linux-x64.tar.xz mv é‡å‘½åä¸ºnode18 è¿™ä¸ªå‘½åè‡ªå·±æ¸…æ¥šå°±è¡Œ 1mv node-v10.15.0-linux-x64 nodejs18 é…ç½®ç¯å¢ƒå˜é‡ln -sè®¾ç½®nodeå’Œnpmè½¯é“¾æ¥ ï¼ˆé…ç½®ç¯å¢ƒå˜é‡ï¼Œè¿™é‡Œçš„è·¯å¾„ä¸€å®šè¦è‡ªå·±æ¸…æ¥šï¼‰ 12ln -s /usr/local/nodejs/nodejs18/bin/node /usr/bin/nodeln -s /usr/local/nodejs/nodejs18/bin/npm /usr/bin/npm å¦‚æœé…ç½®é”™äº†çš„è¯ å¯ä»¥ä½¿ç”¨è¦†ç›–å‘½ä»¤ in -sf å¼ºåˆ¶åˆ›å»ºè½¯é“¾æ¥ï¼ˆè¦†ç›–ä»¥å‰çš„é“¾æ¥ï¼‰ è¾“å…¥node -væŸ¥çœ‹ç‰ˆæœ¬å· 1node -v é…ç½®æˆåŠŸååº”è¯¥æ˜¾ç¤ºçš„æ˜¯nodeçš„ç‰ˆæœ¬å·ï¼Œå¦‚æœæç¤ºä¹±ç çš„è¯ï¼Œä¸€èˆ¬æ˜¯linuxçš„å†…æ ¸å’Œnodeå†²çªäº†ï¼Œå¯ä»¥é€‰æ‹©é™åº•ç‰ˆæœ¬ã€‚ å®‰è£…cnpmè¿™ä¸ªæ˜¯æˆ‘çœ‹å…¶ä»–èµ„æ–™ï¼Œæˆ‘æ²¡æœ‰æµ‹è¯•ï¼Œå› ä¸ºæˆ‘è§‰å¾—npmé€Ÿåº¦è¿˜æ˜¯å¯ä»¥çš„æœ‰æ—¶å€™ç”¨npmå®‰è£…é€Ÿåº¦å¤ªæ…¢ï¼Œè¿™æ—¶å¯ä»¥è€ƒè™‘å®‰è£…cnpm ç›´æ¥npmä¸‹è½½å®‰è£…å³å¯ï¼š cdåˆ°&#x2F;usr&#x2F;local&#x2F;nodejsç›®å½• 1npm install -g cnpm --registry=https://registry.npm.taobao.org åˆ›å»ºè½¯è¿æ¥ 1ln -s /usr/local/nodejs/nodejs18/bin/cnpm /usr/bin/cnpm æŸ¥çœ‹ç‰ˆæœ¬ï¼šcnpm -v çœ‹åˆ°ä»¥ä¸‹ä¿¡æ¯å³ä¸ºæˆåŠŸ 12345678910111213cnpm@6.0.0 (/usr/lib/node_modules/cnpm/lib/parse_argv.js)npm@6.5.0 (/usr/lib/node_modules/cnpm/node_modules/npm/lib/npm.js)node@10.15.0 (/usr/local/nodejs/nodejs10/bin/node)npminstall@3.19.1 (/usr/lib/node_modules/cnpm/node_modules/npminstall/lib/index.js)prefix=/usr/local/nodejs/nodejs10linux x64 3.10.0-693.2.2.el7.x86_64registry=https://registry.npm.taobao.org","categories":[{"name":"ä»£ç å­¦ä¹ ","slug":"Codelearning","permalink":"http://blog.aiheadn.cn/categories/Codelearning/"},{"name":"linux","slug":"Codelearning/linux","permalink":"http://blog.aiheadn.cn/categories/Codelearning/linux/"}],"tags":[{"name":"linux","slug":"linux","permalink":"http://blog.aiheadn.cn/tags/linux/"},{"name":"node","slug":"node","permalink":"http://blog.aiheadn.cn/tags/node/"},{"name":"npm","slug":"npm","permalink":"http://blog.aiheadn.cn/tags/npm/"}]},{"title":"åŸºäºhexo+butterflyå’ŒGithub pagesåšå®¢","slug":"åŸºäºhexo+butterflyå’ŒGithub pagesåšå®¢","date":"2023-01-03T15:05:59.000Z","updated":"2023-02-01T06:27:05.757Z","comments":true,"path":"archives/eeace1a8.html","link":"","permalink":"http://blog.aiheadn.cn/archives/eeace1a8.html","excerpt":"","text":"å‰è¨€åœ¨ä¼—å¤šçš„åšå®¢ä¸­ï¼Œæˆ‘é€‰æ‹©äº†hexoï¼Œæœ€å¤§çš„ä¼˜åŠ¿å°±æ˜¯å¯ä»¥ç»“åˆGitHub pageæ¥æ­å»ºä¸€ä¸ªå…è´¹çš„ä¸ªäººåšå®¢ç³»ç»Ÿï¼Œå°†æ–‡ç« éƒ½æ‰˜ç®¡åˆ°GitHubä¸Šï¼Œåœ¨ä¹Ÿä¸ç”¨æ‹…å¿ƒæœåŠ¡å™¨è¿‡æœŸçš„é—®é¢˜äº†ï¼Œè€Œä¸”å¯ä»¥è‡ªå·±ä¹°ä¸€ä¸ªåŸŸåï¼Œè§£æäº†GitHubä¸Šå°±å¯ä»¥ç›´æ¥ä½¿åŸŸåè®¿é—®äº†ï¼Œä¸è¿‡å› ä¸ºæœ‰è‡ªå·±çš„æœåŠ¡å™¨ï¼Œæ‰€ä»¥æˆ‘ç›´æ¥éƒ¨ç½²åœ¨äº†è‡ªå·±çš„æœåŠ¡å™¨ä¸Šé¢ã€‚ ç¯å¢ƒæ­å»ºï¼šNodeJs+Git+Hexo1.ä¸‹è½½å®‰è£… node.js æˆ‘ä»¬å¯ä»¥éªŒè¯nodeçš„ç‰ˆæœ¬å·å’Œå®ƒæ‰€é™„å¸¦çš„npmåŒ…ç®¡ç†å™¨ç‰ˆæœ¬å·ï¼š 1234# ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥ç‰ˆæœ¬ï¼Œå¦‚æœæ­£ç¡®è¾“å‡ºåˆ™è¡¨ç¤ºå®‰è£…æˆåŠŸ# CMDè¾“å…¥ï¼šnode -vnpm v åˆ‡æ¢å›½å†…æºï¼Œä½¿ç”¨cnpmï¼ˆé©¬äº‘çˆ¸çˆ¸çš„è¿æ¥æ›´å¿«å–”~) 12# CMDè¾“å…¥ï¼šnpm install -g cnpm --registry=https://registry.npm.taobao.org æŸ¥çœ‹cnpmçš„ç‰ˆæœ¬ 123456789CMDè¾“å…¥:cnpm -v# æ‰“å°çš„ä¿¡æ¯ï¼šcnpm@6.1.1 npm@6.14.11 node@14.15.4 npminstall@3.28.0 win32 x64 10.0.18363registry=https://r.npm.taobao.org 2.å®‰è£…git ç‚¹æˆ‘ä¸‹è½½ ä¸€æ ·çš„æ–¹æ³•ï¼Œå®‰è£…å¥½åä¼šå‡ºç°ä¸‰ä¸ªå¿«æ·æ–¹å¼ git cmd git bashå®‰è£…æˆåŠŸå¦‚ä¸‹å›¾ï¼š 3.hexoå®‰è£…ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…hexoåŒ…ï¼Œ-gè¡¨ç¤ºå…¨å±€å®‰è£…cnpm install hexo -g åœ¨ä½ æƒ³è¦çš„åœ°æ–¹æ–°å»ºä¸€ä¸ªä¸“é—¨æ¥æ”¾ç½®hexoåšå®¢å†…å®¹çš„æ–‡ä»¶å¤¹ï¼Œè¿™é‡Œæˆ‘å‘½åä¸ºhexoï¼Œè¿™é‡Œæˆ‘æ˜¯E:\\hexocmdåˆ°è¿™ä¸ªæ–‡ä»¶å¤¹æ ¹ç›®å½•ï¼š 12baseï¼šE:base: cd hexo/ ç„¶åè¿è¡Œhexo initå‘½ä»¤æ¥åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹åˆå§‹åŒ–ä¸€äº›hexoçš„åŸºæœ¬æ–‡ä»¶è¾“å‡ºä¿¡æ¯å¦‚ä¸‹ï¼š 12345678910(base) E:\\hexo&gt;hexo initINFO Cloning hexo-starter https://github.com/hexojs/hexo-starter.git[32mINFO [39m Install dependenciesadded 188 packages from 443 contributors and audited 194 packages in 34.032s15 packages are looking for funding run `npm fund` for detailsfound 0 vulnerabilitiesINFO Start blogging with Hexo! æ–‡ä»¶å¤¹ä¸‹çš„å¯¹åº”ç”Ÿæˆæ–‡ä»¶ï¼š æ¥ä¸‹æ¥çœ‹çœ‹hexoçš„ä¸€äº›å¸¸ç”¨åŸºæœ¬å‘½ä»¤ï¼š 1234567891011hexo init &lt;folder&gt; # æ‰§è¡Œinitå‘½ä»¤åˆå§‹åŒ–hexoåˆ°ä½ æŒ‡å®šçš„ç›®å½•hexo n &quot;æˆ‘çš„åšå®¢&quot; == hexo new &quot;æˆ‘çš„åšå®¢&quot; # æ–°å»ºæ–‡ç« hexo generate # æ ¹æ®å½“å‰ç›®å½•ä¸‹æ–‡ä»¶,ç”Ÿæˆé™æ€ç½‘é¡µ ç®€å†™ï¼šhexo ghexo server # è¿è¡Œæœ¬åœ°æœåŠ¡ ç®€å†™ï¼šhexo shexo clean # æ¸…ç†hexo deploy # éƒ¨ç½² ç®€å†™ï¼šhexo dhexo server # Hexoä¼šç›‘è§†æ–‡ä»¶å˜åŠ¨å¹¶è‡ªåŠ¨æ›´æ–°ï¼Œæ— é¡»é‡å¯æœåŠ¡å™¨hexo server -s # é™æ€æ¨¡å¼hexo server -p 5000 # æ›´æ”¹ç«¯å£hexo server -i 192.168.1.1 # è‡ªå®šä¹‰ IP æŸ¥çœ‹hexoçš„åˆå§‹åŒ–åšå®¢é¡µé¢ï¼š åœ¨cmdè¾“å…¥ hexo s -g å³ç”Ÿæˆé™æ€ç½‘é¡µç„¶åå¯åŠ¨æœ¬åœ°æœåŠ¡ ç„¶ååœ¨æµè§ˆå™¨(æ¨èChrome)æ‰“å¼€http://localhost:4000 (4000æ˜¯é»˜è®¤port) ä»¥ä¸Šå°±æ˜¯hexoçš„åŸç”Ÿæ€ä¸»é¢˜ã€‚ åˆ°æ­¤ä¸ºæ­¢ï¼Œæˆ‘ä»¬æ­å»ºhexoçš„æœ¬åœ°åˆå§‹åŒ–å·²ç»å®Œæˆï¼Œä¹‹åå°±æ˜¯æ›´æ¢ä¸»é¢˜ï¼Œæˆ‘ä¸ªäººä½¿ç”¨çš„æ˜¯Butterflyï¼Œä¸‹é¢æˆ‘ä»¬è®²è®²å¦‚ä½•æ›´æ¢Butterflyä¸»é¢˜ æ›´æ¢ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹hexoå„ä¸ªæ–‡ä»¶å¤¹çš„å«ä¹‰ã€‚ ç›®å½•äº†è§£123456789101112131415161718192021hexo-install-directoryâ”œâ”€â”€ CNAMEâ”œâ”€â”€ _config.yml //Hexoçš„é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥é…ç½®ä¸»é¢˜ã€è¯­è¨€ç­‰â”œâ”€â”€ avatar.jpgâ”œâ”€â”€ db.jsonâ”œâ”€â”€ debug.logâ”œâ”€â”€ node_modulesâ”œâ”€â”€ public //æ‰§è¡Œhexo gå‘½ä»¤åï¼Œç”Ÿæˆçš„å†…å®¹ä¼šåœ¨è¿™é‡Œï¼ŒåŒ…æ‹¬æ‰€æœ‰çš„æ–‡ç« ã€é¡µé¢ã€åˆ†ç±»ã€tagç­‰.â”œâ”€â”€ scaffolds //ä¿å­˜ç€é»˜è®¤æ¨¡æ¿ï¼Œè‡ªå®šä¹‰æ¨¡æ¿å°±æ˜¯ä¿®æ”¹è¯¥ç›®å½•ä¸‹çš„æ–‡ä»¶â”‚ â”œâ”€â”€ draft.md //é»˜è®¤çš„è‰ç¨¿æ¨¡æ¿â”‚ â”œâ”€â”€ page.md //é»˜è®¤çš„é¡µé¢æ¨¡æ¿â”‚ â””â”€â”€ post.md //é»˜è®¤çš„æ–‡ç« æ¨¡æ¿â”œâ”€â”€ source //Hexoå­˜æ”¾ç¼–è¾‘é¡µé¢çš„åœ°æ–¹ï¼Œå¯ä»¥ä½¿ç”¨vimæˆ–å…¶ä»–ç¼–è¾‘å™¨ç¼–è¾‘è¿™é‡Œçš„å†…å®¹â”‚ â”œâ”€â”€ 404.html //è‡ªå®šä¹‰404é¡µé¢ï¼Œå¯ä»¥ä½¿ç”¨è…¾è®¯å…¬ç›Š404é¡µé¢â”‚ â”œâ”€â”€ Staticfile â”‚ â”œâ”€â”€ _drafts //å­˜æ”¾æ‰€æœ‰çš„è‰ç¨¿æ–‡ä»¶çš„ç›®å½•â”‚ â”œâ”€â”€ _posts //å­˜æ”¾æ‰€æœ‰çš„æ–‡ç« æ–‡ä»¶çš„ç›®å½•ï¼Œç”¨çš„æœ€å¤šï¼Œæ¯”å¦‚æ‰§è¡Œhexo new &quot;post_name&quot;ä¹‹åï¼Œpost_nameè¿™ç¯‡æ–‡ç« å°±å­˜æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹â”‚ â”œâ”€â”€ categoriesâ””â”€â”€ themes //Hexoçš„æ‰€æœ‰ä¸»é¢˜ â”œâ”€â”€ landscape //åŸå§‹hexoä¸»é¢˜ â”œâ”€â”€ butterfly //è¿™æ˜¯æˆ‘ç›®å‰ç”¨çš„ä¸»é¢˜ Butterflyä¸»é¢˜ä»“åº“åœ°å€ https://github.com/jerryc127/hexo-theme-butterfly ç ”ç©¶ä¸€ä¸ªç¨‹åºï¼Œæœ€å¥½è¦çœ‹çœ‹ç¨‹åºçš„æ–‡æ¡£ï¼Œè´è¶æ–‡æ¡£ å¦‚ä½•å®‰è£…å’Œç¾åŒ–æ–‡æ¡£å†™çš„éå¸¸å®Œæ•´ï¼Œå› ä¸ºå¤ªè¿‡äºç¹çï¼Œå¯ä»¥å¯¹ç…§ç€è§†é¢‘å»çœ‹ã€‚ æˆ‘è¿™é‡Œå‚è€ƒçš„æ˜¯å“”å“©å“”å“©å·äºŒå…”çš„è§†é¢‘å®Œæˆé…ç½®ã€‚ éƒ¨ç½²æœåŠ¡å™¨é…ç½®å¥½ä¹‹åå°±å¯ä»¥ä¸Šçº¿åˆ°è¿œç¨‹ç½‘ç«™ã€‚ éƒ¨ç½²ç½‘ç«™æœ‰å¾ˆå¤šç§æ–¹æ³• å¯ä»¥ä½¿ç”¨GitHub page Gitee pageéƒ½å¯ä»¥ï¼Œå…·ä½“ç½‘ç»œä¸Šæœ‰éå¸¸å¤šçš„æ•™ç¨‹ï¼Œåªè¦æœ‰ä¸€ä¸ªåŸŸåå°±å¯ä»¥ã€‚ è€Œè‡ªå»ºæœåŠ¡å™¨ä¸€èˆ¬å°±æ˜¯ç»™æœåŠ¡å™¨ç¯å¢ƒä¸Šé¢é…ç½®ä¸€ä¸ªé’©å­ï¼Œè¿™æ ·å°±å¯ä»¥ç”¨é’©å­å»æ¨é€ï¼Œè¾¾åˆ°æ›´æ–°åšå®¢çš„ç›®çš„ã€‚ è‡ªå»ºé’©å­æ•™ç¨‹å¤æ‚ï¼Œæˆ‘ä¸ºäº†æ–¹ä¾¿å°±ç®€å•å¼„äº†ä¸€ä¸ªå®å¡”+xftpä¸Šä¼  å› ä¸ºhexo gä¹‹å ç”Ÿæˆçš„æ–‡ä»¶éƒ½æ˜¯publicç›®å½•ä¸‹ï¼Œæ¯æ¬¡ç”Ÿæˆä¹‹ååˆ©ç”¨xftpè¦†ç›–ä¸Šä¼ åˆ°å®å¡”ç›®å½•ï¼Œå®ç°æ›´æ–°ã€‚ è¿™ç§é€‚åˆå¹³æ—¶ä¸æ€ä¹ˆå†™æ–‡ç« ï¼Œå¶å°”æ›´æ–°çš„åšä¸»ã€‚ æœ€ç»ˆæ•ˆæœ å·äºŒå…”ä¹Ÿæä¾›äº†éå¸¸å¤šçš„æ­å»ºæ–¹æ³•ï¼Œæˆ‘çš„å»ºè®®æ˜¯å¤šçœ‹è§†é¢‘ï¼Œæ–‡æ¡£æœ‰æ—¶å€™ç¡®å®ä¸å¥½ç†è§£ã€‚ å¦å¤–ï¼Œæˆ‘ä¼šæŠŠæˆ‘é‡åˆ°çš„é—®é¢˜éƒ½æ€»ç»“äº†ä¸€ä¸‹ï¼Œä¹Ÿå¯ä»¥ç•™è¨€ç»™æˆ‘é‡åˆ°çš„é—®é¢˜ å…³äº hexo é…ç½®æ±‡æ€»","categories":[{"name":"ä»£ç å­¦ä¹ ","slug":"Codelearning","permalink":"http://blog.aiheadn.cn/categories/Codelearning/"},{"name":"hexo","slug":"Codelearning/hexo","permalink":"http://blog.aiheadn.cn/categories/Codelearning/hexo/"}],"tags":[{"name":"hexo","slug":"hexo","permalink":"http://blog.aiheadn.cn/tags/hexo/"},{"name":"åšå®¢","slug":"blog","permalink":"http://blog.aiheadn.cn/tags/blog/"},{"name":"Butterfly","slug":"Butterfly","permalink":"http://blog.aiheadn.cn/tags/Butterfly/"}]},{"title":"java+swing+mysql å®ç°ç®€å•çš„ç­çº§ç®¡ç†ç³»ç»Ÿ","slug":"java-swing-mysql-å®ç°ç®€å•çš„ç­çº§ç®¡ç†ç³»ç»Ÿ","date":"2023-01-03T14:56:18.000Z","updated":"2023-01-04T06:03:07.564Z","comments":true,"path":"archives/4f6b19d6.html","link":"","permalink":"http://blog.aiheadn.cn/archives/4f6b19d6.html","excerpt":"","text":"é“¾æ¥ï¼šhttps://pan.baidu.com/s/13S39GLMJHMpzySX5XB1mHQæå–ç ï¼šn94a","categories":[{"name":"ä»£ç å­¦ä¹ ","slug":"Codelearning","permalink":"http://blog.aiheadn.cn/categories/Codelearning/"},{"name":"Java","slug":"Codelearning/Java","permalink":"http://blog.aiheadn.cn/categories/Codelearning/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"http://blog.aiheadn.cn/tags/Java/"}]},{"title":"æ€»ç»“å¹³é¢è®¾è®¡çš„å­¦æ ¡å®£ä¼ ä½œå“","slug":"æ€»ç»“2022å¹´éƒ¨åˆ†è®¾è®¡çš„å­¦æ ¡å®£ä¼ ä½œå“","date":"2023-01-03T14:54:19.000Z","updated":"2023-03-08T07:59:16.379Z","comments":true,"path":"archives/586e1f4c.html","link":"","permalink":"http://blog.aiheadn.cn/archives/586e1f4c.html","excerpt":"","text":"","categories":[{"name":"å¹³é¢è®¾è®¡","slug":"plane","permalink":"http://blog.aiheadn.cn/categories/plane/"}],"tags":[{"name":"æµ·æŠ¥","slug":"æµ·æŠ¥","permalink":"http://blog.aiheadn.cn/tags/%E6%B5%B7%E6%8A%A5/"}]},{"title":"2021å¤§å­¦ç”Ÿè®¡ç®—æœºè®¾è®¡å¤§èµ›ä½œå“","slug":"2021å¤§å­¦ç”Ÿè®¡ç®—æœºè®¾è®¡å¤§èµ›ä½œå“","date":"2023-01-03T14:37:42.000Z","updated":"2023-01-06T06:35:10.289Z","comments":true,"path":"archives/6bb180e7.html","link":"","permalink":"http://blog.aiheadn.cn/archives/6bb180e7.html","excerpt":"","text":"æ„Ÿè¨€å…³äºè¿™æ¬¡æ¯”èµ›ï¼Œè®©æˆ‘å¯¹psæœ‰äº†æ›´åŠ æ·±åˆ»çš„äº†è§£ã€‚ å…³äºè½¯ä»¶ä½¿ç”¨ï¼šAdobe Photoshop CC 2019 Adobe Illustrator 2019ç´ ææ¥æºï¼šåƒåº“ç½‘ åŒ…å›¾ç½‘å†…å­˜æ€»é‡ï¼š300MBå›¢é˜Ÿæˆå‘˜ï¼š æçƒ˜å…‰ é«˜éœ‡é“„ ç”°å¿—å®‡æ‰€è·å¥–é¡¹: äºŒç­‰å¥–è¯ä¹¦ç¼–å·ï¼šJSJDS202100462021041482000276807771æŸ¥è¯¢åœ°å€ï¼šhttps://2021.jsjds.com.cn/Index/main/certification-verificationå¤‡ä»½é“¾æ¥ï¼šé“¾æ¥ï¼šhttps://pan.baidu.com/s/1K5ZadHp19rkpTZR3AXZ--A ä»¥ä¸‹ä¸ºé¢„è§ˆå›¾","categories":[{"name":"å¹³é¢è®¾è®¡","slug":"plane","permalink":"http://blog.aiheadn.cn/categories/plane/"}],"tags":[{"name":"å¹³é¢è®¾è®¡","slug":"plane","permalink":"http://blog.aiheadn.cn/tags/plane/"},{"name":"PS","slug":"PS","permalink":"http://blog.aiheadn.cn/tags/PS/"},{"name":"ä½œå“","slug":"zuopin","permalink":"http://blog.aiheadn.cn/tags/zuopin/"},{"name":"æ¯”èµ›","slug":"bisai","permalink":"http://blog.aiheadn.cn/tags/bisai/"}]},{"title":"åº”ç”¨è…¾è®¯cosæ€»ç»“åŠCOSBrowser å·¥å…·","slug":"åº”ç”¨è…¾è®¯cosæ€»ç»“åŠCOSBrowser å·¥å…·","date":"2023-01-02T10:42:06.000Z","updated":"2023-01-04T06:03:07.572Z","comments":true,"path":"archives/c5a2465c.html","link":"","permalink":"http://blog.aiheadn.cn/archives/c5a2465c.html","excerpt":"","text":"ä»€ä¹ˆæ˜¯è…¾è®¯coså­˜å‚¨å¯¹è±¡å­˜å‚¨ï¼ˆCloud Object Storageï¼ŒCOSï¼‰æ˜¯ç”±è…¾è®¯äº‘æ¨å‡ºçš„æ— ç›®å½•å±‚æ¬¡ç»“æ„ã€æ— æ•°æ®æ ¼å¼é™åˆ¶ï¼Œå¯å®¹çº³æµ·é‡æ•°æ®ä¸”æ”¯æŒ HTTP&#x2F;HTTPS åè®®è®¿é—®çš„åˆ†å¸ƒå¼å­˜å‚¨æœåŠ¡ã€‚è…¾è®¯äº‘ COS çš„å­˜å‚¨æ¡¶ç©ºé—´æ— å®¹é‡ä¸Šé™ï¼Œæ— éœ€åˆ†åŒºç®¡ç†ï¼Œé€‚ç”¨äº CDN æ•°æ®åˆ†å‘ã€æ•°æ®ä¸‡è±¡å¤„ç†æˆ–å¤§æ•°æ®è®¡ç®—ä¸åˆ†æçš„æ•°æ®æ¹–ç­‰å¤šç§åœºæ™¯ã€‚COS æä¾›ç½‘é¡µç«¯ç®¡ç†ç•Œé¢ã€å¤šç§ä¸»æµå¼€å‘è¯­è¨€çš„ SDKã€API ä»¥åŠå‘½ä»¤è¡Œå’Œå›¾å½¢åŒ–å·¥å…·ï¼Œå¹¶ä¸”å…¼å®¹ S3 çš„ API æ¥å£ï¼Œæ–¹ä¾¿ç”¨æˆ·ç›´æ¥ä½¿ç”¨ç¤¾åŒºå·¥å…·å’Œæ’ä»¶ã€‚å‰é¢çš„è¯å–è‡ªäºå®˜æ–¹ ç”¨å®ƒå¯ä»¥å¹²ä»€ä¹ˆ1.cosæœ€å¤§ç‰¹ç‚¹åœ¨äºå­˜å‚¨å¤§é‡çš„å›¾ç‰‡æˆ–æ•°æ®2.æ˜“äºç”Ÿæˆå¤–è”æ–¹ä¾¿è°ƒç”¨3.æ­é…å¯è§†åŒ–çš„COSBrowser å·¥å…·å®Œå…¨å¯ä»¥å½“ä¸ªäººäº‘ç›˜ä½¿ç”¨ï¼ˆäº§ç”Ÿå¤–ç½‘æµé‡è´¹ç”¨æˆæœ¬è¾ƒé«˜ï¼‰4.ä¾¿å®œ5.ç­‰å¾…è¡¥å…… åº”ç”¨ç›®å‰åº”ç”¨äºåšå®¢çš„ä¸»è¦å›¾ç‰‡å­˜å‚¨ï¼ŒèŠ‚çœæœåŠ¡å™¨ç©ºé—´æˆæœ¬ ä¸ºä»€ä¹ˆä½¿ç”¨è…¾è®¯cosä»–å¯ä»¥å½“æˆä¸€ä¸ªå¤©ç„¶çš„å›¾åºŠä½¿ç”¨ è€Œä¸”å®‰å…¨ç³»æ•°é«˜ å›¾ç‰‡ä¸å®¹æ˜“ä¸¢å¤±å¦‚æœå°†å¤§é‡çš„å›¾ç‰‡å­˜æ”¾åœ¨å…è´¹å›¾åºŠ ä»£è¡¨ç€å›¾åºŠä¸€æ—¦å…³é—­ å›¾ç‰‡å¤–é“¾ä¼šå…¨éƒ¨å¤±æ•ˆï¼ˆæœ€æ˜‚è´µçš„å°±æ˜¯å…è´¹ï¼‰å¦å¤–å°†å›¾ç‰‡éƒ¨ç½²åœ¨æœåŠ¡å™¨ä¹Ÿä¼šå½±å“é¡µé¢ç­‰å¾…åŠ è½½é€Ÿåº¦ é¡µé¢å¯èƒ½å‡ºç°å¡æ­» ä¸¢å¸§ ååº”é€Ÿåº¦æ…¢ã€‚ä½¿ç”¨å¤–é“¾å¤§å¹…åº¦æå‡é¡µé¢å“åº”é€Ÿåº¦ COSBrowserCOSBrowser æ˜¯è…¾è®¯äº‘å¯¹è±¡å­˜å‚¨ COS æ¨å‡ºçš„å¯è§†åŒ–ç•Œé¢å·¥å…·ï¼Œè®©æ‚¨å¯ä»¥ä½¿ç”¨æ›´ç®€å•çš„äº¤äº’è½»æ¾å®ç°å¯¹ COS èµ„æºçš„æŸ¥çœ‹ã€ä¼ è¾“å’Œç®¡ç†ã€‚ç›®å‰ COSBrowser æœ‰æ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯ä¸¤ç§ï¼Œè¯¦æƒ…å¯å‚è§ï¼š æ¡Œé¢ç«¯ä½¿ç”¨è¯´æ˜ç§»åŠ¨ç«¯ä½¿ç”¨è¯´æ˜ COSBrowser å·¥å…·ä¸‹è½½[tabs][tab name&#x3D;â€æ¡Œé¢ç«¯â€ active&#x3D;â€trueâ€] Windows Windows 7 32&#x2F;64ä½ä»¥ä¸Šã€Windows Server 2008 R2 64ä½ä»¥ä¸Š macOS macOS 10.13ä»¥ä¸Š Linux éœ€å¸¦æœ‰å›¾å½¢ç•Œé¢å¹¶æ”¯æŒ AppImage æ ¼å¼æ³¨æ„ï¼šCentOS å¯åŠ¨å®¢æˆ·ç«¯éœ€åœ¨ç»ˆç«¯æ‰§è¡Œ .&#x2F;cosbrowser.AppImage â€“no-sandbox [&#x2F;tab][tab name&#x3D;â€ç§»åŠ¨ç«¯â€]Android Android 4.4ä»¥ä¸ŠiOS iOS 11ä»¥ä¸Š[&#x2F;tab][tab name&#x3D;â€ç½‘é¡µç«¯â€]Web Chrome&#x2F;FireFox&#x2F;Safari&#x2F;IE10+ç­‰æµè§ˆå™¨[&#x2F;tab][&#x2F;tabs]","categories":[{"name":"ä¿¡æ¯æŠ€æœ¯","slug":"xingxijishu","permalink":"http://blog.aiheadn.cn/categories/xingxijishu/"}],"tags":[{"name":"è…¾è®¯cos","slug":"cos","permalink":"http://blog.aiheadn.cn/tags/cos/"}]}],"categories":[{"name":"ä»£ç å­¦ä¹ ","slug":"Codelearning","permalink":"http://blog.aiheadn.cn/categories/Codelearning/"},{"name":"æ¡†æ¶å­¦ä¹ ","slug":"Codelearning/kuangjia","permalink":"http://blog.aiheadn.cn/categories/Codelearning/kuangjia/"},{"name":"ä¿¡æ¯æŠ€æœ¯","slug":"xingxijishu","permalink":"http://blog.aiheadn.cn/categories/xingxijishu/"},{"name":"Java","slug":"Codelearning/Java","permalink":"http://blog.aiheadn.cn/categories/Codelearning/Java/"},{"name":"æ–‡æ¡£","slug":"Codelearning/doc","permalink":"http://blog.aiheadn.cn/categories/Codelearning/doc/"},{"name":"hexo","slug":"Codelearning/hexo","permalink":"http://blog.aiheadn.cn/categories/Codelearning/hexo/"},{"name":"linux","slug":"Codelearning/linux","permalink":"http://blog.aiheadn.cn/categories/Codelearning/linux/"},{"name":"å¹³é¢è®¾è®¡","slug":"plane","permalink":"http://blog.aiheadn.cn/categories/plane/"}],"tags":[{"name":"spring","slug":"spring","permalink":"http://blog.aiheadn.cn/tags/spring/"},{"name":"vue","slug":"vue","permalink":"http://blog.aiheadn.cn/tags/vue/"},{"name":"edu","slug":"edu","permalink":"http://blog.aiheadn.cn/tags/edu/"},{"name":"C","slug":"C","permalink":"http://blog.aiheadn.cn/tags/C/"},{"name":"Java","slug":"Java","permalink":"http://blog.aiheadn.cn/tags/Java/"},{"name":"cmd","slug":"cmd","permalink":"http://blog.aiheadn.cn/tags/cmd/"},{"name":"æ–‡æ¡£","slug":"doc","permalink":"http://blog.aiheadn.cn/tags/doc/"},{"name":"ç½‘ç«™","slug":"web","permalink":"http://blog.aiheadn.cn/tags/web/"},{"name":"hexo","slug":"hexo","permalink":"http://blog.aiheadn.cn/tags/hexo/"},{"name":"linux","slug":"linux","permalink":"http://blog.aiheadn.cn/tags/linux/"},{"name":"node","slug":"node","permalink":"http://blog.aiheadn.cn/tags/node/"},{"name":"npm","slug":"npm","permalink":"http://blog.aiheadn.cn/tags/npm/"},{"name":"åšå®¢","slug":"blog","permalink":"http://blog.aiheadn.cn/tags/blog/"},{"name":"Butterfly","slug":"Butterfly","permalink":"http://blog.aiheadn.cn/tags/Butterfly/"},{"name":"æµ·æŠ¥","slug":"æµ·æŠ¥","permalink":"http://blog.aiheadn.cn/tags/%E6%B5%B7%E6%8A%A5/"},{"name":"å¹³é¢è®¾è®¡","slug":"plane","permalink":"http://blog.aiheadn.cn/tags/plane/"},{"name":"PS","slug":"PS","permalink":"http://blog.aiheadn.cn/tags/PS/"},{"name":"ä½œå“","slug":"zuopin","permalink":"http://blog.aiheadn.cn/tags/zuopin/"},{"name":"æ¯”èµ›","slug":"bisai","permalink":"http://blog.aiheadn.cn/tags/bisai/"},{"name":"è…¾è®¯cos","slug":"cos","permalink":"http://blog.aiheadn.cn/tags/cos/"}]}